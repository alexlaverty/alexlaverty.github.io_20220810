function personAnalyticsTrackClickV2(e,a,n){var t=["ancestry us","personui","personviews","facts"];window.utag&&window.utag.data&&window.utag.data.page_name&&(t=window.utag.data.page_name.split(" : "));var i=(window.page_name&&window.page_name.split(":")[3].replace(" ",""),window.utag&&window.utag.data&&window.utag.data.page_name?t[3]+"_"+e+"_click_"+a+"click":e+"_click_"+a+"click");return personAnalyticsTrackClickEx(i,{mix_event_name:i,link_name:t[2]+" : "+t[3]+" : "+n})}function personAnalyticsTrackClick(e){var a=["ancestry us","personui","personviews","facts"];window.utag&&window.utag.data&&window.utag.data.page_name&&(a=window.utag.data.page_name.split(" : "));var n=(window.page_name&&window.page_name.split(":")[3].replace(" ",""),window.utag&&window.utag.data&&window.utag.data.page_name?a[3]+"_"+e+"_click":e+"_click");return personAnalyticsTrackClickEx(n,{mix_event_name:n})}function personAnalyticsTrackSelection(e,a){var n=window.utag&&window.utag.data&&window.utag.data.page_name?window.utag.data.page_name.split(" : "):window.page_name,t=window.utag&&window.utag.data&&window.utag.data.page_name?n[3]+"_"+e+"_selection":e+"_selection";return personAnalyticsTrackClickEx(t,{mix_event_name:t,selection:a})}function personAnalyticsTrackAction(e,a){var n=window.utag&&window.utag.data&&window.utag.data.page_name?window.utag.data.page_name.split(" : "):window.page_name,t=window.utag&&window.utag.data&&window.utag.data.page_name?n[3]+"_"+e+"_"+a:e+"_"+a;return personAnalyticsTrackClickEx(t,{mix_event_name:t})}function personAnalyticsTrackClickEx(e,a){"use strict";if(0===$(".printFriendly").length&&window.utag&&window.personAnalytics){var n=e.split("_"),t=["ancestry us","personui","personviews","facts"];window.utag&&window.utag.data&&window.utag.data.page_name&&(t=window.utag.data.page_name.split(" : "));var i="ancestry us : personui : personviews : "+n[0]+" : "+n[1];5===n.length&&""!==n[3]&&(i=i+" : "+n[3]+n[4]);var o={},s="",r="",w="person page";a&&a.v&&"2.0"===a.v?(s="personviews : "+n[0]+" : "+n[1],r=t[0]+" : "+t[1]+" : "+t[2]+" : "+t[3],o={page_name:r,link_name:s,action:i},a&&a.mixpanel&&0!==Object.keys(a.mixpanel).length&&(o=Object.assign(o,a.mixpanel),o.feature_category="family history",o.feature=w,o.stack=t[1],o.page_name_var=t[3],o.page_name_fullpath="family history : person page : "+t[3])):(s=a&&a.link_name?a.link_name:t[1]+" : "+t[3]+" : "+n[1],r=t[0]+" : "+t[1]+" : "+t[2]+" : "+t[3],o={page_name:r,link_name:s,action:i},a&&0!==Object.keys(a).length&&("string"!=typeof a&&(o=Object.assign(o,a)),o.feature_category="family history",o.feature=w,o.stack=t[1],o.page_name_var=t[3],o.page_name_fullpath="family history : person page : "+t[3])),utag.link(o),window.personAnalytics.actionName=e,e&&function(e){if(void 0!==e&&void 0!==window.personAnalytics&&window.personAnalytics.trackActivities.indexOf(e.toLowerCase())>=0){var a=window.utag&&window.utag.data?window.utag.data.page_name:window.page_name,n={activity:e,isTreePublic:window.PersonCard.isTreePublic,omniturePageName:a},t=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/LogUserActivity";$.ajax({type:"POST",url:t,data:n,cache:!1})}}(e)}}function personAnalyticsTrackBbogClick(e,a,n,t,i){var o={bbog_subtypes:n.toLowerCase().split(","),bbog_types:a.split(","),split_names:["bbog_dismissals_algo_test"],split_treatments:t.split(","),mix_event_name:e};if(i){var s=[];s.push(i),o.bbog_dismiss_reason=s}return personAnalyticsTrackClickEx(e,o),!1}function personAnalyticsTrackBbogLoad(e,a,n){var t=e.split("_"),i=["ancestry us","personui","personviews","facts"];window.utag.data&&window.utag.data.page_name&&(i=window.utag.data.page_name.split(" : "),action=window.utag.data.page_name+" : "+t[0]+" : "+t[1]);var o=i[0]+" : "+i[1]+" : "+i[2]+" : "+i[3],s={page_name:o},r={bbog_subtypes:n.toLowerCase().split(","),bbog_types:a.split(","),split_names:["bbog_dismissals_algo_test"],mix_event_name:e};s=Object.assign(s,r),s.feature_category="family history",s.feature="person page",s.stack="person",s.page_name_var="facts",s.page_name_fullpath="family history : person page : facts",window.utag.link(s),window.personAnalytics.actionName=e,e&&function(e){if(void 0!==e&&void 0!==window.personAnalytics){var a=window.utag&&window.utag.data?window.utag.data.page_name:window.page_name,n={activity:e,isTreePublic:window.PersonCard.isTreePublic,omniturePageName:a},t=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/LogUserActivity";$.ajax({type:"POST",url:t,data:n,cache:!1})}}(e)}function personAnalyticsTrackTaskerProgress(e,a){var n={mix_event_split:a,mix_event_action:e,mix_event_name:"tasker_progress_render",split_name:["shared_person-goodness-tasker"],split_treatments:["completenessIcons","ctaIcon"]};return window.PersonCard&&(n.treeId=window.PersonCard.treeId,n.personId=window.PersonCard.personId),personAnalyticsTrackClickEx(e,n),!1}function personAnalyticsTrackTabClick(e){"use strict";if(0===$(".printFriendly").length){if(void 0!==window.utag&&window.personAnalytics&&window.personAnalytics.actionName!==e){var a=e.replace("Tab",""),n=window.page_name?window.page_name.substr(0,page_name.lastIndexOf(": ")+2)+a:"",t={page_name:n,page_name_var:a,feature:"person page",feature_category:"family history",page_name_fullpath:"family history : person page : "+a,mix_event_name:a+"_tab_view"};window.utag.view(t),window.personAnalytics.actionName=e,e&&function(e){if(void 0!==e&&void 0!==window.personAnalytics){var a=window.utag&&window.utag.data?window.utag.data.page_name:window.page_name,n={activity:e,isTreePublic:window.PersonCard.isTreePublic,omniturePageName:a},t=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/LogUserActivity";$.ajax({type:"POST",url:t,data:n,cache:!1})}}(e)}a&&personAnalyticsChangePageName(a)}}function personAnalyticsTrackMediaClicks(e){"use strict";personAnalyticsTrackClick($(e).parents(".HistoricalInsight").length>0?"HistoricalInsightMediaClick":"mediaNarrativeMediaClick")}function personAnalyticsTrackFactsPersonClick(e){"use strict";personAnalyticsTrackClick("familyListPerson"),e.indexOf("Child")>0&&personAnalyticsTrackClick("familyListPersonChild"),e.indexOf("Spouse")>0&&personAnalyticsTrackClick("familyListPersonSpouse"),e.indexOf("Parent")>0&&personAnalyticsTrackClick("familyListPersonParent"),e.indexOf("Sibling")>0&&personAnalyticsTrackClick("familyListPersonSibling")}function personAnalyticsChangePageName(e){"use strict";if(void 0!==window.utag&&void 0!==window.utag.data&&void 0!==window.utag.data.page_name&&-1===window.utag.data.page_name.indexOf(e)){var a=window.page_name?page_name.substr(0,page_name.lastIndexOf(": ")+2)+e:"";""!==a&&(window.utag.data.page_name=a)}}function logPersonPageContentView(e,a,n,t,i){"use strict";if(void 0!==window.utag&&void 0!==window.utag.data&&void 0!==window.utag.data.page_name&&-1===window.utag.data.page_name.indexOf(e)){var o=window.page_name?page_name.substr(0,page_name.lastIndexOf(": ")+2)+e:"",s={omniturePageName:o,isPublicTree:"true"===t.toLowerCase(),userRole:i},r=getPersonAjaxUrlPrefix()+"/tree/"+a+"/person/"+n+"/logPersonPageContentView";$.ajax({type:"POST",url:r,data:s,cache:!1}),window.utag.data.page_name=o}}function crackQueryString(e){"use strict";var a={};return e&&e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,n,t,i){a[n]=i,void 0===e&&(e=0),void 0===t&&(t=0)}),a}function getSuccessSourceType(){"use strict";var e="Other";return ancestry.pub.getStartUrl(function(a,n){a||(e=crackQueryString(n).successSource)}),e}function logContentSuccessPrint(e,a){"use strict";if(window.utag_data&&window.utag&&window.PersonCard){var n=window.page_name?window.page_name:"",t={omniturePageName:n,successSourceType:getSuccessSourceType(),isTreePublic:window.PersonCard.isTreePublic},i=getPersonAjaxUrlPrefix()+"/tree/"+e+"/person/"+a+"/logContentSuccessPrint";$.ajax({type:"POST",url:i,data:t,cache:!1})}}function paDomReady(e){"use strict";var a=window.page_name?page_name.split(":")[3].replace(" ",""):"";if(window.utag){window.page_name&&(window.utag.data.page_name=page_name);var n={page_name:window.utag.data.page_name,page_name_var:a,feature:"person page",feature_category:"family history",mix_event_name:"page_view"};window.location.href.includes("facts")&&(window.PersonResearch?(window.PersonResearch.split_names&&""!==window.PersonResearch.split_names&&(n.split_names=window.PersonResearch.split_names.split(","),window.PersonResearch.split_names=""),window.PersonResearch.split_treatments&&""!==window.PersonResearch.split_treatments&&(n.split_treatments=window.PersonResearch.split_treatments.split(","),window.PersonResearch.split_treatments=""),window.PersonResearch.bbog_types&&""!==window.PersonResearch.bbog_types&&(n.bbog_types=window.PersonResearch.bbog_types.split(","),window.PersonResearch.bbog_types=""),window.PersonResearch.bbog_subtypes&&""!==window.PersonResearch.bbog_subtypes&&(n.bbog_subtypes=window.PersonResearch.bbog_subtypes.split(","),window.PersonResearch.bbog_subtypes="")):e<20&&setTimeout(function(){paDomReady(e+1)},100)),window.utag.view(n),personAnalytics.init(window.personAnalytics.type,window.personAnalytics.showIdWarnings),setTimeout(function(){window.paDomReady=!0},1e3)}else e<20&&setTimeout(function(){paDomReady(e+1)},100)}var personAnalytics={trackActivities:["removeperson","addperson","deletecomment","addcomment"],showInformation:!1,actionName:"",pageIds:{LifeStory:[],Facts:[],Gallery:[],Hints:[]},init:function(e,a){"use strict";function n(a){var n=window.utag&&window.utag.data?window.utag.data.page_name+a.actionName:a.actionName,t=$(a.selector),i=["ancestry us","personui","personviews","facts"];window.utag&&window.utag.data&&window.utag.data.page_name&&(i=window.utag.data.page_name.split(" : "));var o=window.page_name&&e?window.page_name.substr(0,page_name.lastIndexOf(": ")+2)+e:i[0]+" : "+i[1]+" : "+i[2]+" : "+i[3];t.length>0&&window.utag?t.on("click",function(){window.utag.link({page_name:o,link_name:a.actionName,action:n})}):console.log("Attempt to register invalid selector for analytics:"+a.actionName)}personAnalytics.pageIds.length>0&&window.utag&&$.each(personAnalytics.pageIds[e],function(e,a){n(a)}),e&&personAnalyticsChangePageName(e)}};"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,a){"use strict";if(null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),t=1;t<arguments.length;t++){var i=arguments[t];if(null!==i)for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},writable:!0,configurable:!0}),(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?paDomReady(0):document.addEventListener("DOMContentLoaded",function(){paDomReady(0)},{once:!0});
//# sourceMappingURL=PersonAnalytics-d5085a33.min.js.map