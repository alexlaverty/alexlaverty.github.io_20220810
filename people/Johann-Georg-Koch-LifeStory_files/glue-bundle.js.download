"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Glue(){function e(e,n,o){var i=new XMLHttpRequest;i.open("GET","".concat(e.url).concat(e.url.indexOf("?")>=0?"&":"?","_=").concat(Date.now()),!0),e.xhrFields&&e.xhrFields.withCredentials&&(i.withCredentials=!0),i.onload=function(){i.status>=200&&i.status<400?(r(JSON.parse(i.response),e),void 0!==n&&null!==n&&n()):("function"==typeof o&&o({responseText:i.responseText,status:i.status}),console.error("Glue Component Error (Status ".concat(i.status,"): ").concat(i.responseText)))},i.onerror=function(){"function"==typeof o&&o({status:i.status}),console.error("Glue Component Error (Status ".concat(i.status,"): XML Http Request Error"))},t(i,e),i.send()}function t(e,t){if(t.headers)for(var n in t.headers)if(n&&Object.prototype.hasOwnProperty.call(t.headers,"".concat(n))){var r=String(t.headers[n]);e.setRequestHeader(n,r)}}function n(e,t){h+=1,window["glueJsonpFetch".concat(h)]=function(n){r(n,e),t&&"function"==typeof t&&t()};var n=document.createElement("script");n.onload=function(){return n.remove()},n.src="".concat(e.url).concat(e.url.indexOf("?")>=0?"&":"?","_=").concat(Date.now(),"&callback=glueJsonpFetch").concat(h),document.body.insertAdjacentElement("beforeend",n)}function r(e,t){try{!0===t.pushUrlState?History.pushState({tab:t.queryValue,rand:Math.random(),glueData:e,domId:t.domId,options:t},"tab ".concat(t.queryValue),t.queryValue):i(t,e),void 0!==t.callback&&null!==t.callback&&t.callback()}catch(e){null!==window.console&&console.error("Glue Component Error: ".concat(e.message))}}function o(e,t){var n=t.match(/<script[\s\S]*?>[\s\S]*?<\/script>/gi)||[],r=t;n.forEach(function(e){var t=document.createElement("div");t.insertAdjacentHTML("beforeend",e);var n=t.querySelector("script"),o=n.attributes,i=document.createElement("script");if(o)for(var a=o.length-1;a>=0;a-=1){var s=o[a];i.setAttribute(s.name,s.value)}i.innerHTML=n.innerHTML,document.body.insertAdjacentElement("beforeend",i),r.replace(e,"")}),e.innerHTML=r}function i(e,t){var n=e.removeCacheFiles?"glueStatic":"",r="";a(t.css.cdn).forEach(function(e){d.combinatorPath?r+=(r.length?"&":"")+e:document.head.insertAdjacentHTML("beforeend",'<link class="'.concat(n,'" rel="stylesheet" href="').concat(e,'">'))}),d.combinatorPath&&r&&document.head.insertAdjacentHTML("beforeend",'<link class="'.concat(n,'" rel="stylesheet" href="').concat(d.combinatorPath,"?").concat(r,'">')),document.querySelectorAll('link[class="glueStatic"]').forEach(function(e){return e.remove()});for(var i=0;i<t.css.local.length;i++)document.querySelectorAll('link[href="'.concat(t.css.local[i],'"]')).length||document.head.insertAdjacentHTML("beforeend",'<link class="'.concat(n,'" rel="stylesheet" href="').concat(t.css.local[i],'">'));if(o(document.getElementById(e.domId),t.html.body),t.js.asset)for(var s=0;s<t.js.asset.length;s++)u(t.js.asset[s]);var l="";a(t.js.cdn,"javascript").forEach(function(e){d.combinatorPath&&(l+=(l.length?"&":"")+e)}),d.combinatorPath&&l&&u("".concat(d.combinatorPath,"?").concat(l)),document.querySelectorAll('script[class="glueStatic"]').forEach(function(e){return e.remove()});for(var c=0;c<t.js.local.length;c++)u(t.js.local[c]);null!==window.acom&&null!==window.acom.bus&&e.events&&Object.keys(e.events).forEach(function(t){window.acom.bus.removeAllListeners(t),window.acom.bus.addListener(t,e.events[t])})}function a(e,t){if(void 0===e||0===e.length)return[];var n="";return("javascript"===t?document.querySelectorAll("script[src]"):document.querySelectorAll("link[href]")).forEach(function(e){n+="".concat("javascript"===t?e.src:e.href," ")}),e.map(function(t,r){var o=e[r],i=-1===n.indexOf(o);if((d.combinatorPath||"x"!==o[0])&&i)return o;i&&null!==window.console&&console.error("Glue Component Error: The file ".concat(o," was not loaded."))})}function s(t){if(void 0===t||null===t){e({key:d.key,url:d.url,domId:d.domId,pushUrlState:!1,queryKey:"tab-".concat(d.key),queryValue:d.value})}else i(d,t)}function l(t,n){var r=History.getState(),o=r.data.options?r.data.options:d.options;null!=o&&("function"==typeof t?n=t:t&&"object"===_typeof(t)&&Object.keys(t).forEach(function(e){o.url=c(o.url,e);var n=-1===o.url.indexOf("?")?"?":"&";o.url+="".concat(n).concat(e,"=").concat(t[e])}),e(o,n))}function c(e,t){var n=e.split("?");if(n.length>=2){for(var r="".concat(encodeURIComponent(t),"="),o=n[1].split(/[&;]/g),i=o.length-1;i>=0;i--)o[i].startsWith(r)&&o.splice(i,1);e=n[0]+(o.length>0?"?".concat(o.join("&")):"")}return e}function u(e){var t=document.createElement("script");t.src=e,document.body.insertAdjacentElement("beforeend",t)}var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=null,h=0;return Object.defineProperty(this,"preProcess",{get:function(){return f},set:function(e){f=e}}),Object.defineProperty(this,"fetch",{get:function(){return e}}),Object.defineProperty(this,"jsonpFetch",{get:function(){return n}}),Object.defineProperty(this,"staticFetch",{get:function(){return s}}),Object.defineProperty(this,"reload",{get:function(){return l}}),function(){History.Adapter.bind(window,"statechange",function(){var e=History.getState(),t=d.key;""===e.title&&""===e.title||(t=e.data.tab.toLowerCase()),"function"==typeof f&&f(t),e.data.glueData&&s(e.data.glueData)})}(),this}!function(e,t){"object"==("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){function e(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}function t(e){return!(!e||void 0===e.length)}function n(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function o(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,r._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void a(t.promise,e)}i(t.promise,r)}else(1===e._state?i:a)(t.promise,e._value)})):e._deferreds.push(t)}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==_typeof(t)||"function"==typeof t)){var n=t.then;if(t instanceof r)return e._state=3,e._value=t,void s(e);if("function"==typeof n)return void l(function(e,t){return function(){e.apply(t,arguments)}}(n,t),e)}e._state=1,e._value=t,s(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;n>t;t++)o(e,e._deferreds[t]);e._deferreds=null}function l(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}var c=setTimeout;r.prototype.catch=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,r)),r},r.prototype.finally=e,r.all=function(e){return new r(function(n,r){function o(e,t){try{if(t&&("object"==_typeof(t)||"function"==typeof t)){var s=t.then;if("function"==typeof s)return void s.call(t,function(t){o(e,t)},r)}i[e]=t,0==--a&&n(i)}catch(e){r(e)}}if(!t(e))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return n([]);for(var a=i.length,s=0;i.length>s;s++)o(s,i[s])})},r.resolve=function(e){return e&&"object"==_typeof(e)&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(n,o){if(!t(e))return o(new TypeError("Promise.race accepts an array"));for(var i=0,a=e.length;a>i;i++)r.resolve(e[i]).then(n,o)})},r._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},r._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var u=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"Promise"in u?u.Promise.prototype.finally||(u.Promise.prototype.finally=e):u.Promise=r}),function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return o(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e){!function(t){var n=e("eventemitter2").EventEmitter2,r=new n({wildcard:!0,delimiter:"::"});t.acom||(t.acom={}),t.acom.bus=r}(window)},{eventemitter2:2}],2:[function(e,t,n){!function(){function e(){this._events={},this._conf&&t.call(this,this._conf)}function t(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function r(e){this._events={},this.newListener=!1,t.call(this,e)}function o(e,t,n,r){if(!n)return[];var i,a,s,l,c,u,d,f=[],h=t.length,p=t[r],v=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,a=n._listeners.length;a>i;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&(f=f.concat(o(e,t,n[s],r+1)));return f}if("**"===p){(d=r+1===h||r+2===h&&"*"===v)&&n._listeners&&(f=f.concat(o(e,t,n,h)));for(s in n)"_listeners"!==s&&n.hasOwnProperty(s)&&("*"===s||"**"===s?(n[s]._listeners&&!d&&(f=f.concat(o(e,t,n[s],h))),f=f.concat(o(e,t,n[s],r))):f=f.concat(s===v?o(e,t,n[s],r+2):o(e,t,n[s],r)));return f}f=f.concat(o(e,t,n[p],r+1))}if(l=n["*"],l&&o(e,t,l,r+1),c=n["**"])if(h>r){c._listeners&&o(e,t,c,h);for(s in c)"_listeners"!==s&&c.hasOwnProperty(s)&&(s===v?o(e,t,c[s],r+2):s===p?o(e,t,c[s],r+1):(u={},u[s]=c[s],o(e,t,{"**":u},r+1)))}else c._listeners?o(e,t,c,h):c["*"]&&c["*"]._listeners&&o(e,t,c["*"],h);return f}function i(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;r>n+1;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var o=this.listenerTree,i=e.shift();i;){if(o[i]||(o[i]={}),o=o[i],0===e.length){if(o._listeners){if("function"==typeof o._listeners)o._listeners=[o._listeners,t];else if(a(o._listeners)&&(o._listeners.push(t),!o._listeners.warned)){var l=s;void 0!==this._events.maxListeners&&(l=this._events.maxListeners),l>0&&o._listeners.length>l&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}else o._listeners=t;return!0}i=e.shift()}return!0}var a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=10;r.prototype.delimiter=".",r.prototype.setMaxListeners=function(t){this._events||e.call(this),this._events.maxListeners=t,this._conf||(this._conf={}),this._conf.maxListeners=t},r.prototype.event="",r.prototype.once=function(e,t){return this.many(e,1,t),this},r.prototype.many=function(e,t,n){function r(){0==--t&&o.off(e,r),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return r._origin=n,this.on(e,r),o},r.prototype.emit=function(){this._events||e.call(this);var t=arguments[0];if("newListener"===t&&!this.newListener&&!this._events.newListener)return!1;if(this._all){for(var n=arguments.length,r=new Array(n-1),i=1;n>i;i++)r[i-1]=arguments[i];for(i=0,n=this._all.length;n>i;i++)this.event=t,this._all[i].apply(this,r)}if("error"===t&&!(this._all||this._events.error||this.wildcard&&this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var a;if(this.wildcard){a=[];var s="string"==typeof t?t.split(this.delimiter):t.slice();o.call(this,a,s,this.listenerTree,0)}else a=this._events[t];if("function"==typeof a){if(this.event=t,1===arguments.length)a.call(this);else if(arguments.length>1)switch(arguments.length){case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(var n=arguments.length,r=new Array(n-1),i=1;n>i;i++)r[i-1]=arguments[i];a.apply(this,r)}return!0}if(a){for(var n=arguments.length,r=new Array(n-1),i=1;n>i;i++)r[i-1]=arguments[i];for(var l=a.slice(),i=0,n=l.length;n>i;i++)this.event=t,l[i].apply(this,r);return l.length>0||!!this._all}return!!this._all},r.prototype.on=function(t,n){if("function"==typeof t)return this.onAny(t),this;if("function"!=typeof n)throw new Error("on only accepts instances of Function");if(this._events||e.call(this),this.emit("newListener",t,n),this.wildcard)return i.call(this,t,n),this;if(this._events[t]){if("function"==typeof this._events[t])this._events[t]=[this._events[t],n];else if(a(this._events[t])&&(this._events[t].push(n),!this._events[t].warned)){var r=s;void 0!==this._events.maxListeners&&(r=this._events.maxListeners),r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),console.trace())}}else this._events[t]=n;return this},r.prototype.onAny=function(e){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),this._all.push(e),this},r.prototype.addListener=r.prototype.on,r.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();r=o.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var s=0;s<r.length;s++){var l=r[s];if(n=l._listeners,a(n)){for(var c=-1,u=0,d=n.length;d>u;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){c=u;break}if(0>c)continue;return this.wildcard?l._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete l._listeners:delete this._events[e]),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete l._listeners:delete this._events[e])}return this},r.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;r>n;n++)if(e===t[n])return t.splice(n,1),this}else this._all=[];return this},r.prototype.removeListener=r.prototype.off,r.prototype.removeAllListeners=function(t){if(0===arguments.length)return!this._events||e.call(this),this;if(this.wildcard)for(var n="string"==typeof t?t.split(this.delimiter):t.slice(),r=o.call(this,null,n,this.listenerTree,0),i=0;i<r.length;i++){var a=r[i];a._listeners=null}else{if(!this._events[t])return this;this._events[t]=null}return this},r.prototype.listeners=function(t){if(this.wildcard){var n=[],r="string"==typeof t?t.split(this.delimiter):t.slice();return o.call(this,n,r,this.listenerTree,0),n}return this._events||e.call(this),this._events[t]||(this._events[t]=[]),a(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},r.prototype.listenersAny=function(){return this._all?this._all:[]},"function"==typeof define&&define.amd?define(function(){return r}):"object"==_typeof(n)?n.EventEmitter2=r:window.EventEmitter2=r}()},{}]},{},[1]),function(e,t){var n=e.History=e.History||{};if(void 0!==n.Adapter)throw new Error("History.js Adapter has already been loaded...");n.Adapter={handlers:{},_uid:1,uid:function(e){return e._uid||(e._uid=n.Adapter._uid++)},bind:function(e,t,r){var o=n.Adapter.uid(e);n.Adapter.handlers[o]=n.Adapter.handlers[o]||{},n.Adapter.handlers[o][t]=n.Adapter.handlers[o][t]||[],n.Adapter.handlers[o][t].push(r),e["on"+t]=function(e,t){return function(r){n.Adapter.trigger(e,t,r)}}(e,t)},trigger:function(e,t,r){r=r||{};var o,i,a=n.Adapter.uid(e);for(n.Adapter.handlers[a]=n.Adapter.handlers[a]||{},n.Adapter.handlers[a][t]=n.Adapter.handlers[a][t]||[],o=0,i=n.Adapter.handlers[a][t].length;o<i;++o)n.Adapter.handlers[a][t][o].apply(this,[r])},extractEventData:function(e,t){return t&&t[e]||void 0},onDomLoad:function(t){var n=e.setTimeout(function(){t()},2e3);e.onload=function(){clearTimeout(n),t()}}},void 0!==n.init&&n.init()}(window),function(e,t){var n=e.console||void 0,r=e.document,o=e.navigator,i=!1,a=e.setTimeout,s=e.clearTimeout,l=e.setInterval,c=e.clearInterval,u=e.JSON,d=e.alert,f=e.History=e.History||{},h=e.history;try{i=e.sessionStorage,i.setItem("TEST","1"),i.removeItem("TEST")}catch(e){i=!1}if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,void 0!==f.init)throw new Error("History.js Core has already been loaded...");f.init=function(e){return void 0!==f.Adapter&&(void 0!==f.initCore&&f.initCore(),void 0!==f.initHtml4&&f.initHtml4(),!0)},f.initCore=function(t){if(void 0!==f.initCore.initialized)return!1;if(f.initCore.initialized=!0,f.options=f.options||{},f.options.hashChangeInterval=f.options.hashChangeInterval||100,f.options.safariPollInterval=f.options.safariPollInterval||500,f.options.doubleCheckInterval=f.options.doubleCheckInterval||500,f.options.disableSuid=f.options.disableSuid||!1,f.options.storeInterval=f.options.storeInterval||1e3,f.options.busyDelay=f.options.busyDelay||250,f.options.debug=f.options.debug||!1,f.options.initialTitle=f.options.initialTitle||r.title,f.options.html4Mode=f.options.html4Mode||!1,f.options.delayInit=f.options.delayInit||!1,f.intervalList=[],f.clearAllIntervals=function(){var e,t=f.intervalList;if(void 0!==t&&null!==t){for(e=0;e<t.length;e++)c(t[e]);f.intervalList=null}},f.debug=function(){f.options.debug&&f.log.apply(f,arguments)},f.log=function(){var e,t,o,i,a,s=!(void 0===n||void 0===n.log||void 0===n.log.apply),l=r.getElementById("log");for(s?(i=Array.prototype.slice.call(arguments),e=i.shift(),void 0!==n.debug?n.debug.apply(n,[e,i]):n.log.apply(n,[e,i])):e="\n"+arguments[0]+"\n",t=1,o=arguments.length;t<o;++t){if(a=arguments[t],"object"===_typeof(a)&&void 0!==u)try{a=u.stringify(a)}catch(e){}e+="\n"+a+"\n"}return l?(l.value+=e+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||d(e),!0},f.getInternetExplorerMajorVersion=function(){return f.getInternetExplorerMajorVersion.cached=void 0!==f.getInternetExplorerMajorVersion.cached?f.getInternetExplorerMajorVersion.cached:function(){for(var e=3,t=r.createElement("div"),n=t.getElementsByTagName("i");(t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e")&&n[0];);return e>4&&e}()},f.isInternetExplorer=function(){return f.isInternetExplorer.cached=void 0!==f.isInternetExplorer.cached?f.isInternetExplorer.cached:Boolean(f.getInternetExplorerMajorVersion())},f.options.html4Mode?f.emulated={pushState:!0,hashChange:!0}:f.emulated={pushState:!Boolean(e.history&&e.history.pushState&&e.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(o.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(o.userAgent))),hashChange:Boolean(!("onhashchange"in e||"onhashchange"in r)||f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8)},f.enabled=!f.emulated.pushState,f.bugs={setHash:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),safariPoll:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===o.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(o.userAgent)),ieDoubleCheck:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<7)},f.isEmptyObject=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},f.cloneObject=function(e){var t,n;return e?(t=u.stringify(e),n=u.parse(t)):n={},n},f.getRootUrl=function(){var e=r.location.protocol+"//"+(r.location.hostname||r.location.host);return r.location.port&&(e+=":"+r.location.port),e+="/"},f.getBaseHref=function(){var e=r.getElementsByTagName("base"),t=null,n="";return 1===e.length&&(t=e[0],n=t.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},f.getBaseUrl=function(){return f.getBaseHref()||f.getBasePageUrl()||f.getRootUrl()},f.getPageUrl=function(){var e=f.getState(!1,!1),t=(e||{}).url||f.getLocationHref();return t.replace(/\/+$/,"").replace(/[^\/]+$/,function(e,t,n){return/\./.test(e)?e:e+"/"})},f.getBasePageUrl=function(){return f.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(e,t,n){return/[^\/]$/.test(e)?"":e}).replace(/\/+$/,"")+"/"},f.getFullUrl=function(e,t){var n=e,r=e.substring(0,1);return t=void 0===t||t,/[a-z]+\:\/\//.test(e)||(n="/"===r?f.getRootUrl()+e.replace(/^\/+/,""):"#"===r?f.getPageUrl().replace(/#.*/,"")+e:"?"===r?f.getPageUrl().replace(/[\?#].*/,"")+e:t?f.getBaseUrl()+e.replace(/^(\.\/)+/,""):f.getBasePageUrl()+e.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},f.getShortUrl=function(e){var t=e,n=f.getBaseUrl(),r=f.getRootUrl();return f.emulated.pushState&&(t=t.replace(n,"")),t=t.replace(r,"/"),f.isTraditionalAnchor(t)&&(t="./"+t),t=t.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},f.getLocationHref=function(e){return e=e||r,e.URL===e.location.href?e.location.href:e.location.href===decodeURIComponent(e.URL)?e.URL:e.location.hash&&decodeURIComponent(e.location.href.replace(/^[^#]+/,""))===e.location.hash?e.location.href:-1==e.URL.indexOf("#")&&-1!=e.location.href.indexOf("#")?e.location.href:e.URL||e.location.href},f.store={},f.idToState=f.idToState||{},f.stateToId=f.stateToId||{},f.urlToId=f.urlToId||{},f.storedStates=f.storedStates||[],f.savedStates=f.savedStates||[],f.normalizeStore=function(){f.store.idToState=f.store.idToState||{},f.store.urlToId=f.store.urlToId||{},f.store.stateToId=f.store.stateToId||{}},f.getState=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);var n=f.getLastSavedState();return!n&&t&&(n=f.createStateObject()),e&&(n=f.cloneObject(n),n.url=n.cleanUrl||n.url),n},f.getIdByState=function(e){var t,n=f.extractId(e.url);if(!n)if(t=f.getStateString(e),void 0!==f.stateToId[t])n=f.stateToId[t];else if(void 0!==f.store.stateToId[t])n=f.store.stateToId[t];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),void 0===f.idToState[n]&&void 0===f.store.idToState[n])break;f.stateToId[t]=n,f.idToState[n]=e}return n},f.normalizeState=function(e){var t,n;return e&&"object"===_typeof(e)||(e={}),void 0!==e.normalized?e:(e.data&&"object"===_typeof(e.data)||(e.data={}),t={},t.normalized=!0,t.title=e.title||"",t.url=f.getFullUrl(e.url?e.url:f.getLocationHref()),t.hash=f.getShortUrl(t.url),t.data=f.cloneObject(e.data),t.id=f.getIdByState(t),t.cleanUrl=t.url.replace(/\??\&_suid.*/,""),t.url=t.cleanUrl,n=!f.isEmptyObject(t.data),(t.title||n)&&!0!==f.options.disableSuid&&(t.hash=f.getShortUrl(t.url).replace(/\??\&_suid.*/,""),/\?/.test(t.hash)||(t.hash+="?"),t.hash+="&_suid="+t.id),t.hashedUrl=f.getFullUrl(t.hash),(f.emulated.pushState||f.bugs.safariPoll)&&f.hasUrlDuplicate(t)&&(t.url=t.hashedUrl),t)},f.createStateObject=function(e,t,n){var r={data:e,title:t,url:n};return r=f.normalizeState(r)},f.getStateById=function(e){return e=String(e),f.idToState[e]||f.store.idToState[e]||void 0},f.getStateString=function(e){var t,n;return t=f.normalizeState(e),n={data:t.data,title:e.title,url:e.url},u.stringify(n)},f.getStateId=function(e){var t;return t=f.normalizeState(e),t.id},f.getHashByState=function(e){var t;return t=f.normalizeState(e),t.hash},f.extractId=function(e){var t,n;return n=-1!=e.indexOf("#")?e.split("#")[0]:e,t=/(.*)\&_suid=([0-9]+)$/.exec(n),t?t[1]||e:e,(t?String(t[2]||""):"")||!1},f.isTraditionalAnchor=function(e){return!/[\/\?\.]/.test(e)},f.extractState=function(e,t){var n,r,o=null;return t=t||!1,n=f.extractId(e),n&&(o=f.getStateById(n)),o||(r=f.getFullUrl(e),n=f.getIdByUrl(r)||!1,n&&(o=f.getStateById(n)),o||!t||f.isTraditionalAnchor(e)||(o=f.createStateObject(null,null,r))),o},f.getIdByUrl=function(e){return f.urlToId[e]||f.store.urlToId[e]||void 0},f.getLastSavedState=function(){return f.savedStates[f.savedStates.length-1]||void 0},f.getLastStoredState=function(){return f.storedStates[f.storedStates.length-1]||void 0},f.hasUrlDuplicate=function(e){var t;return t=f.extractState(e.url),t&&t.id!==e.id},f.storeState=function(e){return f.urlToId[e.url]=e.id,f.storedStates.push(f.cloneObject(e)),e},f.isLastSavedState=function(e){var t,n,r,o=!1;return f.savedStates.length&&(t=e.id,n=f.getLastSavedState(),r=n.id,o=t===r),o},f.saveState=function(e){return!f.isLastSavedState(e)&&(f.savedStates.push(f.cloneObject(e)),!0)},f.getStateByIndex=function(e){return void 0===e?f.savedStates[f.savedStates.length-1]:e<0?f.savedStates[f.savedStates.length+e]:f.savedStates[e]},f.getCurrentIndex=function(){return f.savedStates.length<1?0:f.savedStates.length-1},f.getHash=function(e){var t=f.getLocationHref(e);return f.getHashByUrl(t)},f.unescapeHash=function(e){var t=f.normalizeHash(e);return t=decodeURIComponent(t)},f.normalizeHash=function(e){return e.replace(/[^#]*#/,"").replace(/#.*/,"")},f.setHash=function(e,t){var n,o;return!1!==t&&f.busy()?(f.pushQueue({scope:f,callback:f.setHash,args:arguments,queue:t}),!1):(f.busy(!0),n=f.extractState(e,!0),n&&!f.emulated.pushState?f.pushState(n.data,n.title,n.url,!1):f.getHash()!==e&&(f.bugs.setHash?(o=f.getPageUrl(),f.pushState(null,null,o+"#"+e,!1)):r.location.hash=e),f)},f.escapeHash=function(t){var n=f.normalizeHash(t);return n=e.encodeURIComponent(n),f.bugs.hashEscape||(n=n.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),n},f.getHashByUrl=function(e){var t=String(e).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return t=f.unescapeHash(t)},f.setTitle=function(e){var t,n=e.title;n||(t=f.getStateByIndex(0))&&t.url===e.url&&(n=t.title||f.options.initialTitle);try{r.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return r.title=n,f},f.queues=[],f.busy=function(e){if(void 0!==e?f.busy.flag=e:void 0===f.busy.flag&&(f.busy.flag=!1),!f.busy.flag){s(f.busy.timeout);var t=function e(){var t,n,r;if(!f.busy.flag)for(t=f.queues.length-1;t>=0;--t)n=f.queues[t],0!==n.length&&(r=n.shift(),f.fireQueueItem(r),f.busy.timeout=a(e,f.options.busyDelay))};f.busy.timeout=a(t,f.options.busyDelay)}return f.busy.flag},f.busy.flag=!1,f.fireQueueItem=function(e){return e.callback.apply(e.scope||f,e.args||[])},f.pushQueue=function(e){return f.queues[e.queue||0]=f.queues[e.queue||0]||[],f.queues[e.queue||0].push(e),f},f.queue=function(e,t){return"function"==typeof e&&(e={callback:e}),void 0!==t&&(e.queue=t),f.busy()?f.pushQueue(e):f.fireQueueItem(e),f},f.clearQueue=function(){return f.busy.flag=!1,f.queues=[],f},f.stateChanged=!1,f.doubleChecker=!1,f.doubleCheckComplete=function(){return f.stateChanged=!0,f.doubleCheckClear(),f},f.doubleCheckClear=function(){return f.doubleChecker&&(s(f.doubleChecker),f.doubleChecker=!1),f},f.doubleCheck=function(e){return f.stateChanged=!1,f.doubleCheckClear(),f.bugs.ieDoubleCheck&&(f.doubleChecker=a(function(){return f.doubleCheckClear(),f.stateChanged||e(),!0},f.options.doubleCheckInterval)),f},f.safariStatePoll=function(){var t,n=f.extractState(f.getLocationHref());if(!f.isLastSavedState(n))return t=n,t||(t=f.createStateObject()),f.Adapter.trigger(e,"popstate"),f},f.back=function(e){return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.back,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.back(!1)}),h.go(-1),!0)},f.forward=function(e){return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.forward,args:arguments,queue:e}),!1):(f.busy(!0),f.doubleCheck(function(){f.forward(!1)}),h.go(1),!0)},f.go=function(e,t){var n;if(e>0)for(n=1;n<=e;++n)f.forward(t);else{if(!(e<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=e;--n)f.back(t)}return f},f.emulated.pushState){var p=function(){};f.pushState=f.pushState||p,f.replaceState=f.replaceState||p}else f.onPopState=function(t,n){var r,o,i=!1,a=!1;return f.doubleCheckComplete(),(r=f.getHash())?(o=f.extractState(r||f.getLocationHref(),!0),o?f.replaceState(o.data,o.title,o.url,!1):(f.Adapter.trigger(e,"anchorchange"),f.busy(!1)),f.expectedStateId=!1,!1):(i=f.Adapter.extractEventData("state",t,n)||!1,a=i?f.getStateById(i):f.expectedStateId?f.getStateById(f.expectedStateId):f.extractState(f.getLocationHref()),a||(a=f.createStateObject(null,null,f.getLocationHref())),f.expectedStateId=!1,f.isLastSavedState(a)?(f.busy(!1),!1):(f.storeState(a),f.saveState(a),f.setTitle(a),f.Adapter.trigger(e,"statechange"),f.busy(!1),!0))},f.Adapter.bind(e,"popstate",f.onPopState),f.pushState=function(t,n,r,o){if(f.getHashByUrl(r)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==o&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:o}),!1;f.busy(!0);var i=f.createStateObject(t,n,r);return f.isLastSavedState(i)?f.busy(!1):(f.storeState(i),f.expectedStateId=i.id,h.pushState(i.id,i.title,i.url),f.Adapter.trigger(e,"popstate")),!0},f.replaceState=function(t,n,r,o){if(f.getHashByUrl(r)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==o&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:o}),!1;f.busy(!0);var i=f.createStateObject(t,n,r);return f.isLastSavedState(i)?f.busy(!1):(f.storeState(i),f.expectedStateId=i.id,h.replaceState(i.id,i.title,i.url),f.Adapter.trigger(e,"popstate")),!0};if(i){try{f.store=u.parse(i.getItem("History.store"))||{}}catch(e){f.store={}}f.normalizeStore()}else f.store={},f.normalizeStore();f.Adapter.bind(e,"unload",f.clearAllIntervals),f.saveState(f.storeState(f.extractState(f.getLocationHref(),!0))),i&&(f.onUnload=function(){var e,t,n;try{e=u.parse(i.getItem("History.store"))||{}}catch(t){e={}}e.idToState=e.idToState||{},e.urlToId=e.urlToId||{},e.stateToId=e.stateToId||{};for(t in f.idToState)f.idToState.hasOwnProperty(t)&&(e.idToState[t]=f.idToState[t]);for(t in f.urlToId)f.urlToId.hasOwnProperty(t)&&(e.urlToId[t]=f.urlToId[t]);for(t in f.stateToId)f.stateToId.hasOwnProperty(t)&&(e.stateToId[t]=f.stateToId[t]);f.store=e,f.normalizeStore(),n=u.stringify(e);try{i.setItem("History.store",n)}catch(e){if(e.code!==DOMException.QUOTA_EXCEEDED_ERR)throw e;i.length&&(i.removeItem("History.store"),i.setItem("History.store",n))}},f.intervalList.push(l(f.onUnload,f.options.storeInterval)),f.Adapter.bind(e,"beforeunload",f.onUnload),f.Adapter.bind(e,"unload",f.onUnload)),f.emulated.pushState||(f.bugs.safariPoll&&f.intervalList.push(l(f.safariStatePoll,f.options.safariPollInterval)),"Apple Computer, Inc."!==o.vendor&&"Mozilla"!==(o.appCodeName||"")||(f.Adapter.bind(e,"hashchange",function(){f.Adapter.trigger(e,"popstate")}),f.getHash()&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(e,"hashchange")})))},f.options&&f.options.delayInit||f.init()}(window),function(){function e(){var e,t=location.search.slice(1).split("&"),n=t.length,r={},o=0;if(t[o].length)for(o=0;o<n;o++)e=t[o].split("="),r[e[0]]=decodeURIComponent(e[1]||"");return r}function t(t,n){if(t){var r,o,i,a=History.getState(),s=e(),l="",c={},u={};for(r in n)n.hasOwnProperty(r)&&(o=n[r],i=t+"."+r,s[i]=o);for(r in s)s.hasOwnProperty(r)&&(""!==l&&(l+="&"),l+=r+"="+s[r],
c[r]=s[r]);return u.id=t,u.data=c,u.tab="csm",u.isCsm=!0,a||(a={title:"csm"}),History.replaceState(u,a.title,window.location.href.split("?",1).join("")+"?"+l),l}}function n(){window.acom&&window.acom.bus?(window.acom.bus.on("csm::component::statechange",function(e){var n,r,o;e.component&&(r=e.component.closest(".csm-component"))&&(o=r.data("csmcomponentid"))&&(n=o),n&&t(n,e.data)}),History.Adapter.bind(window,"statechange",function(){var e,t,n=History.getState(),r={};if(window.acom&&window.acom.bus&&n&&n.data&&n.data.isCsm){if(n.data.id){e=n.data.id;for(t in n.data.data)n.data.data.hasOwnProperty(t)&&(0===t.indexOf(e+".")?r[t.replace(e+".","")]=n.data.data[t]:r[t]=n.data.data[t])}window.acom.bus.emit("csm::history::statechange",r)}})):(r<5&&setTimeout(n,1e3),r+=1)}var r=0;!0!==window.csmLoaded&&(window.csmLoaded=!0,n())}(),function(e){function t(){function t(e,t,n,r,o){if(void 0!==e||void 0!==t){var i=document.createElement("div");switch(i.innerHTML=e,i.classList.add("alert"),t&&i.insertAdjacentHTML("afterbegin",'<h4 class="alertTitle">'.concat(t,"</h4>")),n){case"success":i.classList.add("alertSuccess");break;case"failure":break;default:i.classList.add("alertInfo")}r&&i.classList.add("alertNoIcon"),setTimeout(function(){ui&&ui.alert?ui.alert(i,{display:"notification",duration:5e3}):jQuery&&jQuery(i).alert({display:"notification",duration:5e3})},o||200)}}e&&!e.listeners("*::Notify::*").length&&(e.on("*::Notify::Success",function(e,n,r,o){t(e,n,"success",r,o)}),e.on("*::Notify::Failure",function(e,n,r,o){t(e,n,"failure",r,o)}),e.on("*::Notify::Info",function(e,n,r,o){t(e,n,"alert",r,o)}))}function n(){if(l.enableIpns){u+=1,window["glueDoNotify".concat(u)]=function(t){var n=t;if(n&&n.length>0){var o=!0;"function"==typeof l.handler&&(o=l.handler(n)),o&&r(n,function(t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e.emit("Interpage::Notify::".concat(r.type),r.message,r.title,r.noIcon)}})}};var t=document.createElement("script");t.src="".concat(l.ipnsUrl).concat(l.ipnsUrl.indexOf("?")>=0?"&":"?","_=").concat(Date.now(),"&callback=glueDoNotify").concat(u),t.onload=function(){return t.remove()},document.getElementsByTagName("body")[0].insertAdjacentElement("beforeend",t)}}function r(e,t){if(void 0!==t){var n=[];Object.keys(e).forEach(function(t){var r=e[t];if(r&&r.data&&r.data.useTemplate&&l.cmsUrlBase){d+=1;var s,c,u=new Promise(function(e,t){s=e,c=t});n.push(u),window["glueRenderTemplates".concat(d)]=function(e){var t=e;if(t&&t[0]&&t[0].Views&&t[0].Views[0]){var n=t[0].Views[0].Content;if("undefined"!=typeof ancestry&&void 0!==ancestry.pub){i(r.data).then(function(){r.title="",r.message=a(n,r.data),s()})}else console.log("The PUB library was not found. PUB is a dependency of notify, please include it on the page!")}else c()};var f=document.createElement("script");f.src="".concat(l.cmsUrlBase,"/cs/spots2/").concat(o(r),"?callback=glueRenderTemplates").concat(d),f.onload=function(){return f.remove()},document.getElementsByTagName("body")[0].insertAdjacentElement("beforeend",f)}}),Promise.all(n).then(function(){t(e)}).catch(function(){console.log("renderTemplates finished with errors"),t(e)})}}function o(e){return e&&e.data?"GT".concat(e.type).concat(e.action.replace(":","")):""}function i(e){var t,n=[],r=new Promise(function(r){t=r,Object.keys(e).forEach(function(t){var o=e[t];if("object"===_typeof(o)){if(!0===o.usePub){var a=o.pubDestPageName,s=o.pubDestInputs;void 0!==a&&void 0!==s&&ancestry.pub.buildUrl().toGoTo(a,s).withoutHistory().build(function(e,t){e||(o.url=t),r()})}n.push(i(o))}})});return Promise.all(n).then(function(){return t()}),r}function a(e,t,n){for(var r in t)if(r&&t.hasOwnProperty(r)){var o=r,i=t[r];n&&""!==n&&(o="".concat(n,".").concat(o)),e="object"===_typeof(i)?a(e,i,o):e.replace(new RegExp("{{".concat(o,"}}"),"gi"),i)}return void 0===n&&(e=e.replace(new RegExp("{{","g"),"").replace(new RegExp("}}","g"),"")),e}function s(e){c=setTimeout(function(){n(),s(e)},e)}var l,c=-1,u=0,d=0;window.notify=function(e){var r;void 0===e||void 0===e.action||"init"===e.action?function(){l=e,t(),n()}():"startPolling"===e.action?(r=void 0!==e.waitTime?e.waitTime:5e3,r<5e3&&(r=5e3),s(r)):"stopPolling"===e.action?-1!==c&&(clearTimeout(c),c=-1):"checkNow"===e.action&&n()}}(window.acom.bus);
//# sourceMappingURL=glue-bundle.js.map
