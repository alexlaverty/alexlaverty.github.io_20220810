!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("ui")):"function"==typeof define&&define.amd?define(["ui"],t):"object"==typeof exports?exports.guidance=t(require("ui")):(e.ui=e.ui||{},e.ui.guidance=t(e.ui))}(window,function(n){return s={},i.m=o=[function(e,t){e.exports=n},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(9),s=(o=i)&&o.__esModule?o:{default:o};t.default=s.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},o=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var s,u=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,o)}if("value"in i)return i.value;var r=i.get;return void 0!==r?r.call(o):void 0},f=n(0),m=(s=f)&&s.__esModule?s:{default:s};function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(10);var Guidance=function(){function Guidance(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Guidance);var n=r(this,(Guidance.__proto__||Object.getPrototypeOf(Guidance)).call(this,e));if(!t||!t.steps||0===t.steps.length)return m.default.warn("An array of steps must be passed in and there must at least be one step"),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"destroy",n).call(n),r(n);Guidance.close(),n.config=c({},Guidance.defaults,t),n.isOpen=!0,u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"executeCallback",n).call(n,n.config.onOpen),n._addEvents();var o=n.config.start;return o>n.config.steps.length?o=n.config.steps.length-1:o<0&&(o=0),n.goToStep(o),n.recentOrientationChange=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Guidance,f.Base),o(Guidance,null,[{key:"isOpen",value:function(){return f.Base.hasOpenInstance(Guidance.name)}},{key:"close",value:function(){f.Base.runMethodOnActiveInstances("destroy",Guidance.name)}},{key:"validateConfig",value:function(e){var t=f.Base.typeCheck,n={bullets:[t.boolean(),t.string()],classes:t.string(),hidePointer:t.boolean(),onClose:t.fn(),onOpen:t.fn(),start:t.number(),steps:t.instanceof(Array),type:t.string(["guidance"])},o=["steps"];t.execute(Guidance.name,{expected:n,actual:e,required:o}),n={backDelay:t.number(),classes:t.string(),content:[t.string(),t.instanceof(window.Node)],delay:t.number(),heading:t.string(),hidePointer:t.boolean(),makeInteractable:t.boolean(),onAfterOpen:t.fn(),onClose:t.fn(),onOpen:t.fn(),position:t.string(["top","right","bottom","left"]),pulse:[t.boolean(),t.string()],scroll:t.boolean(),selector:t.string(),spotlight:[t.boolean(),t.string()],topOffset:t.number()},o=["content"],e.steps.forEach(function(e){t.execute(Guidance.name,{expected:n,actual:e,required:o})})}}]),o(Guidance,[{key:"_addEvents",value:function(){var n=this;this._events.window=this.addEventListeners(window,{orientationchange:function(){n.recentOrientationChange=!0,setTimeout(function(){n.recentOrientationChange=!1},250)},resize:m.default.throttle(function(){n.isOpen&&(!m.default.isTouchDevice||m.default.isTouchDevice&&n.recentOrientationChange)&&n.goToStep(n.currentStep)},50),keydown:function(e){e.which===m.default.keyCodes.tab&&n._handleTabPress(e)},keyup:function(e){e.which===m.default.keyCodes.esc&&n.destroy(!0)}}),this._events.body=this.addEventListeners(document.body,{click:function(e){e.target.closest(".guidanceHighlight.spotlight")&&(e.stopImmediatePropagation(),n.callout.wrapElement.classList.add("animateDisabled"),n.spotlightAnimationTimeout=setTimeout(function(){return n.callout.wrapElement.classList.remove("animateDisabled")},190))},"guidance-scrolled-to":function(e,t){"top"===n.stepSettings().position&&n.reposition(),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"executeCallback",n).call(n,t),n._stepOpened()}}),1===this.config.steps.length&&(this._events.document=this.addEventListeners(document.documentElement,{click:function(e){!n.callout||n.callout.wrapElement.contains(e.target)||n.element.contains(e.target)||n.destroy()}}))}},{key:"_addRemoveScrollEvents",value:function(e){var t=this;this._events.scrollingStep&&this.removeEventListeners(this._events.scrollingStep);var n=!!e&&document.querySelector(e.selector);(n=!!n&&n.closest(".calloutScrollPane"))&&(this._events.scrollingStep=this.addEventListeners(n,{scroll:m.default.debounce(function(){return t.reposition()},200)}))}},{key:"_createContent",value:function(e){var t=Guidance.langSets,n=e.heading||"&nbsp;",o=e.assistiveText||"&nbsp;",i=e.content;if(i instanceof window.Node){var s=document.createElement("div"),r=document.createElement("div");m.default.setAttributes(r,{class:"hideVisually"});var l=document.createElement("button");m.default.setAttributes(l,{"aria-label":f.Base.localize(t,"close"),class:"guidanceCloseBtn ancBtnIconOnly icon iconClose"});var a=document.createElement("h4");a.className="guidanceHeader",a.innerText=n;var c,u,p,d,h=document.createElement("div");return h.className="guidanceContent",h.insertAdjacentElement("beforeend",i),s.append(r),s.append(a),s.append(h),1<this.config.steps.length&&(c=void 0,u=document.createElement("button"),0!==this.currentStep&&(c=document.createElement("button"),m.default.setAttributes(c,{class:"ancBtn silver ancBtnIconOnly guidanceControlPrevious icon iconArrowLeft"}),c.innerText=f.Base.localize(t,"previous")),this.currentStep!==this.config.steps.length-1?(m.default.setAttributes(u,{class:"ancBtn guidanceControlNext iconAfter iconArrowRightAfter"}),u.innerText=f.Base.localize(t,"next")):(m.default.setAttributes(u,{class:"ancBtn guidanceControlDone"}),u.innerText=f.Base.localize(t,"done")),p=document.createElement("div"),m.default.setAttributes(p,{class:"guidanceControls clear"}),c&&p.append(c),p.append(u),(d=document.createElement("ol")).className="guidanceProgress",d.innerHTML=this._createProgressBullets(),p.append(d),s.append(p)),s}var g='<div class="hideVisually">'+o+'</div>\n\t\t\t<button aria-label="'+f.Base.localize(t,"close")+'" class="guidanceCloseBtn ancBtnIconOnly icon iconClose" type="button"></button>\n\t\t\t<h4 class="guidanceHeader">'+n+'</h4>\n\t\t\t<div class="guidanceContent">'+i+"</div>";return 1<this.config.steps.length&&(g+='<div class="guidanceControls clear">\n\t\t\t\t'+(0!==this.currentStep?'<button class="ancBtn silver ancBtnIconOnly guidanceControlPrevious icon iconArrowLeft" type="button">'+f.Base.localize(t,"previous")+"</button>":"")+(this.currentStep!==this.config.steps.length-1?'<button class="ancBtn guidanceControlNext iconAfter iconArrowRightAfter" type="button">'+f.Base.localize(t,"next")+"</button>":'<button class="ancBtn guidanceControlDone" type="button">'+f.Base.localize(t,"done")+"</button>")+'\n\t\t\t\t<ol class="guidanceProgress">\n\t\t\t\t\t'+this._createProgressBullets()+"\n\t\t\t\t</ol>\n\t\t\t</div>"),g}},{key:"_createHighlight",value:function(e,t){var n,o,i=document.getElementsByClassName("guidanceHighlight spotlight")[0],s=!0===e?document.querySelector(this.currentStepSettings.selector):document.querySelector(e),r=s.getBoundingClientRect(),l={borderRadius:window.getComputedStyle(s).getPropertyValue("border-radius"),height:s.offsetHeight+"px",left:r.left+Math.max(document.body.scrollLeft,document.documentElement.scrollLeft)+"px",top:r.top+Math.max(document.body.scrollTop,document.documentElement.scrollTop)+"px",width:s.offsetWidth+"px"},a="spotlight"===t;a&&i?c(i.style,l):(n=t,a&&this.callout.wrapElement.classList.contains("noTransition")&&(n+=" noTransition"),(o=document.createElement("div")).setAttribute("class","guidanceHighlight "+n),c(o.style,l),document.body.insertAdjacentElement("beforeend",o))}},{key:"_createProgressBullets",value:function(){if(!this.config.bullets)return"";for(var e=Guidance.langSets,t="",n=0;n<this.config.steps.length;n++){var o=n===this.currentStep;t+='<li class="guidanceProgressIndicator"><button class="'+(o?"guidanceProgressCurrent":"")+'" data-guidance-progress="'+n+'"'+("disabled"===this.config.bullets?" disabled":"")+' type="button">\n\t\t\t\t<span class="hideVisually">'+(f.Base.localize(e,"step")+" "+(n+1)+(o?". "+f.Base.localize(e,"currentStep")+".":""))+"</span>\n\t\t\t</button></li>"}return t}},{key:"_createStepCallout",value:function(e){var n=this;this.callout&&this._destroyStepCallout();var o=this.config,t=document.querySelector(e.selector),i={classes:e.classes+" "+o.classes,content:this._createContent(e),hidePointer:e.hidePointer||o.hidePointer,spotlight:void 0===e.spotlight||e.spotlight,onClose:void 0,onOpen:void 0,position:e.position,steps:void 0},s=c({},o,i);this.callout=(0,f.callout)(t,s),this.callout.wrapElement.style.opacity="0",this.callout.wrapElement.classList.add("animateFade"),this._events.wrapElement=this.addEventListeners(this.callout.wrapElement,{click:function(e){if(e.target.closest(".guidanceControlPrevious"))return n.previous();if(e.target.closest(".guidanceControlNext"))return n.next();if(e.target.closest(".guidanceControlDone"))return n.destroy();if(e.target.closest(".guidanceCloseBtn"))return n.destroy(!0);var t=e.target.closest("[data-guidance-progress]");t&&"disabled"!==o.bullets&&n.goToStep(t.getAttribute("data-guidance-progress"))}}),this.callout.open()}},{key:"destroy",value:function(e){var t=0<arguments.length&&void 0!==e&&e;this._removeInteractable(this.currentStepSettings),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"executeCallback",this).call(this,this.currentStepSettings.onClose),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"executeCallback",this).call(this,this.config.onClose),clearTimeout(this.scrollAnimationTimeout),this.scrollAnimationTimeout=null;var n=document.getElementsByClassName("guidanceForceInteraction")[0];n&&n.classList.remove("guidanceForceInteraction"),clearTimeout(this.spotlightAnimationTimeout),this.spotlightAnimationTimeout=null,this.isOpen=!1,this.destroyHighlight(!0),this._destroyStepCallout(),t||this.element.focus(),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"destroy",this).call(this)}},{key:"destroyHighlight",value:function(e){document.querySelectorAll(".guidanceHighlight"+(e?"":".pulse")).forEach(function(e){e.remove()})}},{key:"_destroyStepCallout",value:function(){this.callout&&(this.callout.wrapElement.classList.remove("animateDisabled","animateFade","animateFadeActive"),this.removeEventListeners(this._events.wrapElement),this.callout.destroy(),this.callout=null)}},{key:"getCurrentStepIndex",value:function(){return this.currentStep}},{key:"getGuidanceCallout",value:function(){return this.callout}},{key:"goToStep",value:function(e,t){var n=this,o=Math.floor(e),i=this.currentStep,s=this.config.steps[i];s&&(this._removeInteractable(s),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"executeCallback",this).call(this,s.onClose,{element:this.element,oldIndex:i,newIndex:o})),this.currentStep=o;var r='[data-ui-id="'+this.id+'"]',l=c({},Guidance.stepDefaults,{selector:r},this.config.steps[o]);this.currentStepSettings=l,this._addRemoveScrollEvents(l),this.destroyHighlight(),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"executeCallback",this).call(this,l.onOpen,{element:this.element,oldIndex:i,newIndex:o}),this._updateElementAttributes();var a=o<i&&l.backDelay?l.backDelay:l.delay;this.scrollAnimationTimeout=setTimeout(function(){n._createStepCallout(l),n._highlightTarget(),n._scrollToGuidance(l,function(){n._updateElementAttributes(!0),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"executeCallback",n).call(n,l.onAfterOpen,{element:n.element,oldIndex:i,newIndex:o}),u(Guidance.prototype.__proto__||Object.getPrototypeOf(Guidance.prototype),"executeCallback",n).call(n,t,{element:n.element,oldIndex:i,newIndex:o}),n.reposition()}),n.element.dispatchEvent(new CustomEvent("guidance-content-created",{bubbles:!0,cancelable:!0}))},a)}},{key:"_handleTabPress",value:function(e){var t=document.activeElement,n=t.getAttribute("name"),o="radio"===t.getAttribute("type"),i=t===this.callout.contentElement,s=m.default.getTabbableElements(this.callout.contentElement),r=0===s.length,l=s[0],a=s[s.length-1],c=t===l||o&&n===l.getAttribute("name"),u=t===a||o&&n===a.getAttribute("name"),p=e.shiftKey&&(i||c),d=!e.shiftKey&&u;p&&a.focus(),d&&l.focus(),r&&this.destroy(!0)}},{key:"_highlightTarget",value:function(){this.destroyHighlight();var e=this.currentStepSettings;e.pulse&&e.pulse!==e.spotlight&&this._createHighlight(e.pulse,document.querySelector(".bgDark "+e.pulse)&&!document.querySelector(".bgDark .bgLight "+e.pulse)?"pulse bgDark":"pulse"),e.spotlight&&this._createHighlight(e.spotlight,"spotlight")}},{key:"next",value:function(){var e=this.currentStep+1;return e<this.config.steps.length?this.goToStep(e):m.default.warn("There is no next step")}},{key:"previous",value:function(){var e=this.currentStep-1;return-1!=e?this.goToStep(e):m.default.warn("There is no previous step")}},{key:"_removeInteractable",value:function(e){var t,n;e&&e.makeInteractable&&(t="boolean"==typeof e.spotlight?e.selector:e.spotlight,(n=document.querySelector(t))&&n.classList.remove("guidanceForceInteraction"))}},{key:"reposition",value:function(){this.callout.reposition(),this._highlightTarget(),document.querySelector(this.currentStepSettings.selector).classList.remove("hover","active")}},{key:"_scrollToGuidance",value:function(e,t){var n,o,i,s=this;!1!==e.scroll?(n=e.topOffset,"top"===e.position&&"bottom"===this.callout.position&&(n-=this.callout.wrapElement.offsetHeight),o=this.callout.wrapElement.getBoundingClientRect().top+Math.max(document.body.scrollTop,document.documentElement.scrollTop)+n,i=this.callout.wrapElement.classList.contains("noTransition")?0:800,m.default.smoothScroll(document.body,o,i),m.default.smoothScroll(document.documentElement,o,i,"scrollTop",function(){s.callout.contentElement&&s.callout.contentElement.focus()}),setTimeout(function(){t(),s.element.dispatchEvent(new CustomEvent("guidance-scrolled-to",{bubbles:!0,cancelable:!0}))},i)):(this.callout.contentElement&&this.callout.contentElement.focus(),t(),this._stepOpened())}},{key:"_stepOpened",value:function(){this.element.dispatchEvent(new CustomEvent("guidance-step-opened",{bubbles:!0,cancelable:!0}))}},{key:"stepSettings",value:function(){return this.currentStepSettings}},{key:"_updateElementAttributes",value:function(e){this.callout&&(e?(this.callout.wrapElement.classList.add("animateFadeActive"),this.callout.wrapElement.setAttribute("role","alertdialog"),this.callout.wrapElement.focus()):(this.callout.wrapElement.classList.remove("animateFadeActive"),this.callout.wrapElement.removeAttribute("role")));var t,n=this.currentStepSettings.spotlight;this.currentStepSettings.makeInteractable&&n&&(t="boolean"==typeof n?this.currentStepSettings.selector:n,document.querySelector(t).classList.add("guidanceForceInteraction"))}}]),Guidance}();Guidance.defaults={bullets:!0,classes:"",hidePointer:!1,onClose:void 0,onOpen:void 0,start:0,steps:[],type:"guidance"},Guidance.stepDefaults={backDelay:0,classes:"",content:"",delay:100,heading:"",hidePointer:!1,makeInteractable:!1,onAfterOpen:void 0,onClose:void 0,onOpen:void 0,position:"bottom",pulse:!1,scroll:!0,selector:"",spotlight:!0,topOffset:-100},Guidance.langSets={de:{close:"Schließen",currentStep:"Aktueller Schritt",done:"Fertig",next:"Weiter",previous:"Zurück",step:"Schritt"},en:{close:"Close",currentStep:"Current Step",done:"Done",next:"Next",previous:"Previous",step:"Step"},es:{close:"Cerrar",currentStep:"Paso actual",done:"Listo",next:"Siguiente",previous:"Anterior",step:"Paso"},fr:{close:"Fermer",currentStep:"Étape actuelle",done:"Terminé",next:"Suivant",previous:"Précédent",step:"Étape"},it:{close:"Chiudi",currentStep:"Passaggio corrente",done:"Fine",next:"Avanti",previous:"Indietro",step:"Passaggio"},sv:{close:"Stäng",currentStep:"Aktuellt steg",done:"Klart",next:"Nästa",previous:"Föregående",step:"Steg"}},t.default=f.Base.init()(Guidance)},function(e,t,n){}],i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=8).default;function i(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return o[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var o,s});