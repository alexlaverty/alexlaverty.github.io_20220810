function getPersonAjaxUrlPrefix(){"use strict";return"www.ancestry"===window.location.hostname.substring(0,12)?"/family-tree/person":""}function updateHintCount(e){"use strict";if(!isNaN(e)){var n=e;n<=0?$("#tabHintCount").remove():(n>99&&(n="99+"),$("#tabHintCount").length>=1?$("#tabHintCount").text(n):$("#tabHints").append('<span class="badge badgeColor1" id="tabHintCount">'+n+"</span>"),window.personTabsInstance.resize())}}function getTabData(e){"use strict";var n={};switch(e){case"story":case"tabStory":n.tabId="tabStory",n.contentId="tabContentStory",n.url=getPersonAjaxUrlPrefix()+window.PersonCard.URL.story,n.domId="personPageStory",n.key="story",n.queryValue="story",n.events={},n.tab=e;break;case"facts":case"tabFacts":n.tabId="tabFacts",n.contentId="tabContentFacts",n.url=getPersonAjaxUrlPrefix()+window.PersonCard.URL.facts,n.domId="personPageFacts",n.key="facts",n.queryValue="facts",n.events={},n.tab=e;break;case"gallery":case"tabGallery":n.tabId="tabGallery",n.contentId="tabContentGallery",n.url=window.PersonCard.loadHintsAndMediaFromUIServers?window.PersonCard.URL.gallery:getPersonAjaxUrlPrefix()+window.PersonCard.URL.gallery,n.domId="personPageGallery",n.key="gallery",n.queryValue="gallery",n.events={},n.tab=e;break;case"hints":case"tabHints":n.tabId="tabHints",n.contentId="tabContentHints",n.url=window.PersonCard.loadHintsAndMediaFromUIServers?window.PersonCard.URL.hints:getPersonAjaxUrlPrefix()+window.PersonCard.URL.hints,n.domId="personPageHints",n.key="hints",n.queryValue="hints",n.events={"PersonHintTab::hintcount_change::pending":function(e){updateHintCount(e)}},n.tab=e}return n}function htmlDecode(e){"use strict";var n=document.createElement("div");return n.innerHTML=e.replace(/<\/?[^>]+>/gi,""),n.childNodes[0]?n.childNodes[0].nodeValue:""}function getTabNameStringForPageTitle(e){"use strict";switch(e){case"story":return window.PersonCard.text.lifeStoryTabName;case"facts":return window.PersonCard.text.factsTabName;case"gallery":return window.PersonCard.text.galleryTabName;case"hints":return window.PersonCard.text.hintsTabName}}function UpdateURL(e,n){"use strict";if(void 0!==window.PersonCard){var o=e.url.split("?",2),t="/"+window.PersonCard.tabName.toLowerCase();o[0].toLowerCase().endsWith(t)||(o[0]+=t);var r=o.join("?");n&&n.events&&window.acom&&window.acom.bus&&Object.keys(n.events).forEach(function(e){window.acom.bus.on(e,n.events[e])}),History.replaceState(n,htmlDecode(window.PersonCard.name)+" - "+getTabNameStringForPageTitle(window.PersonCard.tabName),r)}}function loadScripts(e,n){"use strict";var o=e.slice();if(0===o.length)n&&n();else{var t=o.splice(0,1)[0];$.cachedScript(t,{success:function(){loadScripts(o,n)}})}}function showNotesInPersonCard(){"use strict";""!==$(".workspaceNotes textarea").text()?$("#notesSpan").html('<button aria-controls="WorkspaceComponent" aria-expanded="'+$html.hasClass("sidebarOpen")+'" class="link icon iconNoteAlt myNotesBtn notPrintable" type="button"><span class="hideVisually">'+window.PersonCard.text.viewNotes+"</span></button>"):$("#notesSpan").empty();var e=document.createEvent("Event");e.initEvent("personcard.updated",!0,!0),document.body.dispatchEvent(e)}function loadCommentCount(){"use strict";var e=new XMLHttpRequest,n="/comments/handleUICounts?objectTypeId=13&objectId="+window.PersonCard.treeId+"%3A"+window.PersonCard.personId;e.open("GET",n,!0),e.onload=function(){if(e.status&&e.status>=200&&e.status<400){$("#commentsSpan").empty(),$(".commentsBadge").remove();var n=JSON.parse(e.response);if(void 0!==n&&void 0!==n.Counts&&n.Counts.length>0)if(n.Counts[0].Count){var o='<span class="badge badgeColor1 commentsBadge">'+(n.Counts[0].Count>99?"99+":n.Counts[0].Count)+"</span>",t='<button aria-controls="WorkspaceComponent" aria-expanded="'+$html.hasClass("sidebarOpen")+'" class="link icon iconMessageBoard personCommentsBtn notPrintable" type="button"><span class="hideVisually">'+window.PersonCard.text.viewComments+"</span>"+o+"</button>";$(".personCommentsBtn").append(o),$("#commentsSpan").html(t),$html.addClass("pFHasComments")}else $html.removeClass("pFHasComments pFShowingComments");var r=document.createEvent("Event");r.initEvent("personcard.updated",!0,!0),document.body.dispatchEvent(r)}else window.ui.error("Failure to load comment count.")},e.onerror=function(){window.ui.error("Failure to load comment count.")},e.send()}function updateWorkspaceHTMLClasses(e){"use strict";function n(){document.querySelector(".commentsBadge")?document.documentElement.classList.add("pFHasComments"):document.documentElement.classList.remove("pFHasComments")}function o(){n();var e=document.getElementById("printFriendlyComments");e.innerHTML="";var o,t=document.querySelector(".workspaceComments"),r=t.cloneNode(!0),a=r.querySelectorAll(".comment:not(.addComment):not(.signIn)");if(a.length){var i,s,d,c,l,u="<ul>";for(o=0;o<a.length;o+=1)i=a[o],i.querySelector(".userCardContent")&&(d=i.querySelector(".userCardName").innerText,c=i.querySelector(".userCardName + span").innerText,s=document.createElement("div"),s.appendChild(document.createTextNode(c)),c=s.innerHTML,l=i.querySelector(".userCardInfo small > span:first-child").innerText,u+="<li"+(o>0?' class="topSpacing"':"")+'><div class="userCard userCardSize2 printFriendlyUserCard"><div class="userCardImg icon iconPerson"></div><div class="userCardContent"><p class="userCardComment" style="white-space:pre-line;"><strong>'+d+"</strong> "+c+'</p><div class="userCardInfo noTopSpacing"><small>'+l+"</small></div></div></div></li>");u+="</ul>"}e.innerHTML=u}if($html.removeClass("pFShowingTags pFShowingNotes pFShowingComments"),$html.hasClass("sidebarOpen")&&(0===e?$html.addClass("pFShowingTags"):1===e?$html.addClass("pFShowingNotes"):2===e&&$html.addClass("pFShowingComments")),window.workspaceView&&window.workspaceView.refWorkspaceContent){var t=window.workspaceView.refWorkspaceContent.refWorkspaceTags;if(t&&t.current&&t.current.state&&t.current.state.selected&&t.current.state.selected.length){$html.addClass("pFHasTags"),$("#printFriendlyTags").empty();var r="<ul>";t.current.state.selected.forEach(function(e){r+='<li><span class="ancBtn ancBtnRnd sml outline printFriendlyBtn"><small class="textClipped">'+e+"</small></span></li>"}),r=r+="</ul>",$("#printFriendlyTags").html(r)}else $html.removeClass("pFHasTags");if(window.workspaceView.refWorkspaceContent.refWorkspaceNotes.current){var a=document.createElement("div"),i=window.workspaceView.refWorkspaceContent.refWorkspaceNotes.current.state.value;a.appendChild(document.createTextNode(i)),i.length?($html.addClass("pFHasNotes"),$("#printFriendlyNotes").empty(),$("#printFriendlyNotes").html(a.innerHTML)):$html.removeClass("pFHasNotes")}$html.hasClass("printFriendly")?window.workspaceView.refWorkspaceContent.state.showingComments?o():(window.workspaceView.refWorkspaceContent.setState({showingComments:!0}),setTimeout(function(){o()},2500)):n()}}function clearPrintFriendly(){"use strict";$html.removeClass("printFriendly pFNoFacts pFNoFamily pFNoSources pFHidingMiniTree pFHidingMap"),setTimeout(function(){$html.removeClass("pFNoTransitions")},100)}function responsiveChecks(e){"use strict";function n(){o&&beforeBelay(!1),t&&checkMiniProfile()}var o=window.beforeBelay&&$(".active .ropebag .svg").length>0,t="function"==typeof window.checkMiniProfile;if(o||t)if(e){var r=0;responsiveChecksInterval=setInterval(function(){n(),50===(r+=1)&&(r=0,clearInterval(responsiveChecksInterval))},15)}else n()}function afterPrint(){"use strict";printView=!1,document.title=documentTitle,$html.hasClass("sidebarOpened")&&$html.addClass("sidebarOpen"),$(".pageHeader:not('.bgColor8')").addClass("bgDark"),$html.hasClass("printFriendly")&&($(".pageHeader").hasClass("pageHeaderStory")&&($(".lifeStoryFamily").removeClass("noDisplay"),$(".lifeStoryMap").removeClass("noDisplay")),clearPrintFriendly()),$(".pageHeader").hasClass("pageHeaderFacts")&&($(".factsSectionFamily").insertAfter($(".factsSectionSources")),$("#factsDivisionPrint").remove(),window.workspaceView&&window.updateWorkspaceHTMLClasses(window.workspaceView.refWorkspaceContent.state.activeTab)),$(".printFriendlyViewTriggered").length>0&&$(".printFriendlyViewTriggered").removeClass("printFriendlyViewTriggered").focus(),responsiveChecks()}function personTypeAheadNameField(e,n,o,t,r){"use strict";var a=void 0!==t&&null!==t&&t.length>0;window.PersonCard.treeId;void 0!==o&&null!==o&&o.length>0&&o.attr("disabled","disabled");var i=window.PersonCard.autoCompletePersonUrl.replace("{excludePids}",n);ui.autocomplete(e,{after:r,alwaysOpenOnFocus:!0,source:i,searchKey:"name",queryParameter:"term",dataType:"json",minLength:3,maxResults:20,customDisplay:function(e){e=e.data;var n=e.display;return""===e.raw.birth&&""===e.raw.death||(n+=" "+e.raw.birth+" - "+e.raw.death),{value:e.value,display:n}},onItemSelect:function(e){if(""!==e){if(a&&"personCard"===t){var n=window.PersonCard.URL.storyHref;switch(window.PersonCard.tabName){case"facts":n=window.PersonCard.URL.factsHref;break;case"gallery":n=window.PersonCard.URL.galleryHref;break;case"hints":n=window.PersonCard.URL.hintsHref}void 0!==e.PID&&(n=n.replace(window.PersonCard.personId,e.PID)),window.location=n}var r=$(this);if(r.length>0&&(r.addClass("selectedPerson"),""!==e.PID)){r.closest(".card").find(".erAddExistingData").data("itemData",e)}void 0!==o&&null!==o&&o.length>0&&o.removeAttr("disabled")}}}),$(e).on("input",function(){$(this).removeClass("selectedPerson")})}function closeCallouts(){"use strict";ui.callout.close()}function CheckTextAreaLength(e,n){"use strict";var o=$("#"+e.id);o.length>0&&o.val().length>n&&o.val(o.val().substring(0,n))}function removePerson(){"use strict";var e=escape(window.PersonCard.name);$.ajax({url:getPersonAjaxUrlPrefix()+window.PersonCard.URL.removePerson,type:"POST",data:{name:e},success:function(e){e&&e.success?location.href=e.returnUrl:(ui.modal.close(),e.message&&acom.bus.emit("Person::Notify::Failure",e.message,window.PersonCard.text.removePersonTitle))},error:function(e){e&&window.console&&console.log(e)}})}function removePersonModal(){"use strict";closeCallouts(),ui.modal(window.PersonCard.modals.deletePerson,{open:!0,onOpen:function(){$("#documentReturnURL").val(document.URL),$("#RemoveModalOkButton").one("click",function(){removePerson()})}})}function detachMediaFromCitation(e,n,o){"use strict";var t=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/citationId/"+e+"/mediaid/"+n+"/detachmediafromcitation";$.ajax({type:"POST",url:t,cache:!1,timeout:2e4,success:function(e){e.result&&"function"==typeof o&&o(e)},error:function(){window.lock.actionInProgress=!1,window.personAnalyticsTrackClick("detachMediaFromCitation-Failed")}})}function detachMediaFromEvent(e,n,o){"use strict";var t=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/assertionid/"+e+"/mediaid/"+n+"/detachmediafromevent";$.ajax({type:"POST",url:t,cache:!1,timeout:2e4,success:function(n){"function"==typeof o&&o(n,"#"+e+"mediaListCount")},error:function(){window.lock.actionInProgress=!1,window.personAnalyticsTrackClick("detachMediaFromEvent-Failed")}})}function setMediaViewerCropUrl(e){"use strict";if(e)window.ancestry.pub.setCurrentPage("CurrentPersonView",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId}),window.ancestry.pub.buildUrl().toGoTo("MediaViewer",{MediaId:window.PersonCard.primaryImageId,TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,ShowImageCropping:1}).toComeBackToCurrent(!0).build(function(e,n){e||(window.location=n)});else{var n={destInputs:{MediaId:window.PersonCard.primaryImageId,TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,ShowImageCropping:1},currentPageIsStart:!0};window.ancestry.pub.getUrl("MediaViewer",n,function(e,n){if(!e)return $("#cropProfileImage").attr("href",n),!1})}}function getProfileImageUrl(){"use strict";var e=window.PersonCard.domain.mediaSvc+"/v2/image/namespaces/1093/media/"+window.PersonCard.primaryImageId+"?client=PersonUI&maxSide=280";return window.PersonCard.primaryImageCropRect&&(e+="&ImageQuality=UltraHighQuality&scaleUpToMax=true&prescalecroprect="+window.PersonCard.primaryImageCropRect),e}function updatePersonProfileImage(e,n){"use strict";var o=window.PersonCard.domain.mediaAPI+"/api/trees/"+window.PersonCard.treeId+"/persons/"+window.PersonCard.personId,t={mediaId:e||""},r=function(e){var n,o,t=document.cookie.split(";"),r=e+"=";for(o=0;o<t.length;o+=1){for(n=t[o];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(r))return n.substring(r.length,n.length)}return null};$.ajax({type:"PUT",url:o,data:JSON.stringify(t),contentType:"application/json",beforeSend:function(e){e.setRequestHeader("ATT",r("ATT"))},success:function(){window.PersonCard.primaryImageId=t.mediaId,window.PersonCard.primaryImageCropRect=n||"",window.getPersonCard(),$html.hasClass("modalOpen")&&setMediaViewerCropUrl(!0)},error:function(){null!==window.acom&&null!==window.acom.bus&&window.acom.bus.emit("RemoveProfileImage::Notify::Failure",window.PersonCard.text.removeProfileImageError,window.PersonCard.text.removeProfileImageTitle)}})}function showChooseProfileImageModal(){function e(e){var n=e[0];updatePersonProfileImage(n.id,n.cropRect)}function n(){ui.modal.showLoading(!1)}ui.modal('<div class="modal modalHasTitle" id="chooseProfileImageModal"><header class="modalHeader"><h4 class="modalTitle">'+window.PersonCard.text.chooseProfileImageModalTitle.replace("{personName}",window.PersonCard.name)+'</h4></header><div id="chooseProfileImageModalContent" style="flex-grow:1;"></div></div>',{showLoading:!0,open:!0,onOpen:function(o){if(o.content.classList.add("fullScreenModal"),window.acom&&window.acom.bus&&(window.acom.bus.on("Selector::selectionUpdated",e),window.acom.bus.on("Selector::loaded",n)),window.ancestry&&window.ancestry.pub){var t={destInputs:{TreeId:PersonCard.treeId,PersonId:PersonCard.personId,SelectedMediaIds:PersonCard.primaryImageId,MediaTypesFilter:"p"}};window.ancestry.pub.getUrl("MediaSelectorComponent",t,function(e,n){if(e)$(o.element).html("<p>"+window.PersonCard.text.getTreeMediaError+"</p>");else{window.ancestry.pub.setCurrentPage("CurrentPersonView",{TreeId:PersonCard.treeId,PersonId:PersonCard.personId},!0);var t={domId:"chooseProfileImageModalContent",url:"/mediaui-viewer/api/tree/"+PersonCard.treeId+"/person/"+PersonCard.personId+"/selector?selectedMediaIds="+PersonCard.primaryImageId+"&filter=p"};window.glue.fetch(t)}})}else $(o.element).html("<p>"+window.PersonCard.text.getTreeMediaError+"</p>")},onClose:function(o){window.acom&&window.acom.bus&&(window.acom.bus.off("Selector::selectionUpdated",e),window.acom.bus.off("Selector::loaded",n))},useCustomPadding:!0,width:"100%"})}function showAddMediaToLifeStoryModal(){"use strict";function e(e){function n(e){e||acom.bus.emit("AddMediaToLifeStory::Notify::Failure",PersonCard.text.addMediaToLifeStoryError,PersonCard.text.addMediaToLifeStoryModalTitle),ui.modal.close(),window.glue.reload(window.glue.reloaded)}window.acom&&window.acom.bus&&(window.acom.bus.on("Details::onSave",n),window.acom.bus.on("Details::onCancel",showAddMediaToLifeStoryModal));var o=PersonCard.domain.mediaUI+"/component/details/"+PersonCard.treeId+"/"+PersonCard.personId+"/"+e.id;ui.modal('<div id="addTimelineMediaDetails">',{open:!0,onOpen:function(){var e={domId:"addTimelineMediaDetails",url:o};window.glue.fetch(e)},onClose:function(){window.acom&&window.acom.bus&&(window.acom.bus.off("Details::onSave",n),window.acom.bus.off("Details::onCancel",showAddMediaToLifeStoryModal))},width:"760"})}function n(e){var n=PersonStory.timeline.events.reduce(function(e,n){return n.EventMedia.length>0&&(e[n.EventMedia[0].Id]=!0),e},{});e.forEach(function(e){null!==e&&null!==n&&null!==e.rights&&(e.date||n[e.id]||!e.rights.canEdit)&&(e.active=!1)})}function o(n){e(n[0])}function t(){$('<div class="modalHeader"><h4 class="modalTitle">'+window.PersonCard.text.addMediaToLifeStoryModalTitle+"</h4></div>").prependTo($("#addTimelineMedia"))}window.acom&&window.acom.bus&&(window.acom.bus.on("Selector::filterItems",n),window.acom.bus.on("Selector::selectionUpdated",o),window.acom.bus.on("Selector::loaded",t)),ui.modal('<div class="modalHasTitle" id="addTimelineMedia">',{open:!0,onOpen:function(){if(window.ancestry&&window.ancestry.pub){var e={destInputs:{TreeId:PersonCard.treeId,PersonId:PersonCard.personId,MediaTypesFilter:"p",Upload:"1"}};window.ancestry.pub.getUrl("MediaSelectorComponent",e,function(e,n){if(!e){window.ancestry.pub.setCurrentPage("CurrentPersonView",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId});var o={domId:"addTimelineMedia",url:n};window.glue.fetch(o)}})}},onClose:function(){window.acom&&window.acom.bus&&(window.acom.bus.off("Selector::selectionUpdated",o),window.acom.bus.off("Selector::filterItems",n),window.acom.bus.off("Selector::loaded",t))},width:"100%"})}function attachMediaToCitation(e,n,o){"use strict";var t=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/citationId/"+e+"/mediaid/"+n+"/attachmediatocitation";$.ajax({type:"POST",url:t,cache:!1,timeout:2e4,success:function(e){"function"==typeof o&&o(e)},error:function(){window.lock.actionInProgress=!1,window.personAnalyticsTrackClick("attachMediaToCitation-Failed")}})}function attachMediaToEvent(e,n,o){"use strict";var t=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/assertionid/"+e+"/mediaid/"+n+"/attachmediatoevent";$.ajax({type:"POST",url:t,cache:!1,timeout:2e4,success:function(e){"function"==typeof o&&o(e)},error:function(){window.lock.actionInProgress=!1,window.personAnalyticsTrackClick("attachMediaToEvent-Failed")}})}function detachSourceFromEvent(e,n,o,t){"use strict";var r=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/assertionid/"+e+"/sourceid/"+n+"/detachsourcefromevent";$.ajax({type:"POST",url:r,cache:!1,timeout:2e4,success:function(e){"function"==typeof t&&t(e)},error:function(){window.lock.actionInProgress=!1,window.updateSourceAttachDetachState(e,n,!0,o),window.personAnalyticsTrackClick("detachSourceFromEvent-Failed")}})}function attachSourceToEvent(e,n,o,t){"use strict";var r=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/assertionid/"+e+"/sourceid/"+n+"/attachsourcetoevent";$.ajax({type:"POST",url:r,cache:!1,timeout:2e4,success:function(e){"function"==typeof t&&t(e)},error:function(){window.updateSourceAttachDetachState(e,n,!1,o),window.personAnalyticsTrackClick("attachSourceToEvent-Failed")}})}function saveToTree(){"use strict";$(".saveToTree");$(".callout.open").length>0&&($(".researchToolsButton").length?$(".researchToolsButton"):$(".personToolsGuest")),ui.modal("<div>",{showLoading:!0,width:"760",open:!0,onOpen:function(e){$.ajax({url:window.PersonCard.URL.saveToTree,type:"GET",dataType:"jsonp",contentType:"application/json",jsonpCallback:"handleJSON",success:function(n){ui.modal.showLoading(!1),$(e.element).html('<div class="modalHasTitle"><header class="modalHeader"><h4 class="modalTitle">'+window.PersonCard.text.saveToTreeTitle+"</h4></header>"+n.html+"</div>"),$.getScript(n.js).done(function(){}).fail(function(){$this.html("<p>"+window.PersonCard.text.saveToTreeError+"</p>")})},error:function(){ui.modal.showLoading(!1),$(e.element).html("<p>"+window.PersonCard.text.saveToTreeError+"</p>")}})}})}function quickEdit(e,n,o){"use strict";var t=function(e){return!0===e.reqRefresh?(window.getPersonCard(),ui.modal.close(),!1):("m"===e.mode&&ui.modal.close(),"success"===e.status?(window.personAnalyticsTrackClick("QuickEditPersonSaved"),window.getPersonCard()):"close"===e.action&&window.personAnalyticsTrackClick("QuickEditCancelorClose"),!0)},r=n||window.PersonCard.personId,a=e||window.PersonCard.treeId,i=o||$(".editToolsButton");if(window.PersonCard.useNewQuickEdit){var s='{ "tid": "'+a+'", "pid": "'+r+'" }';loadAddEditPerson("edit",s)}else new AddPerson.Edit(a,r,{},t,i)}function addFamilyMember(e,n,o){"use strict";var t=function(e){return"success"===e.status&&(window.personAnalyticsTrackClick("QuickEditPersonSaved"),window.getPersonCard()),"m"===e.mode&&ui.modal.close(),!0};window.PersonCard.useNewAddPerson?loadAddEditPerson("add",o):new AddPerson.Add(e,n,o,t)}function getPersonCard(){"use strict";$.ajax({cache:!1,url:getPersonAjaxUrlPrefix()+window.PersonCard.URL.getPersonCard,type:"GET",dataType:"json",contentType:"application/json",jsonpCallback:"handleJSON",success:function(e){var n=$("#personCardContainer");if(n.length>0&&""!==e.html){n.html(e.html),window.PersonCard.hasEditRights?(window.showNotesInPersonCard(),window.loadCommentCount()):window.loadCommentCount();var o;"function"==typeof CustomEvent?o=new CustomEvent("person-website.personcard-reloaded",{detail:"Person card has updated."}):(o=document.createEvent("Event"),o.detail="Person card has updated.",o.initEvent("person-website.personcard-reloaded",!0,!0)),document.dispatchEvent(o),void 0!==e.js&&void 0===personCardLoaded&&$.getScript(e.js).done(function(){}).fail(function(){})}},error:function(){}})}function personPageAvailability(e){"use strict";var n=$(".personPage"+e);"true"===n.attr("aria-busy")?n.removeAttr("aria-busy"):n.attr("aria-busy","true")}function editRelationships(e,n,o){"use strict";void 0!==o&&!1!==o||window.closeCallouts();var t=window.PersonCard.text.editRelsModalTitle.replace("{fullName}",$("#personCardContainer").find(".userCardTitle").html());ui.modal('<div class="modalPersonView modalEditRelationship form modalHasTitle" id="editRelationshipsModal"></div>',{showLoading:!0,useCustomPadding:!1,width:760,open:!0,onOpen:function(o){$.ajax({url:getPersonAjaxUrlPrefix()+window.PersonCard.URL.editRelationships,data:{addedPid:e,addedRelation:n},type:"GET",dataType:"jsonp",cache:!1,contentType:"application/json",success:function(n){ui.modal.showLoading(!1),$(o.element).html(n.html).find(".modalTitle").html(t),$.cachedScript(window.PersonCard.editRelationshipUrl).done(function(){n.data.addedPid=e,window.editRelationship(n.data)})},error:function(){ui.modal.showLoading(!1),$(o.element).html('<div class="ancGrid ancGridPadded"><div class="ancCol w100"><p class="icon iconWarning">'+window.PersonCard.text.editRelationshipsError+"</p></div></div>")}})},onClose:function(){window.editRelationship&&window.editRelationship.updated&&(window.glue?(personPageAvailability(""),window.glue.reload(function(){personPageAvailability(""),window.glue.reloaded})):location.reload()),$.get(getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/relationship/log/modalclose")},trigger:document.getElementById("editToolsButton")})}function clearNarrativeCache(){"use strict";var e=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/clearnarrativecache";$.ajax({url:e,method:"GET",async:!1})}function setFactsMediaUploadWithHistoryUrl(e,n){"use strict";window.ancestry.pub&&(window.ancestry.pub.setCurrentPage("CurrentPersonView",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId}),window.ancestry.pub.buildUrl().toGoTo("PersonFactMediaObjectUpload",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,AssertionId:n,MediaType:"Media"}).toComeBackToCurrent(!0).build(function(e,n){e||(window.location=n)}))}function setCitationMediaUploadWithHistoryUrl(e,n){"use strict";window.ancestry.pub&&(window.ancestry.pub.setCurrentPage("PersonFactsCitationEdit",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,CitationId:n,TabName:"Media"}),window.ancestry.pub.buildUrl().toGoTo("PersonCitationMediaObjectUpload",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,CitationId:n,MediaType:"Media"}).toComeBackToCurrent(!0).build(function(e,n){e||(window.location=n)}))}function setSearchWithHistoryUrl(e){"use strict";if(window.ancestry.pub){var n={destInputs:{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,SSRC:"pt"},currentPageIsStart:!0};window.ancestry.pub.setCurrentPage("CurrentPersonView",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId}),window.ancestry.pub.getUrl("PersonRecordSearch",n,function(n,o){if(!n)return e.href=o,window.location=o,!1})}}function setMergeDuplicateWithHistoryUrl(e){"use strict";if(window.ancestry.pub){var n={destInputs:{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,PersonIdPrimary:window.PersonCard.personId},currentPageIsStart:!0};window.ancestry.pub.setCurrentPage("CurrentPersonView",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId}),window.ancestry.pub.getUrl("PersonMergeDuplicatePickPerson",n,function(n,o){if(!n)return e.href=o,window.location=o,!1})}}function setGalleryPubCurrentPage(){"use strict";window.ancestry.pub&&window.ancestry.pub.setCurrentPage("PersonViewMediaGallery",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId})}function setHintsWithHistoryUrl(){"use strict";function e(e){if(window.ancestry.pub){var n={TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId},o=location.search.slice(1).split("&"),t=0;if(o[t].length){var r,a;for(t=0;t<o.length;t+=1)(a=o[t].split("="))&&a[0].startsWith&&a[0].startsWith("Hints.")&&(r=a[0].replace("Hints.",""),r=r.charAt(0).toUpperCase()+r.slice(1),n[r]=decodeURIComponent(a[1]||""))}window.ancestry.pub.setCurrentPage("PersonPageHintsView",n,{successSource:"Hint"}),window.acom&&window.acom.bus&&window.acom.bus.emit("csm::history::currentpagechange",e)}}window.ancestry.pub&&(e({}),acom&&acom.bus&&acom.bus.listeners("csm::history::statechange").length<1&&acom.bus.on("csm::history::statechange",e))}function setViewRecordImageHistory(e,n){"use strict";window.ancestry.pub&&window.ancestry.pub.setCurrentPage("PersonFactsCitationEdit",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,CitationId:n})}function setViewRecordPageHistory(e,n){"use strict";window.ancestry.pub&&window.ancestry.pub.setCurrentPage("PersonFactsCitationEdit",{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,CitationId:n})}function convertHTML(e){"use strict";return $("<div/>").text(e).html()}function convertText(e){"use strict";return $("<div/>").html(e).text()}function toggleCheckedMenuItem(e){"use strict";$(e).addClass("loading loadingSmall loadingOnBlack").closest("ul").addClass("calloutCheckedMenuItemsDisabled")}function toggleCheck(e,n){!0===n?e.attr("aria-checked","true").removeClass("calloutMenuUnchecked").addClass("calloutMenuChecked"):e.attr("aria-checked","false").removeClass("calloutMenuChecked").addClass("calloutMenuUnchecked")}function closeMyCanvasGuidance(){"use strict";1===$(".guidanceHighlight.spotlight").length&&ui.guidance.close()}function setGalleryHistoryPoint(){"use strict";var e=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/setgalleryhistorypoint";$.ajax({url:e,method:"GET",success:function(){}})}function closeBeforePrint(){"use strict";$html.hasClass("modalOpen")&&ui.modal.close(),$(".callout").hasClass("open")&&closeCallouts(),$html.hasClass("sidebarOpened")&&$html.removeClass("sidebarOpen")}function beforePrint(){"use strict";closeCallouts(),printView||(printView=!0,document.title=documentTitle+" - "+window.PersonCard.text.print,closeBeforePrint(),$html.addClass("pFNoTransitions"),$(".pageHeader:not('bgColor8')").removeClass("bgDark"),$(".pageHeader").hasClass("pageHeaderFacts")&&($(".factsSectionSources").insertAfter($(".factsSectionFamily")),$("#factsMobilePageTabsContents").append(window.PersonResearch.factsDivisionPrint),window.workspaceView&&window.updateWorkspaceHTMLClasses(window.workspaceView.refWorkspaceContent.state.activeTab)),responsiveChecks())}function nodeFactEditModal(e,n,o,t,r){ui.modal("<div>",{open:!0,onOpen:function(a){var i=e.factEditContentUrl.replace("assertionId",n),s="0"===n?{newPersonPid:""}:{};t&&(i=i.replace("assertion","source"),s.databaseId=e.databaseId,s.recordId=e.recordId,s.recordImageUrl=e.recordImageUrl,s.viewRecordLink=e.viewRecordLink,s.viewRecordImageLink=e.viewRecordImageLink,s.citationDetailLink=e.citationDetailLink),e.assertionIds&&(s.assertionIds=e.assertionIds),r&&(s.addingFactType=r);var d=document.querySelector("#modal .modalClose");d&&window.personAnalyticsTrackClickV2&&d.addEventListener("click",function(){var e=o?"fact_add":"fact_edit",n=o?"factsOptionsAddFact":"factsOptionsEditFact";window.personAnalyticsTrackClickV2(n,"cancelorclose",e)},!1),$.ajax({type:"GET",url:i,cache:!1,data:s,timeout:5e3,success:function(e){ui.modal.showLoading(!1),e.html?$(a.element).html(e.html):$(a.element).html('<div><div id="FactEditComponent"></div>'+PersonCard.text.addPersonErrorText+"</div>")},error:function(){ui.modal.showLoading(!1),$(a.element).html('<div><div id="FactEditComponent"></div>'+PersonCard.text.addPersonErrorText+"</div>")}})},onClose:function(){window.PersonResearch.openOnLoadTab="0";var e=document.querySelector("#modal .modalClose");e&&e.removeEventListener("click");var n=document.createEvent("Event");n.initEvent("closed.modal.factEdit",!0,!0),document.body.dispatchEvent(n)},showLoading:!0,width:o&&!r?480:800})}function setCitationStartPage(e,n,o){window.ancestry&&window.ancestry.pub&&(o&&""!==o?window.ancestry.pub.setCurrentPage("PersonFactsCitationEdit",{TreeId:e,PersonId:n,CitationId:o,TabName:"details"}):window.ancestry.pub.setCurrentPage("PersonFacts",{TreeId:e,PersonId:n}))}function checkForError(e){e.find(".personPageUnavailable").length>0&&e.addClass("personPageError")}function showTabContent(e,n){n.removeClass("loading loadingLarge"),checkForError($("#"+e.domId))}function reloadContent(){window.location.reload()}var $html=$("html"),isBonsai=$("html").hasClass("bonsai");$pageHeader=$(".pageHeader"),$pageWrap=$(".pageWrap"),$printFriendlyActions=$("#printFriendlyActions"),cloneComments=!0,documentTitle=document.title,notifyRecordObject=null;var responsiveChecksInterval;document.body.addEventListener("sidebar-close",function(){responsiveChecks(!0)}),document.body.addEventListener("sidebar-closed",function(){clearInterval(responsiveChecksInterval)}),document.body.addEventListener("sidebar-open",function(){responsiveChecks(!0)}),document.body.addEventListener("sidebar-opened",function(){clearInterval(responsiveChecksInterval)});var printView=!1;window.getResolution=function(){"use strict";return window.matchMedia("(min-resolution: 192dpi)").matches?"retina":"not-retina"},window.getScreenType=function(){"use strict";return window.matchMedia("(max-width: 479px)").matches?"smart-phone-portrait":window.matchMedia("(max-width: 767px)").matches?"smart-phone":window.matchMedia("(width:768px)").matches?"tablet-portrait":window.matchMedia("(max-width: 1199px)").matches?"not-large-screen":"large-screen"},window.personScreenType=function(e){"use strict";if(e)switch(e){case"not-large-screen":return window.matchMedia("(max-width: 1199px)").matches;case"tablet-portrait":return window.matchMedia("(max-width: 768px)").matches;case"smart-phone":return window.matchMedia("(max-width: 767px)").matches;case"smart-phone-portrait":return window.matchMedia("(max-width: 479px)").matches;case"large-screen":default:return window.matchMedia("(min-width: 1200px)").matches}},window.onbeforeprint=beforePrint,window.onafterprint=afterPrint,window.glue={},window.lock={actionInProgress:!1},String.prototype.startsWith||(String.prototype.startsWith=function(e,n){"use strict";return n=n||0,this.substr(n,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,n){"use strict";return(void 0===n||n>this.length)&&(n=this.length),this.substring(n-e.length,n)===e}),$.cachedScript=function(e,n){"use strict";return n=$.extend(n||{},{dataType:"script",cache:!0,url:e}),$.ajax(n)},$(function(){"use strict";function e(e){switch(e){case"tabStory":return"Story";case"tabGallery":return"Gallery"
;case"tabHints":return"Hints";default:case"tabFacts":return"Facts"}}function n(n){"tabStory"!==n?$pageHeader.removeClass("pageHeaderStory pageHeaderFacts pageHeaderGallery pageHeaderHints").addClass("pageHeaderNotStory pageHeader"+e(n)).end().find("#personCard .userCardEvents[aria-hidden]").attr("aria-hidden",window.personScreenType("smart-phone")?"true":"false").end().find("#personCard .userCardSubTitle[aria-hidden]").attr("aria-hidden",window.personScreenType("smart-phone")?"false":"true"):$pageHeader.removeClass("pageHeaderNotStory pageHeaderFacts pageHeaderGallery pageHeaderHints").addClass("pageHeaderStory").end().find("#personCard .userCardEvents[aria-hidden]").attr("aria-hidden","true").end().find("#personCard .userCardSubTitle[aria-hidden]").attr("aria-hidden","false");var o=document.createEvent("Event"),t=document.getElementById("personView");o.initEvent("viewRendered",!0,!0),t.dispatchEvent(o)}function o(e){n(e)}function t(e){var n;switch(e){case"story":n=0;break;case"facts":default:n=1;break;case"gallery":n=2;break;case"hints":n=3}return n}function r(e){if("csm"!==e){var n=getTabData(e),r=$("#"+n.tabId);window.personTabsInstance.open(t(e)),o(r.attr("id"))}}function a(){closeCallouts(),$html.addClass("printFriendly"),beforePrint(),$("html, body").scrollTop(0),window.PersonCard.showMyCanvas&&window.PersonCard.firstTimePrintView?(setTimeout(function(){$("#myCanvasLogoBtn").click()},0),$.ajax({url:getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/userhasseenprintview",method:"GET"}),window.PersonCard.firstTimePrintView=!1,$("#myCanvasLogoBtn").focus()):$("#printFriendlyCustomizeBtn").focus()}function i(){var e="";$(".pageNav").hasClass("pageNavCollapsed")?($(".pageNav").removeClass("pageNavCollapsed").addClass("pageNavExpanded"),e="Expanded"):($(".pageNav").removeClass("pageNavExpanded").addClass("pageNavCollapsed"),e="Collapsed");var n=getPersonAjaxUrlPrefix()+"/northstar/personview/researchtoolbar?view="+e;$.ajax({cache:!1,url:n}).done(function(){})}function s(){if($("#viewProfileImage").length){var e={destInputs:{MediaId:window.PersonCard.primaryImageId,TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId},currentPageIsStart:!0};window.ancestry.pub.getUrl("MediaViewer",e,function(e,n){if(!e)return $("#viewProfileImage").attr("href",n),!1})}}function d(){var e=$("#uploadProfileImage");if(e.length){var n={destInputs:{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,MediaType:"Photo"},currentPageIsStart:!0};window.ancestry.pub.getUrl("PersonMediaObjectUpload",n,function(n,o){if(!n)return e.attr("href",o),!1})}}function c(){var e;if(window.PersonCard.URL.hintsCountUrl&&window.PersonCard.URL.hintsCountUrl.length>0)return e=window.PersonCard.URL.hintsCountUrl,void $.ajax({url:e,method:"GET",cache:!1,success:function(e){updateHintCount(void 0===e.PendingHintCount?e:e.PendingHintCount)},headers:{"Ancestry-UserId":window.PersonCard.UserId}})}function l(e,n){var o={destInputs:{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId,PageId:n}};window.ancestry.pub.getUrl("MyCanvasPrint",o,function(n,o){n&&null!==window.console&&console.warn(n),e.attr("href",o)})}function u(){var e={tabStory:"https://www.ancestry.com/academy/course/printing-out-your-lifestory-page?embed=true&playlist=lifestory-page-help&sidebar=true",tabFacts:"https://www.ancestry.com/academy/course/adding-a-web-link-to-your-facts-page?embed=true&playlist=facts-page-help&sidebar=true",tabGallery:"https://www.ancestry.com/academy/course/how-to-upload-a-photo-to-tree?embed=true&playlist=gallery-page-help&sidebar=true"},n=e[$("#personTabs").find(".active").attr("id")],o={width:840},t='<div class="modal"><div class="modalHeader"><h4 class="modalTitle icon iconAcademy">Ancestry Academy Video Help</h4></div><p>Check out these videos to learn how to manage people and relationships, enhance your ancestor&rsquo;s story, and more.</p><div class="topSpacing" id="helpVideos"><iframe frameborder="0" id="helpVideo" src="'+n+'" title="Ancestry Academy Video Help"></iframe></div ></div>';o.open=!0,window.ui.modal(t,o)}var w=void 0!==window.PersonCard?{key:window.PersonCard.tabName,queryValue:window.PersonCard.tabName,url:window.PersonCard.URL.current,domId:window.PersonCard.domId,options:getTabData(window.PersonCard.tabName)}:{key:"",queryValue:"",url:"",domId:"",options:""},p=new window.Glue(w);new UpdateURL(History.getState(),w.options),window.glue&&(p.preProcess=r,window.glue.reload=p.reload,window.glue.fetch=p.fetch,window.glue.reloaded=function(e){var n;"function"==typeof CustomEvent?n=new CustomEvent("person-website.glue-reloaded",{detail:e||""}):(n=document.createEvent("Event"),n.detail=e||"",n.initEvent("person-website.glue-reloaded",!0,!0)),document.dispatchEvent(n)}),window.acom.bus.on("csm::component::statechange",function(){if(void 0!==window.PersonCard&&void 0!==window.PersonCard.doHintsABTest&&window.tao&&window.tao.f&&window.tao.f.mbox&&"True"===window.PersonCard.doHintsABTest){var e=window.PersonCard?window.PersonCard.name:"",n=window.PersonCard?window.PersonCard.lifeYearRange:"",o=window.PersonCard?window.PersonCard.birthPlace:"",t=$(".hint-count-pending"),r=t.length>0?t.html():"0";window.tao.f.mbox("us_PersonsHintsTab","name="+e,"lifeRange="+n,"hintsAvail="+r,"birthPlace="+o)}}),window.acom.bus.on("Selector::deletePhoto",function(e){var n=$("#profileImage").find("img");n.length>0&&-1!==n.attr("src").indexOf(e)&&window.getPersonCard()}),window.notify({action:"init",enableIpns:!!window.PersonCard&&window.PersonCard.enableIPNS,ipnsUrl:window.PersonCard?window.PersonCard.ipnsUrl:"",cmsUrlBase:window.PersonCard?window.PersonCard.cmsUrlBase:"",handler:function(e){if(!0===e[0].data.nbsStepChanged){window.notifications=e;var n=document.createEvent("Event");return n.initEvent("notifications.ready",!0,!0),window.dispatchEvent(n),!1}return e.map(function(n){if(e.hasOwnProperty(n)){var o=e[n];"Merge:Record"===o.action&&(notifyRecordObject=o)}}),!0}}),checkForError($(".tabContent.active .personPage")),loadScripts(window.PersonCard.jsAssets,c),-1!==window.location.href.toLowerCase().indexOf("/hints")?setHintsWithHistoryUrl(null):-1!==window.location.href.toLowerCase().indexOf("/gallery")&&setGalleryPubCurrentPage();window.personTabsInstance=ui.tabs(document.querySelector("#personTabs"),{activeIndex:t(window.PersonCard.tabName),allowUrls:!0,content:"#personTabsContent",onOpen:function(e){closeCallouts();var n=getTabData(e.element.querySelectorAll(".tab")[e.index].getAttribute("id")),o=$("#"+n.contentId);if(window.bBogdata&&(n.url=n.url+"&"+window.bBogdata),$html.attr("data-page",n.queryValue),window.personTabsInstance||o.hasClass("personPageError")){e.element.querySelector(".tab[aria-current]").removeAttribute("aria-current"),e.element.querySelector("#"+n.tabId).setAttribute("aria-current","page"),n.pushUrlState=!1,n.removeCacheFiles=!1,n.callback=function(){showTabContent(n,o,this)},o.removeClass("personPageError").addClass("loading loadingLarge").children("div:first").empty(),p.fetch(n);var t=History.getState(),r=getTabNameStringForPageTitle(n.queryValue),a=n.queryValue;window.bBogdata&&(-1===a.indexOf(window.bBogdata)&&(a=a+"?"+window.bBogdata),window.bBogdata=null);var i=htmlDecode(window.PersonCard.name)+" - "+r;t.data.tab!==n.key&&History.pushState({tab:n.queryValue,domId:o.attr("id"),options:n},i,a,!1),window.personAnalyticsTrackTabClick&&window.personAnalyticsTrackTabClick(("story"===n.key?"lifeStory":n.key)+"Tab")}if(0===e.index){var s,d=document.querySelectorAll('script[src*="life-story"]');if(d.length)for(s=0;s<d.length;s+=1)d[s].remove()}else if(1===e.index){var c=document.querySelector('script[src*="person-view-facts.js"]'),l=document.querySelector('script[src*="person-sticky-tabs.js"]'),u=document.querySelector('script[src*="person-family-card.js"]');c&&c.remove(),l&&l.remove(),u&&u.remove()}}});ui.tabs(document.querySelector(".drawerHeader .tabs"),{activeIndex:0,content:".drawerBody"});if(window.PersonCard.showFsWidget){({FamilySearch:{loadWidget:function(e){var n=document.location.search||"";n+=(n?"&":"?")+"fsid="+$("#familySearchId").val(),$.ajax({cache:!1,dataType:"jsonp",xhrFields:{withCredentials:!0},crossDomain:!0,url:window.PersonCard.domain.trees+"/tree/"+$("#treeId").val()+"/person/"+$("#personId").val()+"/fs/personwidget"+n}).done(function(n){null!==n&&($("#fsWidget").html(n.html),null!==e&&e(),$($html).on("click","#fsDisconnect",function(){ui.callout.close(),ui.modal('<div class="modalHasTitle" id="fsDisconnectConfirmModal"><header class="modalHeader"><h4 class="modalTitle">'+window.fsConfirmTitle+'</h4></header><div class="ancGrid ancGridSmall">'+$("#fsDisconnectConfirm").html()+"</div></div>",{open:!0,onOpen:function(e){$(e.element).removeAttr("style").one("click","#fsConfirmDisconnect",function(){$.ajax({cache:!1,dataType:"jsonp",xhrFields:{withCredentials:!0},crossDomain:!0,url:window.PersonCard.domain.trees+window.fsPerformDisconnectUrl}).done(function(e){e.success?($("#familySearchId").val(""),ui.modal.close(),location.reload()):($("#fsDisconnectFail").addClass("modalHasTitle").removeClass("ancGrid ancGridSmall"),ui.modal("#fsDisconnectFail",{open:!0,onOpen:function(e){$(e.element).html('<header class="modalHeader"><h4 class="modalTitle">'+window.fsErrorDisconnecting+'</h4></header><div class="ancGrid ancGridSmall">'+$this.html()+"</div>").removeAttr("style")},width:"510"}))})}).one("click","#fsCancelDisconnect",function(){ui.modal.close()})},width:"510"})}))}).fail(function(){$("#fsWidget").parent(".familySearchTools").remove()})}}}).FamilySearch.loadWidget(function(){$("#fsOrdStatus, #fsConnectLink, #fsConnectingStatus, #fsNeedsSignIn").unwrap()})}"True"===PersonCard.doFEMLogging&&function(e,n){var o=new Date,t=/(?:ancestry((?:dev)?(?:stage)?(?:awsstage)?)\.)([a-z0-9]+(?:\.[a-z0-9]+)?)/i.exec(location.hostname);o.setMinutes(o.getMinutes()+20),document.cookie=e+"="+n+"; path=/; domain=."+t[0]+"; expires="+o.toGMTString()}("ct_fire","true"),loadCommentCount(),$(window).bind("pageshow",function(e){e.originalEvent.persisted&&window.location.reload()}).resize(ui.throttle(function(){responsiveChecks()},25));var m;if(document.body.addEventListener("modal-closed",window.responsiveChecks),document.body.addEventListener("modal-opened",window.responsiveChecks),$html.on("openedSiteBanner",function(e){window.responsiveChecks()}).on("viewRendered",function(e){$html.hasClass("printFriendly")&&clearPrintFriendly()}).on("click keypress",'#profileImage[role="button"]',function(e){if("keypress"!==e.type||13===e.which){$(this).hasClass("icon")?showChooseProfileImageModal():m?"keypress"===e.type&&m.open():(m=ui.callout(this,{classes:"calloutMenu",content:"#profileImageCalloutDomContent",calloutStyle:"dark",onAfterOpen:function(){s(),setMediaViewerCropUrl(!1),d()}}),m.open())}}).on("click","#chooseProfileImage",function(){showChooseProfileImageModal()}).on("click","#removeProfileImage",function(){m.destroy(),updatePersonProfileImage()}),$("#researchTools .iconPrint").on("click",function(){$(this).addClass("printFriendlyViewTriggered"),a()}),window.ancestry.pub){$(".setTreeLink").each(function(){var e=$(this),n=e.attr("id"),o={destInputs:{TreeId:window.PersonCard.treeId,FocusPersonId:window.PersonCard.personId},currentPageIsStart:!1};window.ancestry.pub.getUrl(n,o,function(n,o){if(!n)return e.attr("href",o),!1})}),$("#treePagesList > li").length>0&&ui.callout(".treePagesButton",{content:"#treePagesList",classes:"calloutMenu treePagesCallout"});var C;$("#militaryBadgeLink").length&&(C={destInputs:{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId},currentPageIsStart:!0},window.ancestry.pub.getUrl("PersonMilitaryPage",C,function(e,n){if(!e)return $("#militaryBadgeLink").attr("href",n),!1})),$("html .memberConnectLink").length&&(C={destInputs:{TreeId:window.PersonCard.treeId,PersonId:window.PersonCard.personId},currentPageIsStart:!0},window.ancestry.pub.getUrl("PersonMemberConnect",C,function(e,n){if(!e)return $("html .memberConnectLink").attr("href",n),!1}))}(window.PersonCard.hasEditRights?(ui.callout(".researchToolsButton",{classes:"calloutMenu calloutMenuResearchTools",content:"#researchToolsCalloutDomContent",onOpen:function(){$(".pageNav").hasClass("pageNavExpanded")?$(".researchToolsList .iconAfterCheck").addClass("calloutMenuChecked"):$(".researchToolsList .iconAfterCheck").addClass("calloutMenuUnchecked"),loadCommentCount()},onAfterOpen:function(){$(".researchToolsList").on("click",".iconAfterCheck",function(){var e=$(this);i(),e.hasClass("calloutMenuChecked")?(toggleCheck(e,!1),window.personAnalyticsTrackClick("showResearchToolbar")):(toggleCheck(e,!0),window.personAnalyticsTrackClick("hideResearchToolbar"))}).one("click",".iconPrint",function(){$(".researchToolsButton").addClass("printFriendlyViewTriggered"),a()}).one("click",".iconHelp",u),$(".pageHeader").hasClass("pageHeaderStory")||$(".pageHeader").hasClass("pageHeaderFacts")?$(".printOptionForLifeStoryAndFacts").removeClass("printOptionForLifeStoryAndFactsHidden"):$(".printOptionForLifeStoryAndFacts").addClass("printOptionForLifeStoryAndFactsHidden")},onClose:function(){$(".researchToolsList").off("click")}}),ui.callout(".editToolsButton",{classes:"calloutMenu calloutMenuEditTools",content:"#editToolsCalloutDomContent"})):ui.callout(".personToolsGuest",{classes:"calloutMenu calloutMenuGuestTools",content:"#guestToolsCalloutDomContent",onOpen:function(){loadCommentCount()},onAfterOpen:function(){$(".guestToolsList").one("click",".iconPrint",function(){$(".personToolsGuest").addClass("printFriendlyViewTriggered"),a()}).one("click",".iconHelp",u),$(".pageHeader").hasClass("pageHeaderStory")||$(".pageHeader").hasClass("pageHeaderFacts")?$(".printOptionForLifeStoryAndFacts").removeClass("printOptionForLifeStoryAndFactsHidden"):$(".printOptionForLifeStoryAndFacts").addClass("printOptionForLifeStoryAndFactsHidden")}}),$(".relationshipLink").each(function(){var e=$(this),n=getPersonAjaxUrlPrefix()+"/tree/"+window.PersonCard.treeId+"/person/"+window.PersonCard.personId+"/getrelationshiptext?page=unknown";$.ajax({url:n,type:"GET",dataType:"json",contentType:"application/json",success:function(n){null!==n.content&&e.html(n.content)},error:function(){}})}),$(document).on("click",".closeModal",function(){ui.modal.close()}).on("click",".closeCallouts",function(){closeCallouts()}),$(".personView .card").on("focus",function(){var e=$(this);e.one("mousemove",function(){e.blur()})}),"openTestQEModal"===window.location.search.substr(1).split("&")[0].split("=")[0]&&quickEdit(),window.matchMedia)&&window.matchMedia("print").addListener(function(e){e.matches?beforePrint():afterPrint()});window.tao&&window.tao.f&&window.tao.f.mbox&&(!0===enablePrototypeMboxes&&window.tao.f.mbox("personPagePrototype"),$("#htMBoxDiv").length>0&&window.tao.f.mbox("us_PersonsHintsTab")),$('#profileImage.icon[role="button"]').html('<span class="hideVisually">'+window.PersonCard.text.chooseProfileImageModalTitle.replace("{personName}",window.PersonCard.name)+"</span>"),window.personScreenType("smart-phone")||$pageHeader.hasClass("pageHeaderStory")?$pageHeader.find("#personCard .userCardEvents").attr("aria-hidden","true").end().find("#personCard .userCardSubTitle").attr("aria-hidden","false"):$pageHeader.find("#personCard .userCardEvents").attr("aria-hidden","false").end().find("#personCard .userCardSubTitle").attr("aria-hidden","true"),AjaxManager.send({url:bannersUrl,success:function(){var e=document.createEvent("Event"),n=document.getElementById("BannerRegion");e.initEvent("openedSiteBanner",!0,!0),n.dispatchEvent(e)}}),$("#myCanvasLogoBtn").on("click",function(){closeCallouts(),ui.guidance(document.getElementById("printFriendlyActions"),{steps:[{classes:"spotlightMyCanvas",content:'<div class="myCanvasPrintCallout" id="myCanvasSpotlightGuidance"><section><p><small>In partnership with Ancestry.com</small></p><h3 class="noTopSpacing">MyCanvas allows you to print your family history.</h3><div class="myCanvasVisual topSpacing" role="presentation"></div><p class="topSpacing">Visit <a href="https://www.mycanvas.com/">MyCanvas.com</a> to create unique keepsakes<span class="breakMin768">using your family history.</span></p><footer class="topSpacing"><a class="ancBtn full printFriendlyBtn topSpacing myCanvasBook">Family history book</a><a class="ancBtn full printFriendlyBtn topSpacing myCanvasCalendar">Calendar</a><a class="ancBtn full printFriendlyBtn topSpacing myCanvasPoster">Family tree poster</a></footer></section><footer><p><small>MyCanvas is owned by Alexander&rsquo;s, a partner of Ancestry.com.<span class="breakMin768">Please review Alexander&rsquo;s <a href="https://www.mycanvas.com/terms-and-conditions/">Terms &amp; Conditions</a> and <a href="https://www.mycanvas.com/privacy-policy/">Privacy Policy</a>.</span></small></p></footer></div>',heading:"",onAfterOpen:function(){void 0!==window.ancestry&&window.ancestry.pub&&(l($(".myCanvasBook"),"book"),l($(".myCanvasPoster"),"poster"),l($(".myCanvasCalendar"),"calendar"))},makeInteractable:!0,scroll:!1,selector:"#myCanvasLogoBtn",spotlight:"#printFriendlyActions"}]})})});
//# sourceMappingURL=person-website-9031d601.min.js.map