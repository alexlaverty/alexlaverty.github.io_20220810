function loadWorkspace(){"use strict";var e=new XMLHttpRequest,t=window.PersonCard?window.PersonCard.URL.personWorkspaceUIContentUrl:"";e.open("GET",t+"&rn"+Math.floor(1e5*Math.random()),!0),e.onload=function(){try{if(e.status>=200&&e.status<400){var t=JSON.parse(e.responseText);if(t.error)console.warn("Person Workspace Failed 01");else{window.getWorkspaceData=JSON.parse(t.data),window.getWorkspaceData=$.extend({},window.getWorkspaceData,{isOpen:window.workspaceSidebarState,openOnLoad:window.workspaceDisplayState,ancestryUISidebar:!0,viewUpdates:window.workspaceViewUpdates});var n=t.html.split("<\/script>",2),a=document.getElementById("WorkspaceComponent"),o=document.createElement("script");o.src=n[1].replace('<script src="',"").replace('">',""),a.appendChild(o);var s=document.createElement("script");s.innerHTML=n[0].replace("<script>",""),a.appendChild(s)}}else console.warn("Person Workspace Failed 02")}catch(e){console.error(e)}},e.onerror=function(){console.warn("Person Workspace Failed 03")},e.send()}$(function(){"use strict";window.workspaceSidebarState&&window.personScreenType("not-large-screen")&&($html.removeClass("sidebarOpen"),window.workspaceSidebarState=!1),loadWorkspace(),$html.on("workspaceOpenOnLoad",function(e){var t=e.originalEvent.data,n=t.activeIndex+(t.activeSections?"."+t.activeSections:"");0===n.length&&(n="closed");var a=new XMLHttpRequest,o=getPersonAjaxUrlPrefix()+"/northstar/personview/personworkspacedisplay?state="+n+"&rn"+Math.floor(1e5*Math.random());a.open("GET",o,!0),a.onload=function(){if(a.status>=200&&a.status<400){a.responseText}else console.warn("Error: myRequest.status: "+a.status)},a.onerror=function(){},a.send(),window.updateWorkspaceHTMLClasses(e.originalEvent.data.activeIndex)}).on("updateTags",function(e){var t=document.querySelector(".pageHeader").classList.contains("bgDark"),n=document.querySelector(".pageHeader").classList.contains("bgColor3"),a=document.querySelector("html").classList.contains("bonsai"),o=e.originalEvent.data,s=$("#personCard #addtag"),r=n&&a;if(o&&o.tags){var i=o.tags.slice(),c=i.length;if(c>0){s.length&&s.remove();var l="";c>3&&(i.length=3),i.forEach(function(e){l+='<li class="topSpacing"><button aria-controls="WorkspaceComponent" aria-expanded="true" class="ancBtn ancBtnRnd sml '+(r?"outline bgDark":"blue")+' textsml toggleWorkspace notPrintable" id="'+e.toLowerCase().replace(/[^\w-]/g,"")+'" type="button"><small class="textClipped">'+e+"</small></button></li>"}),l+='<li class="topSpacing smallLineHeight"><button aria-controls="WorkspaceComponent" aria-expanded="true" aria-label="'+window.PersonCard.text.editTags+'" class="'+(t?"bgDark ":"")+'ancBtn ancBtnRnd sml outline textsml toggleWorkspace notPrintable icon iconEdit" id="edittags" type="button"></button></li>',c>3&&(l+='<li class="topSpacing smallLineHeight pageNav"><button aria-controls="WorkspaceComponent" aria-expanded="true" class="'+(t?"bgDark ":"")+'link textlrg toggleWorkspace notPrintable" id="othertags" type="button">+'+(c-3)+" "+(4===c?window.PersonCard.text.other:window.PersonCard.text.others)+"</button></li>"),document.getElementById("workspaceInfo")?document.getElementById("workspaceInfo").innerHTML=l:document.getElementById("userCardInfoPC").insertAdjacentHTML("afterend",'<ul class="workspaceInfo notPrintable listInline listLong" id="workspaceInfo">'+l+"</ul")}else $("#personCard #workspaceInfo").remove(),$("#addTagSpan").html('<button aria-controls="WorkspaceComponent" aria-expanded="true" class="'+(t?"bgDark ":"")+"ancBtn ancBtnRnd sml "+(r?"outline":"blue")+' toggleWorkspace notPrintable" id="addtag" type="button"><span class="icon iconPlus"></span> <span class="icon iconTag"></span><span class="hideVisually">'+window.PersonCard.text.addMyTreeTags+"&trade;</span></button>")}else window.getPersonCard()}).on("click",'[aria-controls="WorkspaceComponent"]',function(){closeCallouts();var e=$(this),t=-1;e.hasClass("toggleWorkspace")?t=0:e.hasClass("iconNoteAlt")?t=1:e.hasClass("personCommentsBtn")&&(t=window.workspaceView&&window.workspaceView.refWorkspaceContent.refWorkspaceNotes.current?2:1),window.workspaceView&&!0===window.workspaceView.state.isOpen?t===window.workspaceView.refWorkspaceContent.state.activeIndex&&window.workspaceView&&window.workspaceView.handleToggle():window.workspaceView&&window.workspaceView.handleToggle(),$(".workspaceContent .tabs button:nth-child("+(t+1)+")").trigger("click");var n=e.attr("id");if(n&&(e.hasClass("outline")||e.hasClass("blue"))){var a=["ancestry us","personui","personviews","facts"];window.utag&&window.utag.data&&window.utag.data.page_name&&(a=window.utag.data.page_name.split(" : "));var o=a[0]+" : "+a[1]+" : "+a[2]+" : "+a[3];window.utag.link({page_name:o,link_name:"tags "+n,action:"ancestry us : personui : personviews : addtag"+("addtag"===n?"":" : "+n+" : click")})}}).on("workspaceTabsOnOpen",function(e){window.updateWorkspaceHTMLClasses(e.originalEvent.data.activeTab)}).on("workspaceNotesLoaded",function(e){window.showNotesInPersonCard()}).on("click",".comment .undo",function(){setTimeout(function(){loadCommentCount()},1e3)}).on("click",'.comment button[data-ng-click="deleteComment(comment)"]',function(){setTimeout(function(){loadCommentCount()},1e3),window.personAnalyticsTrackClick("deleteComment")}).on("click",".actionButtons",function(e){"deleteComment(comment)"===$(e.target).attr("data-ng-click")&&(setTimeout(function(){loadCommentCount()},1e3),window.personAnalyticsTrackClick("deleteComment")),"addComment()"===$(e.target).attr("data-ng-click")&&(setTimeout(function(){loadCommentCount()},1e3),window.personAnalyticsTrackClick("addComment"))})});
//# sourceMappingURL=person-workspace-ac237833.min.js.map