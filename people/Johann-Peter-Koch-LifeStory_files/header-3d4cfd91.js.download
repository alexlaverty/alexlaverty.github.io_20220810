!function(){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var re="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function oe(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var e,t,o,a=(function(e){e.exports=function(){function r(e){var t=typeof e;return e!==null&&(t==="object"||t==="function")}function c(e){return typeof e==="function"}var e=void 0;if(Array.isArray){e=Array.isArray}else{e=function(e){return Object.prototype.toString.call(e)==="[object Array]"}}var n=e,o=0,t=void 0,a=void 0,i=function e(t,n){w[o]=t;w[o+1]=n;o+=2;if(o===2){if(a){a(E)}else{L()}}};function s(e){a=e}function u(e){i=e}var l=typeof window!=="undefined"?window:undefined,d=l||{},f=d.MutationObserver||d.WebKitMutationObserver,m=typeof self==="undefined"&&typeof process!=="undefined"&&{}.toString.call(process)==="[object process]",p=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function g(){return function(){return process.nextTick(E)}}function h(){if(typeof t!=="undefined"){return function(){t(E)}}return b()}function y(){var e=0;var t=new f(E);var n=document.createTextNode("");t.observe(n,{characterData:true});return function(){n.data=e=++e%2}}function v(){var e=new MessageChannel;e.port1.onmessage=E;return function(){return e.port2.postMessage(0)}}function b(){var e=setTimeout;return function(){return e(E,1)}}var w=new Array(1e3);function E(){for(var e=0;e<o;e+=2){var t=w[e];var n=w[e+1];t(n);w[e]=undefined;w[e+1]=undefined}o=0}function T(){try{var e=Function("return this")().require("vertx");t=e.runOnLoop||e.runOnContext;return h()}catch(e){return b()}}var L=void 0;if(m){L=g()}else if(f){L=y()}else if(p){L=v()}else if(l===undefined&&typeof oe==="function"){L=T()}else{L=b()}function A(e,t){var n=this;var r=new this.constructor(C);if(r[I]===undefined){J(r)}var o=n._state;if(o){var a=arguments[o-1];i(function(){return z(o,r,a,n._result)})}else{j(n,r,e,t)}return r}function S(e){var t=this;if(e&&typeof e==="object"&&e.constructor===t){return e}var n=new t(C);H(n,e);return n}var I=Math.random().toString(36).substring(2);function C(){}var k=void 0,B=1,_=2;function D(){return new TypeError("You cannot resolve a promise with itself")}function M(){return new TypeError("A promises callback cannot return that same promise.")}function x(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function O(e,r,o){i(function(t){var n=false;var e=x(o,r,function(e){if(n){return}n=true;if(r!==e){H(t,e)}else{P(t,e)}},function(e){if(n){return}n=true;R(t,e)},"Settle: "+(t._label||" unknown promise"));if(!n&&e){n=true;R(t,e)}},e)}function U(t,e){if(e._state===B){P(t,e._result)}else if(e._state===_){R(t,e._result)}else{j(e,undefined,function(e){return H(t,e)},function(e){return R(t,e)})}}function N(e,t,n){if(t.constructor===e.constructor&&n===A&&t.constructor.resolve===S){U(e,t)}else{if(n===undefined){P(e,t)}else if(c(n)){O(e,t,n)}else{P(e,t)}}}function H(t,e){if(t===e){R(t,D())}else if(r(e)){var n=void 0;try{n=e.then}catch(e){R(t,e);return}N(t,e,n)}else{P(t,e)}}function q(e){if(e._onerror){e._onerror(e._result)}F(e)}function P(e,t){if(e._state!==k){return}e._result=t;e._state=B;if(e._subscribers.length!==0){i(F,e)}}function R(e,t){if(e._state!==k){return}e._state=_;e._result=t;i(q,e)}function j(e,t,n,r){var o=e._subscribers;var a=o.length;e._onerror=null;o[a]=t;o[a+B]=n;o[a+_]=r;if(a===0&&e._state){i(F,e)}}function F(e){var t=e._subscribers;var n=e._state;if(t.length===0){return}var r=void 0,o=void 0,a=e._result;for(var i=0;i<t.length;i+=3){r=t[i];o=t[i+n];if(r){z(n,r,o,a)}else{o(a)}}e._subscribers.length=0}function z(e,t,n,r){var o=c(n),a=void 0,i=void 0,s=true;if(o){try{a=n(r)}catch(e){s=false;i=e}if(t===a){R(t,M());return}}else{a=r}if(t._state!==k);else if(o&&s){H(t,a)}else if(s===false){R(t,i)}else if(e===B){P(t,a)}else if(e===_){R(t,a)}}function G(n,e){try{e(function e(t){H(n,t)},function e(t){R(n,t)})}catch(e){R(n,e)}}var $=0;function V(){return $++}function J(e){e[I]=$++;e._state=undefined;e._result=undefined;e._subscribers=[]}function W(){return new Error("Array Methods must be provided an Array")}var Y=function(){function e(e,t){this._instanceConstructor=e;this.promise=new e(C);if(!this.promise[I]){J(this.promise)}if(n(t)){this.length=t.length;this._remaining=t.length;this._result=new Array(this.length);if(this.length===0){P(this.promise,this._result)}else{this.length=this.length||0;this._enumerate(t);if(this._remaining===0){P(this.promise,this._result)}}}else{R(this.promise,W())}}e.prototype._enumerate=function e(t){for(var n=0;this._state===k&&n<t.length;n++){this._eachEntry(t[n],n)}};e.prototype._eachEntry=function e(t,n){var r=this._instanceConstructor;var o=r.resolve;if(o===S){var a=void 0;var i=void 0;var s=false;try{a=t.then}catch(e){s=true;i=e}if(a===A&&t._state!==k){this._settledAt(t._state,n,t._result)}else if(typeof a!=="function"){this._remaining--;this._result[n]=t}else if(r===te){var c=new r(C);if(s){R(c,i)}else{N(c,t,a)}this._willSettleAt(c,n)}else{this._willSettleAt(new r(function(e){return e(t)}),n)}}else{this._willSettleAt(o(t),n)}};e.prototype._settledAt=function e(t,n,r){var o=this.promise;if(o._state===k){this._remaining--;if(t===_){R(o,r)}else{this._result[n]=r}}if(this._remaining===0){P(o,this._result)}};e.prototype._willSettleAt=function e(t,n){var r=this;j(t,undefined,function(e){return r._settledAt(B,n,e)},function(e){return r._settledAt(_,n,e)})};return e}();function X(e){return new Y(this,e).promise}function K(o){var a=this;if(n(o))return new a(function(e,t){for(var n=o.length,r=0;r<n;r++)a.resolve(o[r]).then(e,t)});else return new a(function(e,t){return t(new TypeError("You must pass an array to race."))})}function Z(e){var t=new this(C);return R(t,e),t}function Q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ee(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var te=function(){function t(e){this[I]=V();this._result=this._state=undefined;this._subscribers=[];if(C!==e){typeof e!=="function"&&Q();this instanceof t?G(this,e):ee()}}t.prototype.catch=function e(t){return this.then(null,t)};t.prototype.finally=function e(t){var n=this;var r=n.constructor;if(c(t)){return n.then(function(e){return r.resolve(t()).then(function(){return e})},function(e){return r.resolve(t()).then(function(){throw e})})}return n.then(t,t)};return t}();function ne(){var e=void 0;if(void 0!==re)e=re;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=te}return te.prototype.then=A,te.all=function(e){return new Y(this,e).promise},te.race=function(o){var a=this;return n(o)?new a(function(e,t){for(var n=o.length,r=0;r<n;r++)a.resolve(o[r]).then(e,t)}):new a(function(e,t){return t(new TypeError("You must pass an array to race."))})},te.resolve=S,te.reject=function(e){var t=new this(C);return R(t,e),t},te._setScheduler=function(e){a=e},te._setAsap=function(e){i=e},te._asap=i,te.polyfill=function(){var e=void 0;if(void 0!==re)e=re;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=te},te.Promise=te}()}(e={exports:{}}),e.exports),g="navTrees",p="navHints",f="navMessages",i="navDna",s="user",c="navMessagesCount",u="hmtTwo",l="HMT1",d="Hints-Badge-Active",m="Hints-Badge-Inactive",h="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==h&&h,y="URLSearchParams"in h,v="Symbol"in h&&"iterator"in Symbol,b="FileReader"in h&&"Blob"in h&&function(){try{return new Blob,!0}catch(e){return!1}}(),w="FormData"in h,E="ArrayBuffer"in h;function T(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function L(e){return"string"!=typeof e&&(e=String(e)),e}function A(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v&&(e[Symbol.iterator]=function(){return e}),e}function S(t){this.map={},t instanceof S?t.forEach(function(e,t){this.append(t,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function I(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function C(n){return new Promise(function(e,t){n.onload=function(){e(n.result)},n.onerror=function(){t(n.error)}})}function k(e){var t=new FileReader,n=C(t);return t.readAsArrayBuffer(e),n}function B(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function _(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,(this._bodyInit=e)?"string"==typeof e?this._bodyText=e:b&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:w&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:y&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():E&&b&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=B(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):E&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=B(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b&&(this.blob=function(){var e=I(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=I(this);return e?e:ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)}return this.blob().then(k)}),this.text=function(){var e,t,n=I(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=C(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},w&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}E&&(t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&-1<t.indexOf(Object.prototype.toString.call(e))}),S.prototype.append=function(e,t){e=T(e),t=L(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},S.prototype.delete=function(e){delete this.map[T(e)]},S.prototype.get=function(e){return e=T(e),this.has(e)?this.map[e]:null},S.prototype.has=function(e){return this.map.hasOwnProperty(T(e))},S.prototype.set=function(e,t){this.map[T(e)]=L(t)},S.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},S.prototype.keys=function(){var n=[];return this.forEach(function(e,t){n.push(t)}),A(n)},S.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),A(t)},S.prototype.entries=function(){var n=[];return this.forEach(function(e,t){n.push([t,e])}),A(n)},v&&(S.prototype[Symbol.iterator]=S.prototype.entries);var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function M(e,t){if(!(this instanceof M))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r=(t=t||{}).body;if(e instanceof M){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new S(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new S(t.headers)),this.method=(n=t.method||this.method||"GET",e=n.toUpperCase(),-1<D.indexOf(e)?e:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r),"GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache||((t=/([?&])_=[^&]*/).test(this.url)?this.url=this.url.replace(t,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime())}function x(e){var n=new FormData;return e.trim().split("&").forEach(function(e){var t;e&&(e=(t=e.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),n.append(decodeURIComponent(e),decodeURIComponent(t)))}),n}function O(e,t){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{},this.type="default",this.status=void 0===t.status?200:t.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in t?t.statusText:"",this.headers=new S(t.headers),this.url=t.url||"",this._initBody(e)}M.prototype.clone=function(){return new M(this,{body:this._bodyInit})},_.call(M.prototype),_.call(O.prototype),O.prototype.clone=function(){return new O(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new S(this.headers),url:this.url})},O.error=function(){var e=new O(null,{status:0,statusText:""});return e.type="error",e};var U=[301,302,303,307,308];O.redirect=function(e,t){if(-1===U.indexOf(t))throw new RangeError("Invalid status code");return new O(null,{status:t,headers:{location:e}})};var N=h.DOMException;try{new N}catch(e){(N=function(e,t){this.message=e,this.name=t;e=Error(e);this.stack=e.stack}).prototype=Object.create(Error.prototype),N.prototype.constructor=N}function H(r,i){return new Promise(function(o,e){var t=new M(r,i);if(t.signal&&t.signal.aborted)return e(new N("Aborted","AbortError"));var a=new XMLHttpRequest;function n(){a.abort()}a.onload=function(){var e,n,t={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",n=new S,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(e){var t=e.split(":"),e=t.shift().trim();e&&(t=t.join(":").trim(),n.append(e,t))}),n)};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;setTimeout(function(){o(new O(r,t))},0)},a.onerror=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.ontimeout=function(){setTimeout(function(){e(new TypeError("Network request failed"))},0)},a.onabort=function(){setTimeout(function(){e(new N("Aborted","AbortError"))},0)},a.open(t.method,function(t){try{return""===t&&h.location.href?h.location.href:t}catch(e){return t}}(t.url),!0),"include"===t.credentials?a.withCredentials=!0:"omit"===t.credentials&&(a.withCredentials=!1),"responseType"in a&&(b?a.responseType="blob":E&&t.headers.get("Content-Type")&&-1!==t.headers.get("Content-Type").indexOf("application/octet-stream")&&(a.responseType="arraybuffer")),!i||"object"!=typeof i.headers||i.headers instanceof S?t.headers.forEach(function(e,t){a.setRequestHeader(t,e)}):Object.getOwnPropertyNames(i.headers).forEach(function(e){a.setRequestHeader(e,L(i.headers[e]))}),t.signal&&(t.signal.addEventListener("abort",n),a.onreadystatechange=function(){4===a.readyState&&t.signal.removeEventListener("abort",n)}),a.send(void 0===t._bodyInit?null:t._bodyInit)})}H.polyfill=!0,h.fetch||(h.fetch=H,h.Headers=S,h.Request=M,h.Response=O);function q(e){if(200<=e.status&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function P(e){var t=JSON.parse(e);return t.displayHintsPreferences?((e=t).menuitems.forEach(function(e){e.text=e.text.replace("{treeName}",e.treeName)}),e):t}var R=function(t){var e,n=window.navigator,r=/(?:Windows|compatible).{0,80}?\bTrident\W[78]\.\d/i.test((void 0===n?{userAgent:""}:n).userAgent);return fetch(t.url,(e=r,n={credentials:"include"},r=new Headers({pragma:"no-cache","cache-control":"must-revalidate",expires:-1}),e&&(n.headers=r),n)).then(q).then(function(e){return e.text()}).then(function(e){return t.middlewareCall&&t.middlewareCall(JSON.parse(e)),e}).then(function(e){return function(e,t){if(""===e)throw new Error("NO RESPONSE TEXT");return e.replace(/\${(.+?)}/gm,function(e){return t[e.replace(/[{}$]/gi,"")]})}(e,t.langResources)}).then(t.contentTypeParser||P).then(function(e){t.success(e)}).catch(function(e){"NO RESPONSE TEXT"===e.message?t.success({}):t.error&&t.error(e)})},j=5e3,F=6e4;function z(e,t,n,r,o,a,i){var s,c=Date.now(),u=t.url,l=t.langResources,t=t.lastReqTimeVals;(s=e,(t=t)?t.filter(function(e){return e.key===s})[0].lastRequestedTime:0)+j<c&&(r(e,Date.now()),i={url:u,langResources:l,middlewareCall:i,success:function(e){n(null,e)}},o&&(i.error=function(e){return o(e)}),a&&(i.contentTypeParser=a),R(i))}function G(e,t,n,r,o,a){var i,s=-1;!function(){try{var e=window.localStorage,t="__storage_test__";return e.setItem(t,t),e.removeItem(t),1}catch(e){return}}()||0===document.location.pathname.toLowerCase().indexOf("/messaging")||(i=JSON.parse(window.localStorage.getItem("unreadmessagecount")))&&i.timestamp&&i.timestamp>(new Date).getTime()-F&&void 0!==i.count&&n(!1,{unreadCount:s=i.count,doNotStore:!0}),-1===s&&z(e,t,n,r,o,a)}var V="Yesterday",J={en:"Yesterday",af:"Gister",es:"Ayer",fr:"Hier",de:"Gestern",it:"Ieri",ru:"Вчера",zh:"昨",vi:"Hôm qua",sv:"I går"};function W(e,t){return e.getFullYear()===t.getFullYear()}function Y(e,t){return W(n=e,r=t)&&n.getMonth()===r.getMonth()&&e.getDate()===t.getDate();var n,r}function X(e,t){var n,r,o=new Date(1e3*t),t=new Date;return W(o,t)?Y(o,t)?(r=e,o.toLocaleTimeString(r,{hour:"2-digit",minute:"2-digit"})):(r=o,Y(new Date(t.getTime()-864e5),r)?(n=(n=e).split("-")[0],J[n]||V):(n=e,o.toLocaleDateString(n||"en-US",{day:"numeric",month:"long"}))):(e=e,o.toLocaleDateString(e||"en-US",{day:"numeric",month:"long",year:"numeric"}))}var K=/^[a-z\u00C0-\u017F]/i,Z=["bgDark bgColor1","bgDark bgColor2","bgDark bgColor3","bgDark bgColor4","bgDark bgColor5","bgDark bgColor6","bgDark bgColor7","bgColor8","bgDark bgColor9","bgDark bgColor10"];var Q,ee=function(r,o,a){var i=+new Date+(o||2e3);a=a||100;var s=function(e,t){var n=r();n?e(n):+new Date<i?setTimeout(s,a,e,t):t(new Error("timed out for ".concat(r,": ").concat(o,", ").concat(a)))};return new Promise(s)};(Q=window.Element).prototype.closest||(Q.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),r=this;do{for(t=n.length;0<=t&&n.item(t)!==r;)--t}while(t<0&&(r=r.parentElement));return r}),Q.prototype.matches||(Q.prototype.matches=Q.prototype.matchesSelector||Q.prototype.mozMatchesSelector||Q.prototype.msMatchesSelector||Q.prototype.oMatchesSelector||Q.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;0<=n&&t.item(n)!==this;)--n;return-1<n}),window.NodeList&&!window.NodeList.prototype.forEach&&(window.NodeList.prototype.forEach=function(e,t){for(var n=t||window,r=0;r<this.length;r++)e.call(n,this[r],r,this)}),[Q.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(e){Object.prototype.hasOwnProperty.call(e,"remove")||Object.defineProperty(e,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){null!==this.parentNode&&this.parentNode.removeChild(this)}})});function te(e){for(var t=e,n=[];t&&t.parentNode&&t!==t.parentNode;)n.push(t.parentNode),t=t.parentNode;return n}var ne={deleteCookie:function(e,t,n,r,o){r=r||window,o=o||document,r=t||r.location.hostname.replace(/.+?\./,"."),o.cookie="".concat(e,"=; expires=").concat("Thu, 01 Jan 1970 00:00:00 UTC","; path=").concat(n||"/","; domain=").concat(r)},getCookie:function(e,t){for(var n="".concat(e,"="),r=(t||document).cookie.split(";"),o=r.length,a="";o--&&0<o;)if(0===(a=r[o-1].trim()).indexOf(n)){a=a.substring(n.length,a.length);break}return a},getAllParentNodes:te,getRandomNumber:function(e,t){var n=Math.floor;return isNaN(e)||isNaN(t)?Date.now().toString()+n(1e3*Math.random()+1):n(Math.random()*(1+t-e)+e)},keyCodes:{down:40,enter:13,esc:27,left:37,leftBracket:219,right:39,rightBracket:221,shift:16,space:32,tab:9,up:38},setCookie:function(e,t,n,r,o,a,i){a=a||window,i=i||document,a=r||a.location.hostname.replace(/.+?\./,"."),a=r?"domain=".concat(r,"; "):"",r=o||"/",r=o?"path=".concat(r,"; "):"",(o=new Date).setTime(o.getTime()+864e5*(n||90)),o="expires=".concat(o.toUTCString()),r="".concat(e,"=").concat(t,"; ").concat(o,";").concat(a).concat(r),i.cookie=r},setDictionaryCookie:function(e,t,n,r,o,a){var i,s=e.toUpperCase(),c=t.toUpperCase(),u=this.getCookie(s);u=null==u?"".concat(c,"=").concat(n):-1===(e=(i=u.toLowerCase()).indexOf("".concat(c.toLowerCase(),"=")))?(0<u.length&&(u="".concat(u,"&")),"".concat(u).concat(c,"=").concat(n)):-1===(t=i.indexOf("&",e))?(0===e?"":"".concat(u.substring(0,e))).concat(c,"=").concat(n):(i=u,u="",0<e&&(u=i.substring(0,e)),"".concat(u).concat(c,"=").concat(n).concat(i.substring(t))),this.setCookie(s,u,r,o,a)},visible:function(e){var t=!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length),e=te(e).push(e),e=!Array.prototype.filter.call(e,function(e,t){return"hidden"===window.getComputedStyle(t).visibility}).length;return t&&e}};function ae(){var e;-1===window.location.host.indexOf(".ancestry.")&&(e=console).warn.apply(e,arguments)}var ie="Using fallback window.ui methods and polyfills. Update to ancestry-ui@1.0.0 or greater.";var se=function(e){return-1<["institution","library","classroom","conference"].indexOf(e)},ce=/((([a-zA-Z]+(-[a-zA-Z0-9]+){0,2})|\*)(;q=[0-1](\.[0-9]+)?)?)*/g;var ue,le,de,fe,me,pe,ge,he,ye,ve,be,we,Ee,Te=function(e){return e?(e||"").match(ce).map(function(e){if(e){var t=e.split(";"),n=t[0].split("-"),e=3===n.length;return{code:n[0],script:e?n[1]:null,region:e?n[2]:n[1],quality:t[1]?parseFloat(t[1].split("=")[1]):1}}}).filter(function(e){return e}).sort(function(e,t){return t.quality-e.quality}):null};function Le(t,e){le.addLastRequestedTime||r(le,{lastReqTimeVals:[{key:s,lastRequestedTime:null},{key:g,lastRequestedTime:null},{key:p,lastRequestedTime:null},{key:f,lastRequestedTime:null},{key:i,lastRequestedTime:null},{key:c,lastRequestedTime:null}]}),le.lastReqTimeVals&&(le.lastReqTimeVals.filter(function(e){return e.key===t})[0].lastRequestedTime=e)}function Ae(){return function(e){for(var t=0,n=0;n<e.length;n++)t=31*t+e.charCodeAt(n),t|=0;return t}((document.cookie||"").split(";").map(function(e){return e.replace(/^\s+/,"")}).find(function(e){return-1<e.indexOf("ATT=")})||"")}function Se(e,t){!function(e,t){if(window.sessionStorage&&"function"==typeof window.sessionStorage.setItem)try{window.sessionStorage.setItem(e,t)}catch(e){return}}(e,"".concat(t,":").concat(Ae()))}function Ie(e,t){var n=t.langResources,r=t.lastReqTimeVals,o={};return o[s]=t.urlGetNewUserInfo,o[g]=t.urlGetNewTrees,o[f]=t.urlGetMessages,o[i]=t.urlGetNewDnaLinks,o[c]=t.urlGetMessageCount,o[u]="".concat(t.uhomeAggUrlBase,"/user/hints/menuForTreeClusterByPerson"),{langResources:n,lastReqTimeVals:r,url:o[e]||""}}function Ce(e,t,n){var r="";return e&&t?r="".concat(ke(e)," - ").concat(ke(t)):e?r="".concat(ke(e)," - "):t&&(r="- ".concat(ke(t))),n?"<em>".concat(r,"</em>"):r}function ke(e){return e&&e.replace?e.replace(ve,function(e){return be[e]}):e}function Be(){var e,t,n;we||(window.addEventListener("resize",function(){clearTimeout(n),n=setTimeout(function(){document.querySelectorAll("#nav .initialized[aria-controls]").forEach(function(e){var t;pe.visible(e)||(e.classList.remove("initialized"),e.removeEventListener("keyup",je),e.removeEventListener("keydown",Re),ye[e.id]&&ye[e.id].contentElement&&(t="navMobile"===e.id?"nav":"navMobileMenu",document.getElementById(t).appendChild(ye[e.id].contentElement.firstChild)),Ue(e,"destroy"))}),mt()},1e3)}),we=!0),(t=document.getElementById("navSkip"))&&(t.removeEventListener("keydown",Ge),t.addEventListener("keydown",Ge)),window.acom&&window.acom.bus?window.acom.bus.on("PersonHintTab::hintcount_change::pending",function(){header.updateUserData("hints")}):setTimeout(function(){window.acom&&window.acom.bus&&window.acom.bus.on("PersonHintTab::hintcount_change::pending",function(){header.updateUserData("hints")})},500),_e(),e=document.getElementById("navDna"),t=document.getElementById("navDnaMenu"),le.isLoggedIn&&e&&e.hasAttribute("aria-controls")&&(e.addEventListener("focusin",Ve),e.addEventListener("mouseenter",Ve),t&&(t.addEventListener("focusin",Ve),t.addEventListener("mouseenter",Ve),t.addEventListener("touchstart",Ve))),le.addTracking&&document.body.addEventListener("click",De),function(){for(var e=document.getElementById("nav"),t=e.getAttribute("data-nav-version"),n=e.getElementsByClassName("navSubMenu"),r=document.querySelector(".navMobileMenu"),o=n.length-1;0<o;o--)n[o].classList.add(t);mt(),e.addEventListener("focusout",He),r&&r.addEventListener("click",Ne)}()}function _e(e){e=(0<arguments.length&&void 0!==e?e:document).querySelector(".navLanguageToggle");e&&(e.removeEventListener("click",Fe),e.addEventListener("click",Fe))}function De(e){var t=e.target,n=t&&t.closest("[data-tracking-name]"),e=n&&(n.closest(".navSubMenu, .navMobileMenu")||n.closest(".nav"));n&&e&&("Hints"===(e=(t=n.closest(".navSubMenu"))&&t.id?t.id.replace(/^nav|Menu$/g,""):null)&&(e=document.getElementById(p).getAttribute("data-tracking-name")),"Traits"===n.getAttribute("data-tracking-name")&&((t=We())[le.userId]="false",pe.setCookie("showNewTagForTraitsLatest",encodeURIComponent(JSON.stringify(t)),60)),n=n.getAttribute("data-tracking-name"),e=e,window.utag?window.utag.link({action:"ancestry : navigation : ".concat(n),link_name:n,link_value:e?"".concat(e," : ").concat(n):n,mix_event_name:"header_nav_click"}):ae("Omniture Unavailable : ".concat(n)))}function Me(e){var t=document.getElementById("navLinkReferFriend");t&&(e?t.classList.add("noDisplay"):t.classList.remove("noDisplay"))}function xe(){for(var e,n=document.getElementById("navHintsList").getElementsByTagName("li"),r=0;r<n.length;r++)(e=n[r].getElementsByTagName("a")[0]).classList.contains("navUnread")&&function(){var t=e.getAttribute("href");n[r].addEventListener("click",function(e){return e.preventDefault(),e={url:le.urlClearAllHints,success:function(e){e&&document.querySelectorAll("#navHints .badge").forEach(function(e){e.classList.add("noDisplay")})},error:function(e){window.newrelic.noticeError("Unable to clear hints count: ".concat(e))}},R(e).then(function(){return window.open(t,"_self"),!1}).catch(function(){return window.open(t,"_self"),!1})},!1)}()}function Oe(e){var t=e.target.querySelector(".badge[data-badge-viewed]");e.target.closest("a")&&t&&(t.setAttribute("data-badge-clicked","true"),Xe())}function Ue(e,t){var n;pe.callout&&e.id&&ye[e.id]?(n="position"!==t||ye[e.id][t]?t:"reposition",ye[e.id][n](),"destroy"===t&&(ye[e.id]=null)):window.$&&window.$.callout&&$(e).callout(t)}function Ne(e){var t=e.target,e=t.closest(".calloutMenuTitle"),n=t.closest(".navSubMenu");e&&n&&(e&&("false"===(t=e.getAttribute("aria-expanded"))?e.setAttribute("aria-expanded","true"):"true"===t&&e.setAttribute("aria-expanded","false")),n.parentNode.querySelectorAll(".navSubMenu").forEach(function(e){e===n?e.classList.toggle("navSubMenuExpanded"):e.classList.remove("navSubMenuExpanded")}))}function He(){var r=document.querySelector(".calloutTrigger.active");r&&setTimeout(function(){var e=document.activeElement,t=e.closest(".calloutContent"),n=r.classList.contains("active");e&&n&&!t&&Ue(r,"close")},200)}function qe(){var e,a=Date.now(),i=e=!!(e=Je())[le.userId]&&e[le.userId];document.querySelectorAll("#navMobileMenu .navSubMenu").forEach(function(e){var o=0;e.querySelectorAll(".badge").forEach(function(e){var t=e.getAttribute("data-badge-id"),n=Date.parse(e.getAttribute("data-badge-expiration")),r=!0;(i&&i.viewed&&-1!==i.viewed.indexOf(t)||n<=a)&&(r=!1,e.setAttribute("data-badge-viewed","true")),!i||i&&!i.clicked||i&&i.clicked&&-1===i.clicked.indexOf(t)?a<n&&e.classList.remove("noDisplay"):e.setAttribute("data-badge-clicked","true"),r&&(o+=1)}),0<o&&(e=e.id.replace("Menu",""),(e=document.getElementById(e)).querySelectorAll(".badge").forEach(function(e){e.remove()}),e.insertAdjacentHTML("beforeend"," ".concat(Ee.templateBadge.replace("{text}",o))))})}function Pe(e){ae("Error loading data for key. Removing callout:",e),Ue(document.getElementById(e),"destroy")}function Re(e){var t=e.currentTarget,t=document.querySelector("#".concat(t.getAttribute("aria-controls"))),t=t?t.querySelectorAll("a"):[],n=[];t.forEach(function(e){pe.visible(e)&&n.push(e)}),!e.shiftKey&&e.keyCode===pe.keyCodes.tab&&n.length&&(n[0]&&n[0].focus(),e.preventDefault(),e.stopPropagation()),e.keyCode===pe.keyCodes.space&&e.preventDefault()}function je(e){e.keyCode===pe.keyCodes.space&&Ue(e.currentTarget,"open")}function Fe(e){var t=e.currentTarget.getAttribute("data-language-id"),e=e.currentTarget.getAttribute("data-language-name");pe.setDictionaryCookie("VARS","LCID",t,3560),pe.setDictionaryCookie("VARS","LCISONAME",e,3560);e=window.location.href,t=le.altLangUrl||e.replace(/lcid=\d{4}/gi,"lcid=".concat(t));e===t?window.location.reload():window.location=t}function ze(e){var t=e.target,n=document.getElementById("navSeeAllHintsMenu");n&&(n.classList.contains("noDisplay")?(t.setAttribute("aria-expanded","true"),n.classList.remove("noDisplay"),e=le.numOfTrees?45*le.numOfTrees:45,document.getElementById("navHintsMenu").scrollTop+=e):(t.setAttribute("aria-expanded","false"),n.classList.add("noDisplay")))}function Ge(e){var t,n=document.querySelector(e.target.getAttribute("href"));e.keyCode!==pe.keyCodes.enter&&e.keyCode!==pe.keyCodes.space||(n.getAttribute("tabindex")||(t=function(){n.removeAttribute("tabindex"),n.removeEventListener("blur",t)},n.setAttribute("tabindex","-1"),n.addEventListener("blur",t)),n.focus(),e.preventDefault(),e.stopPropagation())}function $e(e){e=document.getElementById("".concat(e,"Loading"));e&&(e.setAttribute("aria-busy","false"),e.classList.add("noDisplay"))}function Ve(){Ke(),z(i,Ie(i,le),Qe,Le,null,null)}function Je(){var e=pe.getCookie("navbadges");return e=!!e.length&&JSON.parse(e)}function We(){return pe.getCookie("showNewTagForTraitsLatest")?JSON.parse(decodeURIComponent(pe.getCookie("showNewTagForTraitsLatest"))):{}}function Ye(e){e.target.closest("a")&&e.currentTarget.removeEventListener("click",Ye)}function Xe(){var e=Je()||{},t=[],n=[];document.querySelectorAll(".navSubMenu").forEach(function(e){e.querySelectorAll(".badge[data-badge-id]").forEach(function(e){e.getAttribute("data-badge-viewed")&&t.push(e.getAttribute("data-badge-id")),e.getAttribute("data-badge-clicked")&&n.push(e.getAttribute("data-badge-id"))})}),t.length||n.length?(e[le.userId]={},t.length&&(e[le.userId].viewed=t),n.length&&(e[le.userId].clicked=n),pe.setCookie("navbadges",JSON.stringify(e),90)):pe.deleteCookie("navbadges")}function Ke(){var e=document.getElementById("navDna"),t=document.getElementById("navDnaMenu");e&&(e.removeEventListener("focusin",Ve),e.removeEventListener("mouseenter",Ve),t&&(t.removeEventListener("focusin",Ve),t.removeEventListener("mouseenter",Ve),t.removeEventListener("touchstart",Ve)))}function Ze(){Ke(),document.getElementById("nav").addEventListener("focusout",He),function(){var e=document.querySelector(".navMobileMenu");e&&e.removeEventListener("click",Ne);e=document.getElementById("navSeeAllHintsIn");e&&e.removeEventListener("click",ze)}(),document.body.removeEventListener("click",De)}function Qe(e,t){var n=t.results||{};if(!e&&n.menuitems){var r=document.getElementById("navDna"),o=document.querySelector(".navDnaMenu"),a="";if(r&&!o&&pe&&pe.callout&&((i=pe.callout.getInstance(r.getAttribute("data-ui-id")))&&(o=i.contentElement)),!r||!o)return!1;for(var i,s=n.menuitems.length,c=Date.parse(le.showNewTagForTraitsStartDate),u=Date.parse(le.showNewTagForTraitsStartDate)+5184e6,l=new Date,d=(i=We())[le.userId]?i[le.userId]:"true",f=0;f<s;f+=1){var m=n.menuitems[f],p=m.trackingName||"DNA Menu Item",g="";m.text&&-1!==m.text.indexOf("Traits")&&"true"===d&&c<l.getTime()&&u>l.getTime()&&(g=' <span class="badge badgeColor1">New</span>'),a+='<li><a data-tracking-name="'.concat(p,'" href="').concat(m.url,'" ').concat(n.target?'target="'.concat(n.target):"",">").concat(ke(m.text)).concat(g,"</a></li>")}o.querySelector("ul").innerHTML=a,ye.navDna&&ee(function(){return 0!==o.querySelector("ul").offsetWidth},3e3,15).then(function(){return Ue(r,"position")}).catch(function(){return console.log("timed out for polling DNA list rendering")})}else ae("Error loading DNA's submenu",e)}function et(e,t,n){return 1<e&&(t.length&&(t+=", "),t+=ke(n)),t}function tt(e,t,n,r,o){var a,i,s=t.birth,c=t.death,u=t.name,l=t.treeId,d=t.unread,f=t.types,m=t.url,p=t.treeName,g=t.title,t=t.type,o="https://".concat(o).concat(m),m="";if("template_hintMenuTwo"===n)return m=Ce(s,c,!1),l&&(m=et(r,m,e.trees.find(function(e){return e.id===l}).text||"")),f&&f.length&&(e=f,a=le.langResources,i="",1===e.length?i=a.HintType.replace("{hintType}",a["HMT_".concat(e[0])]):1<e.length&&(f=e.slice(0,-1).map(function(e){return a["HMT_".concat(e)]}).join(", "),i=a.ListHintTypes.replace("{delimitedHintTypes}",f).replace("{lastHintsType}",a["HMT_".concat(e.slice(-1))])),i="string"==typeof(i=i)?i.charAt(0).toUpperCase()+i.slice(1):""),Ee[n].replace("{url}",o).replace("{unread}",d?"navUnread":"").replace("{title}",ke(u)).replace("{meta}",m).replace("{badge}",d?Ee.templateUnreadGreenIndicator:"").replace("{types}",i).replace("{tracking}","Hint".concat(d?" New":""));t={Person:"Person",Photo:"Image",Story:"Story"}[t]||"Note";return m=et(r,m=Ce(s,c,!0),p),Ee.templateNotification.replace("{url}",o).replace("{unread}",d?"navUnread":"").replace("{unreadMessage}","").replace("{image}",Ee.templateNotificationUsercardIcon.replace("{icon}",t)).replace("{title}",ke(g)).replace("{badge}",d?Ee.templateBadge.replace("{text}",Ee.templateNew):"").replace("{subtitle}",ke(u)).replace("{meta}",m).replace("{tracking}","Hint".concat(d?" New":""))}function nt(e,t){var n,r=document.getElementById(p),o=r.host,a=document.getElementById("navHintsMenu");if((n=a)&&(n.classList.add("hmtExperience"),n.classList.add("hintMenuTwo")),!r||!a)return!1;var i=t?t.menuitems.length:0,s=t?t.trees.length:0;if(le.numOfTrees=s,0<i){var c="";le&&"false"!==le.isHintMenuFeedbackEnabled&&(document.getElementById("navGiveFeedback").querySelector("a").href="".concat(le.hintsFeedbackLink,"?ucdmid=").concat(le.userId),document.getElementById("navGiveFeedback").classList.remove("noDisplay"),document.getElementById("navHasHints").classList.add("smallHintsArea"));for(var u=0;u<i;u+=1)c+=tt(t,t.menuitems[u],"template_hintMenuTwo",s,o);document.getElementById("originalNavHintsMenuTitle").classList.remove("noDisplay"),document.getElementById("navHintsList").innerHTML=c,document.getElementById("navHasHints").classList.remove("noDisplay"),xe()}else document.getElementById("navHasHints").classList.add("noDisplay"),document.getElementById("navSeeAllHintsMenu").classList.remove("noDisplay");if(1<s){for(var l,d="",f=0;f<s;f+=1)l="https://".concat(o).concat(t.trees[f].url),d+='<li><a data-tracking-name="Hints in Specific Tree" href="'.concat(l,'">').concat(ke(t.trees[f].text),"</a></li>");document.getElementById("navSeeAllHintsMenu").innerHTML=d,document.getElementById("navSeeAllHints").classList.add("noDisplay"),document.getElementById("navSeeAllHintsIn").classList.remove("noDisplay")}else{1===s?((r=document.getElementById("navSeeAllHints")).classList.remove("noDisplay"),0<(a=document.getElementsByClassName("recentHintsListItem")).length&&a[0].classList.add("noDisplay"),document.getElementById("navSeeAllHintsIn").classList.add("noDisplay"),a="https://".concat(o).concat(t.trees[0].url),r.href=a):(document.getElementById("navSeeAllHints").classList.remove("noDisplay"),document.getElementById("navSeeAllHintsIn").classList.add("noDisplay"))}$e("navHintsMenu")}function rt(e,t){if(e)Pe(f);else{var n=le.langResources,r=le.cultureCode,o=document.getElementById(f),e=document.getElementById("".concat(f,"Menu"));if(!o||!e||!t.menuitems)return!1;var a=t.menuitems.length;if(0<a){t.menuitems.sort(function(e,t){return t.dateTimestamp-e.dateTimestamp});for(var i="",s=0;s<a;s+=1){var c=t.menuitems[s],u=(d=le.userId,u=c.senderUcdmid,l=c.unread,u=u===d,d="",u&&!l?d="icon iconCheck":!u&&l&&(d="bold"),d),l=Ee.templateNotification.replace("{url}",c.url).replace("{unread}",c.unread?"navUnread":"").replace("{unreadMessage}",c.deleted?"":u).replace("{unreadDeletedMessage}",c.deleted?u:"").replace("{tracking}","Message".concat(c.unread?" New":"")),d="";c.deleted&&(c.text="",d=void 0!==c.senderUcdmid&&c.senderUcdmid.length?c.senderUcdmid===le.userId?n.MessageDeletedLoggedInUser:(u=c.firstname&&c.firstname.length?c.firstname:c.username,n.MessageDeletedOtherUser.replace("{displayName}",u)):n.MessageDeletedUnknownUser),i+=l=(l=c.img&&c.img.length?l.replace("{image}",Ee.templateNotificationUsercardImage.replace("{imageUrl}",c.img)):l.replace("{image}",Ee.templateNotificationUsercardInitials.replace("{displayName}",ke(c.username)).replace("{bgClasses}",ke(function(e){var t=Math.abs,n=0;if("string"!=typeof e)return Z[0];for(var r=0;r<e.length;r++)n=4294967295&31*n+e.charCodeAt(r);return n=t(n),Z[n%Z.length]}(c.username))).replace("{userInitials}",ke(function(e){if(!e)return"";var t=e.toUpperCase().split(/[\s+-]/),n=[],r=[];if(!t||1===t.length)return 1===e.length?e:e.substr(0,2).toUpperCase();for(var o=0;o<t.length;o++)K.test(t[o])&&-1===t[o].indexOf(".")&&n.push(t[o]);if(1<=n.length&&r.push(n[0].substr(0,1)),2<=n.length){for(var a=!1,i=1;i<n.length;i++)n[i].match(/.\./)||(a=!0,r.push(n[i].substr(0,1)));a||r.push(n[1].substr(0,1))}return e=r.length,r[0]+r[e-1]}(c.username))))).replace("{title}",ke(c.username)).replace("{badge}","").replace("{subtitle}",ke(c.text)).replace("{deletedMessageText}",ke(d)).replace("{meta}",ke(X(r,c.dateTimestamp)))}document.getElementById("navMessagesList").innerHTML=i,document.getElementById("navNoMessages").classList.add("noDisplay"),document.getElementById("navHasMessages").classList.remove("noDisplay")}else document.getElementById("navNoMessages").classList.remove("noDisplay"),document.getElementById("navHasMessages").classList.add("noDisplay");$e("navMessagesMenu")}}function ot(e){e=document.getElementById("".concat(e,"DefaultList"));e&&e.classList.remove("noDisplay")}function at(){$e("navTreesMenu"),ot(g)}function it(e,t){if(e)Pe(g);else{var n=document.getElementById(g),r=n.host,o=document.getElementById("".concat(g,"Menu"));if(!n||!o)return!1;t&&"string"==typeof t&&(t=JSON.parse(t));for(var a,i=t.mostRecentlyViewedTreeId||!1,s=t.menuitems.length,c="",u=0;u<s;u+=1){var l=t.menuitems[u],d=l.url,f="https://".concat(r).concat(d),m=0<=d.indexOf("family-tree/tree")?"go to tree":"Family Tree";"/family-tree/tree"===d&&(m="create and manage trees");var p="";!l.text||-1===l.text.indexOf("StoryScout")||"5538"!==le.partnerId&&"5544"!==le.partnerId||0<Date.parse(le.storyScoutBadgeEndDate)-(new Date).getTime()&&(p=' <span class="badge badgeColor1">New</span>');d=i&&-1!==d.indexOf(i);c+='<li><a data-tracking-name="'.concat(m,'" ').concat(d?'aria-current="true" class="calloutMenuChecked iconAfter iconAfterCheck" ':"",'href="').concat(f,'">').concat(ke(l.text)).concat(p,"</a></li>"),d&&(a=f)}o.querySelector("ul").innerHTML=c,a&&(n.href=a),o.addEventListener("click",Ye),ye[g]&&ee(function(){return 0!==o.querySelector("ul").offsetWidth},3e3,15).then(function(){return Ue(n,"position")}).catch(function(){return console.log("timed out for polling tree list rendering")}),$e("navTreesMenu"),ot(g)}}function st(e,t){var n;e?ae(e):(t.user&&(ue=t.user,function(e){{var t;ue.name&&(se(e)?t=document.getElementById("navAccount"):(e=document.getElementById("navAccountImage"),t=document.getElementById("navAccountUsername"),ue.image?e.insertAdjacentHTML("beforebegin",'<span aria-hidden="true" class="userCardImg userCardImgCenter" id="navAccountImage" style="background-image:url(\''.concat(ue.image,'\');"><img class="navUserImage" src="').concat(ue.image,'" alt="" /></span>')):e.insertAdjacentHTML("beforebegin",'<span aria-hidden="true" class="userCardImg icon iconPerson" id="navAccountImage"></span>'),e.remove()),t.textContent=ue.name)}}(le.siteType),se(le.siteType)||(function(e,t,n){{var r;document.querySelectorAll(".navEmphasizedButton, .navEmphasizedTitle, .navEmphasizedExpertButton").forEach(function(e){e.remove()}),e||n||!de?e&&(n=me.querySelector("#navSubscriptionOptions a").host,r="https://".concat(n).concat(e),n=Ee.templateEmphasizedButton.replace("{url}",r).replace("{text}",t).replace("{tracking}",t),me.querySelector("#navSubscriptionOptions").insertAdjacentHTML("afterbegin",n),fe&&fe.insertAdjacentHTML("beforeend",Ee.templateEmphasizedMobileButton.replace("{url}",r).replace("{text}",t).replace("{tracking}",t))):(e="".concat(de.getAttribute("href"),"-upsell"),t=(de.firstChild?de.firstChild:de).textContent,r="".concat(de.getAttribute("data-tracking-name")," : Upsell"),r=Ee.templateEmphasizedButton.replace("{url}",e).replace("{text}",t).replace("navEmphasizedButton","navEmphasizedExpertButton").replace("{tracking}",r),me.querySelector("#navSubscriptionOptions").insertAdjacentHTML("afterbegin",r))}}(ue.subscribeUrl,ue.subscribeText,ue.isFullAccessFreeTrialer),function(e){var t=document.getElementById("navCart"),n=document.getElementById("navCartCheckout");{t&&n&&(e?(t.setAttribute("href",e[0].checkoutUrl),n.setAttribute("href",e[0].checkoutUrl),document.getElementById("navCartCount").classList.add("badgeCartDefault"),t.classList.remove("noDisplay"),document.querySelectorAll(".navSecondaryMenu .navEmphasizedButton, .navSecondaryMenu .navEmphasizedExpertButton").forEach(function(e){e.classList.add("noDisplay")})):(t&&t.classList.add("noDisplay"),document.querySelectorAll(".navSecondaryMenu .navEmphasizedButton, .navSecondaryMenu .navEmphasizedExpertButton").forEach(function(e){e.classList.remove("noDisplay")})))}}(t.cart),G(c,Ie(c,le),ct,Le),dt(p,t.hintcount),mt(),ge=ue.currentSubscriptions)),(n=t.mostRecentlyViewedTreeId||!1)&&(t=(e=document.getElementById(p)).host,e&&(e.href="https://".concat(t,"/hints/tree/").concat(n,"/hints?hf=allhints&src=hn"))),(n=document.querySelector(".navSecondaryMenuUnloaded"))&&n.classList.remove("navSecondaryMenuUnloaded"))}function ct(e,t){if(e)ae(e);else if(void 0!==t.unreadCount&&!se(le.siteType)){if(0===document.location.pathname.toLowerCase().indexOf("/messaging"))window.localStorage.removeItem("unreadmessagecount");else if(!t.doNotStore)try{window.localStorage.setItem("unreadmessagecount",JSON.stringify({timestamp:(new Date).getTime(),count:t.unreadCount}))}catch(e){}dt(f,t.unreadCount)}}function ut(e){var t=function(e){if(window.sessionStorage&&"function"==typeof window.sessionStorage.getItem)try{return window.sessionStorage.getItem(e)}catch(e){return null}}(e);if(t){e="".concat(Ae());return"".concat(t,":0").split(":")[1]===e}}function lt(e){e.classList.remove("badgeColor1"),e.classList.remove("badgeColor2"),e.classList.add("lightGreenDot")}function dt(e,t){var n=document.getElementById(e),r=n.querySelector(".badge");0<t?(r.textContent=99<t?"99+":t,r.classList.remove("noDisplay"),e===f&&n.classList.add("hasCount"),e===p?(r.textContent="",document.getElementById(p).classList.add("hintMenuTwo"),lt(r),ut("hintTopNav")||(document.getElementById(p).classList.add("hintTopNavAnimation"),Se("hintTopNav",!0))):e===f&&lt(r)):(e===f&&n.classList.add("hasNoCount"),r.classList.add("noDisplay")),e===p&&(r=document.getElementById(p),e=r.lastChild.classList.contains("noDisplay")?"".concat(l," : hintMenuTwo : ").concat(m):"".concat(l," : hintMenuTwo : ").concat(d),r.setAttribute("data-tracking-name",e))}function ft(e){e=document.getElementById("".concat(e,"Loading"));e&&(e.setAttribute("aria-busy","true"),e.classList.remove("noDisplay"))}function mt(){document.querySelectorAll("#nav [aria-controls]:not(.initialized):not(.languageSelect)").forEach(function(e){function o(){var e;Ue(t,"close"),e={url:"".concat(le.urlClearCart,"?customerId=").concat(le.userId),success:function(e){e&&((e=document.getElementById("navCart"))&&e.classList.add("noDisplay"),(e=document.querySelector(".navSecondaryMenu .navEmphasizedButton, .navSecondaryMenu .navEmphasizedExpertButton"))&&e.classList.remove("noDisplay"))}},R(e)}var t,a,i,n,s,c,u,l,d,f,m;pe.visible(e)&&(n=(t=e).getAttribute("aria-controls"),s=document.getElementById(n),c=t.classList.contains("navMainLink"),u=t.classList.contains(p),l=t.classList.contains("navCart"),d=t.classList.contains("navAccount"),f=t.classList.contains("navExtras"),e=t.classList.contains("navMobile"),m=n.toLowerCase().replace("nav","").replace("menu",""),e={allowClick:!0,content:"#".concat(n),classes:"calloutMenu navCalloutMenu",disableAutofocusOnOpen:!e,onOpen:function(e){var t,n=pt(e,this),r=n.querySelector(".badge");a=!!r&&pe.visible(r),le.isLoggedIn?(he.updateUserData(m,!1),n.setAttribute("data-already-loaded","true")):ot(g),c&&le.isLoggedIn&&(a&&(i=setTimeout(function(){s&&s.querySelector(".badge").setAttribute("data-badge-viewed",!0);var e=r.previousElementSibling;e&&e.classList.contains("navSpacer")&&e.remove(),r.remove(),Xe()},1e3)),s&&(s.removeEventListener("click",Oe),s.addEventListener("click",Oe))),u&&(t=document.getElementById("navSeeAllHintsIn"),le.isLoggedIn&&t&&t.addEventListener("click",ze)),f&&Me(!(ge&&ge.length)),l?document.getElementById("navCartEmpty").addEventListener("click",o):d&&(ue&&ue.name&&(e=document.getElementById("navAccountMobileImage"),t=document.getElementById("navAccountMobileUsername"),ue.image?e.insertAdjacentHTML("beforebegin",'<div aria-hidden="true" class="userCardImg userCardImgCenter" id="navAccountMobileImage" style="background-image:url(\''.concat(ue.image,'\');"><img src="').concat(ue.image,'" alt="" /></div>')):e.insertAdjacentHTML("beforebegin",'<div aria-hidden="true" class="userCardImg icon iconPerson" id="navAccountMobileImage"></div>'),e.remove(),t.textContent=ue.name),_e(s)),n.insertAdjacentHTML("beforeend",Ee.templateEnterMenu)},onClose:function(e){var t=pt(e,this);a&&clearTimeout(i),l&&document.getElementById("navCartEmpty").removeEventListener("click",o),le.addTracking&&(t.classList.add("closing"),setTimeout(function(){t.classList.remove("closing")})),t.querySelector(".a11yHint").remove()}},pe.callout?ye[t.id]=pe.callout(t,e):"undefined"!=typeof $&&$.callout?($(t).callout(e),ye[t.id]=$(t).data("calloutInstance")):ae("Header Error: Missing core.js dependency. DO NOT IGNORE. This is an issue with your page."),t.classList.add("link"),t.classList.add("initialized"),t.addEventListener("keyup",je),t.addEventListener("keydown",Re))})}function pt(e,t){return e?e.element?e.element:e[0]:t}function gt(){var e,t;document.getElementById("navTemplates")&&function(){var e=document.getElementById("navTemplates");if(null===Ee&&e){Ee={};for(var t=e.children,n=t.length,r=0;r<n;r+=1)Ee[t[r].id]=t[r].innerHTML.trim();e.remove()}}(),de=document.getElementById("navLinkExpert"),me=document.querySelector(".navSecondaryMenu"),fe=document.querySelector(".navMobileMenu"),e=document.getElementById("HeaderRegion"),(t=document.getElementById("GlobalWrpr"))&&t.querySelector("#HeaderRegion")&&document.body.offsetWidth>e.offsetWidth&&t.insertAdjacentElement("beforebegin",e),e&&(e.style.height="",e.style.minHeight=""),he.setReturnUrl(le.returnUrl),he.setSelectedPage(le.selectedTabName),le.isLoggedIn&&(ft("".concat(g,"Menu")),ft("".concat(p,"Menu")),ft("".concat(f,"Menu")),z(s,Ie(s,le),st,Le,null,null),qe()),function(){var e=Te(le.acceptLanguage);if(e){var t=function(e,n){return e.reduce(function(e,t){return e.some(function(e){return e[n]===t[n]})||e.push(t),e},[])}(e,"code").filter(function(e){return t=e,le.supportedLocales.some(function(e){return e.language===t.code});var t});if(t&&1<t.length){var e=Te(le.cultureCode),n=e?e[0]:{code:"en"},r=t.map(function(t){return t.isActive=t.code===n.code,t.isActive&&document.getElementById("languageSelect")&&(document.getElementById("languageSelect").innerText=t.code.toUpperCase()),t.text=le.supportedLocales.find(function(e){return e.language===t.code}).title,t}),e=document.getElementById("legacyLanguageToggle");document.getElementById("navAccount")&&document.getElementById("navAccount").classList.add("rightSpace"),e&&e.classList.add("noDisplay"),document.getElementById("navLanguageSelect").classList.remove("noDisplay");for(var o=r.map(function(e){return'\n\t\t\t<li class="navListItem">\n\t\t\t\t<button type="button" class="navLangItem link" lang="'.concat((e=e).code,'" onclick="').concat(function(e){return"\n\t\t\tfunction constructSiteGeo() {\n\t\t\t\tconst domainParts = window.document.location.hostname.split('.');\n\t\t\t\tlet domainExt = 'com';\n\t\t\t\tdomainExt = domainParts.length > 3 ? domainParts[3] : domainParts[2];\n\t\t\t\treturn domainExt === 'com' ? 'us' : domainExt;\n\t\t\t}\n\t\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\t\turlParams.set('locale', '".concat(e.code.toUpperCase(),"');\n\t\t\twindow.location.search = urlParams;\n\t\t\tconst geo = window.utag && window.utag.data && window.utag.data.geo || constructSiteGeo();\n\t\t\twindow.utag && window.utag.link({\n\t\t\t  link_name : 'ancestry ' + geo + ': navigation : language select',\n\t\t\t  action: 'ancestry ' + geo + ': navigation : language : ").concat(e.code,"',\n\t\t\t  mix_event_name : 'language_dropdown_selection',\n\t\t\t  link_value: '").concat(e.code,"',\n\t\t\t  dropdown_selection: 'navigation : language : ").concat(e.code,"'\n\t\t\t});\n\t\t")}(e),'">\n\t\t\t\t\t<div class="listColumn">').concat(e.text,'</div>\n\t\t\t\t\t<div class="listColumn"><span aria-hidden="true" class="icon iconCheck ').concat(e.isActive?"":"noDisplay",'"/></div>\n\t\t\t\t</button>\n\t\t\t</li>')}).join(""),a=0;a<r.length;a++)if(-1!==r[a].text.indexOf("*")){o+='\n\t\t\t\t\t\t\t\t<li class="navListItem">\n\t\t\t\t\t\t\t\t\t<div class="starredMessageItem textsml">\n\t\t\t\t\t\t\t\t\t\t<span class="messageStar">*</span>\n\t\t\t\t\t\t\t\t\t\t<div class="messageText">'.concat(le.langResources.TranslationInProgress,"</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>");break}e=Ee.templateLanguageCallout.replace("{title}",le.langResources.SelectLanguage).replace("{languageItems}",o);pe.callout("#languageSelect",{content:e,classes:"calloutMenu navCalloutMenu",calloutClasses:"navLanguageCallout"});t=new CustomEvent("languageToggleReady",{detail:t});document.dispatchEvent(t)}}else!function(){var e=document.getElementById("legacyLanguageToggle");e&&e.classList.remove("noDisplay")}()}(),Be()}function ht(){var e,t=document.getElementById("nav");if(!t||"ancestry-logo"!==t.getAttribute("data-nav-type")){t=document.getElementById("navData");return t?((e=(e=e||window).ui?e.ui:(ae(ie),ne)).keyCodes?e.keyCodes.space||(e.keyCodes.space=32):e.keyCodes=ne.keyCodes,pe=e,(t=JSON.parse(t.textContent)).isLoggedIn&&"object"===n(pe)&&"function"==typeof pe.getCookie&&(t.userId=pe.getCookie("LAU")),void 0!==le&&Ze(),le=t,void gt()):void("object"===("undefined"==typeof console?"undefined":n(console))&&"function"==typeof console.error&&console.error("navData was not found in the dom after loading"))}}function yt(){ee(function(){return!(!document.getElementById("navData")||!(window.ui&&window.ui.callout||"undefined"!=typeof $&&$.callout))},14e3,100).then(function(){ht()}).catch(function(e){console&&console.error&&console.error("navData was not found in the dom: ",e)})}window&&window.Promise||(window.Promise=a),window.header=(ye={},ve=/[&<>"'/]/g,we=!(be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}),Ee=null,(he={}).setReturnUrl=function(e){var t,n,r,o,a;e&&(r=document.querySelector("#navSignOutLink a"),o=document.getElementById("navAccount"),a=(t=r||o).getAttribute("href"),e=decodeURIComponent(e),n=a,r="returnUrl",o=encodeURIComponent(e),a=new RegExp("([?&])".concat(r,"=.*?(&|$)"),"i"),e=-1===n.indexOf("?")?"?":"&",o=n.match(a)?n.replace(a,"$1".concat(r,"=").concat(o,"$2")):"".concat(n).concat(e).concat(r,"=").concat(o),t.setAttribute("href",o))},he.setSelectedPage=function(e){var t,n;e&&(n=document.getElementById("nav"),t="nav".concat(e),n.querySelectorAll(".navLinkSelected").forEach(function(e){e.classList.contains(t)||(e.classList.remove("navLinkSelected"),e.removeAttribute("aria-current"))}),(n=n.querySelector(".".concat(t)))&&(n.classList.add("navLinkSelected"),n.setAttribute("aria-current","page")))},he.updateUserData=function(e){function t(){return z(g,Ie(g,le),it,Le,at,null)}e={trees:t,mobile:t,hints:function(){return z(p,Ie(u,le),nt,Le)},messages:function(){return z(f,Ie(f,le),rt,Le)},user:function(){return z(s,Ie(s,le),st,Le)},dna:function(){return z(i,Ie(i,le),Qe,Le,null,null)}}[e];e&&e()},document.getElementById("nav")&&"ancestry-logo"===document.getElementById("nav").getAttribute("data-nav-type")||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",yt):yt()),he)}();//# sourceMappingURL=header.js.map
