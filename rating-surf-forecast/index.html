<!DOCTYPE html><html lang="en" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Creating a Daily Surf Rating Report" /><meta name="author" content="Alex Laverty" /><meta property="og:locale" content="en" /><meta name="description" content="Introduction Choosing a Programming Language Scraping Forecast Data with BeautifulSoup Parsing the JSON Data Adding Data to Pandas Data Frame Figuring out Weird Wave and Wind Data Structure Export Dataframe as a HTML Table with CSS Styling Generate Deployment on a Daily Schedule Using Github Action Workflow" /><meta property="og:description" content="Introduction Choosing a Programming Language Scraping Forecast Data with BeautifulSoup Parsing the JSON Data Adding Data to Pandas Data Frame Figuring out Weird Wave and Wind Data Structure Export Dataframe as a HTML Table with CSS Styling Generate Deployment on a Daily Schedule Using Github Action Workflow" /><link rel="canonical" href="https://alexlaverty.github.io/rating-surf-forecast/" /><meta property="og:url" content="https://alexlaverty.github.io/rating-surf-forecast/" /><meta property="og:site_name" content="Alex Laverty" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-12T14:33:00+11:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Creating a Daily Surf Rating Report" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Alex Laverty" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alex Laverty"},"dateModified":"2021-12-12T14:33:00+11:00","datePublished":"2021-12-12T14:33:00+11:00","description":"Introduction Choosing a Programming Language Scraping Forecast Data with BeautifulSoup Parsing the JSON Data Adding Data to Pandas Data Frame Figuring out Weird Wave and Wind Data Structure Export Dataframe as a HTML Table with CSS Styling Generate Deployment on a Daily Schedule Using Github Action Workflow","headline":"Creating a Daily Surf Rating Report","mainEntityOfPage":{"@type":"WebPage","@id":"https://alexlaverty.github.io/rating-surf-forecast/"},"url":"https://alexlaverty.github.io/rating-surf-forecast/"}</script><title>Creating a Daily Surf Rating Report | Alex Laverty</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Alex Laverty"><meta name="application-name" content="Alex Laverty"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/alex-laverty.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Alex Laverty</a></div><div class="site-subtitle font-italic"></div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/gallery/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>GALLERY</span> </a><li class="nav-item"> <a href="/laverty-family-history/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>LAVERTY FAMILY HISTORY</span> </a><li class="nav-item"> <a href="/laverty-tree/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>LAVERTY FAMILY TREE</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/alexlaverty" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['alaverty','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Creating a Daily Surf Rating Report</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Creating a Daily Surf Rating Report</h1><div class="post-meta text-muted"><div class="post-meta"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a> <a href="/tags/surf/" class="post-tag no-text-decoration" >surf</a></div><div> By <em> <a href="https://alexlaverty.github.io">Alex Laverty</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2021-12-12 14:33:00 +1100" data-toggle="tooltip" data-placement="bottom" title="Sun, Dec 12, 2021, 2:33 PM +1100" >Dec 12, 2021</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2810 words"> <em>15 min</em> read</span></div></div></div><div class="post-content"><ul><li><a href="#introduction">Introduction</a><li><a href="#choosing-a-programming-language">Choosing a Programming Language</a><li><a href="#scraping-forecast-data-with-beautifulsoup">Scraping Forecast Data with BeautifulSoup</a><li><a href="#parsing-the-json-data">Parsing the JSON Data</a><li><a href="#adding-data-to-pandas-data-frame">Adding Data to Pandas Data Frame</a><li><a href="#figuring-out-weird-wave-and-wind-data-structure">Figuring out Weird Wave and Wind Data Structure</a><li><a href="#export-dataframe-as-a-html-table-with-css-styling">Export Dataframe as a HTML Table with CSS Styling</a><li><a href="#generate-deployment-on-a-daily-schedule-using-github-action-workflow">Generate Deployment on a Daily Schedule Using Github Action Workflow</a></ul><h2 id="introduction">Introduction<a href="#introduction"><i class="fas fa-hashtag"></i></a></h2></h2><p>I like to go to the beach and often find myself checking the Sydney surf forecast at Seabreeze.com.au</p><p><a href="https://www.seabreeze.com.au/weather/wind-forecast/sydney">https://www.seabreeze.com.au/weather/wind-forecast/sydney</a></p><p>It can take a little while to look at each day and use my mouse to hover over the chart to see wind speed and wave height etc and check the second chart for swell period and direction.</p><p>I wanted to see if I could write a script that would scrape this data for me, put it into a table, apply my personal surf condition preferences to the table and also filter out days where the surf was bad and make it accessible on this website, the end result is this report :</p><p><a href="https://alexlaverty.github.io/surf/index.html">https://alexlaverty.github.io/surf/index.html</a></p><p>Green is good, red is bad, the more green cells on a row, the better the conditions will be.</p><h2 id="choosing-a-programming-language">Choosing a Programming Language<a href="#choosing-a-programming-language"><i class="fas fa-hashtag"></i></a></h2></h2><p>This script could be written using various programming languages, I am currently learning Python so I have chosen it to write the script, <a href="https://www.python.org/">Python</a> also has the <a href="https://pandas.pydata.org/">Pandas</a> library at our disposal which is pretty powerful.</p><h2 id="scraping-forecast-data-with-beautifulsoup">Scraping Forecast Data with BeautifulSoup<a href="#scraping-forecast-data-with-beautifulsoup"><i class="fas fa-hashtag"></i></a></h2></h2><p>To get started we will scrape the surf forecast data using the python library <a href="https://beautiful-soup-4.readthedocs.io/en/latest/">BeautifulSoup</a>.</p><p>This snippet of code will connect to the <a href="https://www.seabreeze.com.au/weather/wind-forecast/sydney">Seabreeze forecast for Sydney</a> and retrieve the websites HTML code :</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kn">from</span> <span class="nn">bs4</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>
<span class="kn">import</span> <span class="nn">requests</span> 

<span class="n">url</span> <span class="o">=</span> <span class="s">"https://www.seabreeze.com.au/weather/wind-forecast/sydney"</span>

<span class="n">page</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>         
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">page</span><span class="p">.</span><span class="n">content</span><span class="p">,</span> <span class="s">"html.parser"</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">soup</span><span class="p">)</span>
</pre></table></code></div></div><p>Copy and paste this view-source link into your chrome browser to see what that html code looks like :</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>view-source:https://www.seabreeze.com.au/weather/wind-forecast/sydney
</pre></table></code></div></div><h2 id="parsing-the-json-data">Parsing the JSON Data<a href="#parsing-the-json-data"><i class="fas fa-hashtag"></i></a></h2></h2><p>Scrolling through the HTML I can see a bunch of interesting data embedded in JSON value in <code class="language-plaintext highlighter-rouge">var json={}</code> :</p><p><img data-proofer-ignore data-src="/assets/img/rating-surf-forecast/2021-10-10-17-51-59.png" alt="" /></p><p>Using <a href="https://docs.python.org/3/library/re.html">regex</a> I grab <code class="language-plaintext highlighter-rouge">script</code> instances that match the text with the following expression <code class="language-plaintext highlighter-rouge">var json={.*};</code></p><p>I was having trouble parsing this text as <a href="https://www.json.org/json-en.html">JSON</a> so had to do some string replacing to get it working,</p><p>I’m sure there’s a better regex expression that could exactly match what I needed, but that can be a future improvement.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1"># Needs a better regex expression
</span><span class="n">pattern</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="sa">r</span><span class="s">'var json={.*};'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">DOTALL</span><span class="p">)</span>

<span class="n">script</span> <span class="o">=</span> <span class="n">soup</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'script'</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">pattern</span><span class="p">)</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">pattern</span><span class="p">.</span><span class="n">search</span><span class="p">(</span><span class="n">script</span><span class="p">.</span><span class="n">text</span><span class="p">).</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># tidies beginning and end of json string so json.loads works correctly
</span><span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"var json="</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"};"</span><span class="p">,</span> <span class="s">"}"</span><span class="p">)</span>

<span class="bp">self</span><span class="p">.</span><span class="n">json</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></table></code></div></div><p>Once we’ve extracted the JSON properly we have something like this to extract values from :</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>print(json)


{'global': {'issueUtc': '2021-10-10T07:00:58.852Z', 'isCustomLayout': False, 'renderMode': 1, 'arrows': '0,12,18,35', 'rainScale': '2,5,10,20,50,100,200,500,1000', 'reportErrors': True, 'reportUrl': '/Services/Data/Errors.ashx', 'bannerId': 'sb-main-1', 'stateName': 'NSW', 'stateId': 2, 'location': 'Sydney (Coastal)', 'locationSeoName': 'sydney', 'utcHoursOffset': 11.0, 'localTime': 1633888858852, 'sunRiseLocalTime': 1633846872392, 'sunSetLocalTime': 1633892644054, 'sunriseText': '6:21 am', 'sunsetText': '7:04 pm', 'forecastInfoUid': '20211010061308', 'forecastInfoText': 'Forecast 
updated at 5:13 pm, (47 minutes ago)', 'liveInfoUid': '20211010065500', 'liveInfoText': 'Graphs updated at 5:55 pm, (5 minutes ago)', 'stateMessage': '', 'prognosisImageUrl': '/Img/Cache/fwo/G00074.gif', 'synopticImageUrl': '/Img/Cache/fwo/Y00030.202110100000.png'}, 'layout': [{'type': 'F', 'id': 'F2SYD1', 'title': 'Sydney', 'longTitle': '7 Day Wind &amp; Wave Forecast for SYDNEY (COASTAL)', 'width': 1080, 'height': 475, 'aspectRatio': 0.44, 'imageUrl': '//res3.seabreeze.com.au/img/weather/forecasts/syd1/sydney_wind-wave-forecast-rev.png', 'imageUrlRev': '//res3.seabreeze.com.au/img/weather/forecasts/syd1/sydney_wind-wave-forecast.png', 'messages': []}, {'type': 'A', 'id': '1002', 'adUnit': 'sb-main-1'}, {'type': 'E', 'id': 'E2SYD1', 'title': 'Sydney', 'longTitle': '7 Day Wave 
Height/Dir/Period Forecast for Sydney', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res3.seabreeze.com.au/img/weather/forecasts/syd1/sydney_swell-period-forecast.png', 'imageUrlRev': '//res3.seabreeze.com.au/img/weather/forecasts/syd1/sydney_swell-period-forecast.png'}, {'type': 'S', 'id': 'S2FORT', 'title': 'Fort Denison', 'longTitle': '7 Day Tide Forecast for Fort 
Denison', 'width': 1080, 'height': 473, 'aspectRatio': 0.438, 'imageUrl': '//res4.seabreeze.com.au/img/weather/forecasts/fort/fort-denison_tide-times-forecast.png', 'imageUrlRev': '//res4.seabreeze.com.au/img/weather/forecasts/fort/fort-denison_tide-times-forecast.png', 'tides': '4,Sunday,5:23 am,0.37,L,Sunday,11:50 am,1.82,H,Sunday,6:25 pm,0.29,L,Monday,12:28 am,1.39,H,Monday,6:11 am,0.48,L,Monday,12:44 pm,1.77,H,Monday,7:31 pm,0.36,L,Tuesday,1:31 am,1.27,H,Tuesday,7:07 am,0.58,L,Tuesday,1:44 pm,1.70,H,Tuesday,8:45 pm,0.42,L,Wednesday,2:46 am,1.19,H,Wednesday,8:14 am,0.66,L,Wednesday,2:54 pm,1.63,H,Wednesday,10:03 pm,0.44,L,Thursday,4:10 am,1.19,H,Thursday,9:33 am,0.69,L,Thursday,4:11 pm,1.60,H,Thursday,11:13 pm,0.42,L,Friday,5:21 am,1.24,H,Friday,10:51 am,0.66,L,Friday,5:22 pm,1.61,H,Saturday,12:10 am,0.39,L,Saturday,6:17 am,1.32,H,Saturday,11:58 am,0.59,L,Saturday,6:20 pm,1.62,H,Sunday,12:57 am,0.36,L,Sunday,7:03 am,1.41,H,Sunday,12:55 pm,0.52,L,Sunday,7:10 pm,1.63,H,Monday,1:36 am,0.34,L,Monday,7:44 am,1.50,H,Monday,1:43 pm,0.46,L,Monday,7:53 pm,1.62,H'}, {'type': 'C', 'id': 'C2SYD1', 'title': 'Sydney', 'longTitle': '7 Day Temperature Forecast for Sydney', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res3.seabreeze.com.au/img/weather/forecasts/syd1/sydney_temperature-forecast.png', 'imageUrlRev': '//res3.seabreeze.com.au/img/weather/forecasts/syd1/sydney_temperature-forecast.png'}, {'type': 'R', 'id': 'R2SYD1', 'title': 'Sydney', 'longTitle': '7 Day Rain Forecast for Sydney', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res3.seabreeze.com.au/img/weather/forecasts/syd1/sydney_rain-forecast.png', 'imageUrlRev': '//res3.seabreeze.com.au/img/weather/forecasts/syd1/sydney_rain-forecast.png'}, {'type': 'P', 'id': 'P2SDAP', 'title': 'Sydney Airport', 'longTitle': 'Temperature / Air Pressure at Sydney Airport', 'width': 1080, 'height': 331, 'aspectRatio': 0.306, 'imageUrl': '//res4.seabreeze.com.au/img/weather/reports/sdap/sydney-airport_pressure-temperature-report.png', 'imageUrlRev': '//res4.seabreeze.com.au/img/weather/reports/sdap/sydney-airport_pressure-temperature-report.png'}, {'type': 'W', 'id': 'W2NORT', 'title': 'North Head', 'longTitle': 'North Head Live Wind Report', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res4.seabreeze.com.au/img/weather/reports/nort/north-head_wind-report-rev.png', 'imageUrlRev': '//res4.seabreeze.com.au/img/weather/reports/nort/north-head_wind-report.png'}, {'type': 'W', 'id': 'W2SYD3', 'title': 'Sydney Harbour', 'longTitle': 'Sydney Harbour Live Wind Report', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res1.seabreeze.com.au/img/weather/reports/syd3/sydney-harbour_wind-report-rev.png', 'imageUrlRev': '//res1.seabreeze.com.au/img/weather/reports/syd3/sydney-harbour_wind-report.png'}, {'type': 'W', 'id': 'W2FORT', 'title': 'Fort Denison', 'longTitle': 'Fort Denison Live Wind Report', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res4.seabreeze.com.au/img/weather/reports/fort/fort-denison_wind-report-rev.png', 'imageUrlRev': '//res4.seabreeze.com.au/img/weather/reports/fort/fort-denison_wind-report.png'}, {'type': 'W', 'id': 'W2SDAP', 'title': 'Sydney Airport', 'longTitle': 'Sydney Airport Live Wind Report', 'width': 1080, 'height': 
414, 'aspectRatio': 0.383, 'imageUrl': '//res4.seabreeze.com.au/img/weather/reports/sdap/sydney-airport_wind-report-rev.png', 'imageUrlRev': '//res4.seabreeze.com.au/img/weather/reports/sdap/sydney-airport_wind-report.png'}, {'type': 'A', 'id': '1102', 'adUnit': 'sb-main-2'}, {'type': 'W', 'id': 'W2LITT', 'title': 'Little Bay', 'longTitle': 'Little Bay Live Wind Report', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res2.seabreeze.com.au/img/weather/reports/litt/little-bay_wind-report-rev.png', 'imageUrlRev': '//res2.seabreeze.com.au/img/weather/reports/litt/little-bay_wind-report.png'}, {'type': 'W', 'id': 'W2KURN', 'title': 'Kurnell', 'longTitle': 'Kurnell Live Wind Report', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res1.seabreeze.com.au/img/weather/reports/kurn/kurnell_wind-report-rev.png', 'imageUrlRev': '//res1.seabreeze.com.au/img/weather/reports/kurn/kurnell_wind-report.png'}, {'type': 'W', 'id': 'W2CRON', 'title': 'Cronulla', 'longTitle': 'Cronulla Live Wind Report', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res4.seabreeze.com.au/img/weather/reports/cron/cronulla_wind-report-rev.png', 'imageUrlRev': '//res4.seabreeze.com.au/img/weather/reports/cron/cronulla_wind-report.png'}, {'type': 'T', 'id': 'T2FORT', 'title': 'Fort Denison', 'longTitle': 'Live Tide at Fort Denison', 'width': 1080, 'height': 414, 'aspectRatio': 0.383, 'imageUrl': '//res4.seabreeze.com.au/img/weather/reports/fort/fort-denison_tide-times-report.png', 'imageUrlRev': '//res4.seabreeze.com.au/img/weather/reports/fort/fort-denison_tide-times-report.png'}, {'type': 'A', 'id': '1002', 'adUnit': 'sb-main-3'}], 'data': ['F,2,SYD1,68,1012,0,16798,0,16798,SYDNEY (COASTAL),6,117,202110100000,202110162359,636,1905,12,8,0,0,0,0,0,0,0,0,0,0,0,0,17,27,0,Rain at times. Possible storm.,Storm,95,13.2 to 22.8 mm,,,,,,11,17,1,Showers.,Shower,90,4 to 7.7 mm,,,,,,13,20,2,Shower or two.,Shower,50,0.8 to 5.1 mm,,,,,,13,21,3,Showers.,Shower,80,1.7 to 7 mm,,,,,,14,25,4,Showers.,Shower,80,1.1 to 5.8 mm,,,,,,13,23,5,Possible shower.,LightShower,40,0.2 to 0.6 mm,,,,,,12,24,6,Mostly sunny.,MostlySunnyPartlyCloudy,30,0 to 0.2 mm,,,,,,,,7 Day Wind &amp; Wave Forecast for SYDNEY (COASTAL),-400,19,NE,0.55,SSE,8.0,-250,16,NNE,0.62,E,6.4,-100,13,NNE,0.71,NE,5.0,50,12,N,0.71,NE,5.2,200,11,N,0.69,NE,5.4,350,9,N,0.66,NE,5.6,500,8,N,0.65,ENE,5.9,650,8,N,0.64,ENE,6.1,800,8,N,0.64,ENE,6.4,950,9,W,0.62,NE,6.4,1100,10,SSW,0.61,NE,6.6,1250,18,SSW,0.71,NE,6.7,1400,21,S,0.88,SSW,4.4,1550,24,S,1.02,S,5.2,1700,21,S,1.02,S,5.6,1850,20,S,0.92,S,5.7,2000,19,S,0.92,S,5.7,2150,19,S,0.96,S,5.9,2300,18,S,0.94,S,6.3,2450,19,S,0.93,S,6.4,2600,21,S,0.93,S,6.5,2750,25,S,1.05,S,6.4,2900,24,S,1.30,S,6.6,3050,24,S,1.42,S,7.0,3200,22,S,1.44,S,7.2,3350,19,S,1.38,S,7.3,3500,18,S,1.25,S,7.2,3650,18,S,1.13,S,7.0,3800,19,S,1.04,S,6.8,3950,18,SSE,0.99,S,6.6,4100,19,SSE,0.95,S,6.5,4250,17,SSE,0.93,S,6.5,4400,17,SE,0.91,S,6.4,4550,16,SE,0.88,S,6.4,4700,16,SE,0.86,S,6.4,4850,15,SE,0.84,S,6.3,5000,15,ESE,0.81,SSE,6.2,5150,15,ESE,0.78,SSE,6.1,5300,13,ESE,0.76,SSE,6.0,5450,13,ESE,0.75,SSE,5.9,5600,14,ESE,0.75,SSE,5.9,5750,13,ESE,0.75,SSE,5.9,5900,14,ESE,0.75,SSE,5.9,6050,14,ESE,0.74,SE,5.9,6200,15,ESE,0.72,SE,5.8,6350,14,ESE,0.71,SE,6.9,6500,15,ESE,0.69,SSE,7.8,6650,14,E,0.69,SSE,7.8,6800,13,E,0.68,SSE,7.7,6950,13,E,0.67,SSE,7.6,7100,11,E,0.66,SSE,7.5,7250,11,E,0.66,SSE,7.4,7400,11,ENE,0.66,SSE,7.4,7550,11,ENE,0.68,SSE,7.4,7700,9,ENE,0.68,SSE,7.4,7850,10,ENE,0.69,SSE,7.4,8000,11,ENE,0.72,SE,7.5,8150,10,NE,0.77,SSE,7.6,8300,11,NE,0.84,E,5.7,8450,11,ENE,0.87,E,5.6,8600,13,ENE,0.88,E,5.6,8750,14,ENE,0.88,E,5.6,8900,16,NE,0.92,ENE,5.4,9050,17,NE,0.97,ENE,5.4,9200,18,NE,1.00,ENE,5.6,9350,18,NE,1.00,ENE,5.6,9500,17,NNE,1.02,ENE,5.7,9650,16,NNE,1.06,ENE,5.8,9800,16,NNE,1.08,ENE,5.9,9950,14,NNE,1.11,ENE,5.9,10100,12,NNE,1.11,NE,6.1,10250,11,N,1.07,ENE,6.4,10400,11,N,1.05,ENE,6.4,10550,11,NNE,1.04,ENE,6.4,10700,12,N,1.06,ENE,6.5,10850,13,NNE,1.07,ENE,6.6,11000,15,NNE,1.14,ENE,6.7,11150,16,NE,1.23,ENE,6.8,11300,19,NE,1.31,ENE,6.8,11450,17,NNE,1.37,ENE,7.1,11600,17,N,1.37,ENE,7.4,11750,15,NNW,1.28,ENE,7.6,11900,12,NW,1.22,NE,7.6,12050,10,NW,1.16,ENE,7.8,1......................,0,17.2'}]}]}
</pre></table></code></div></div><p>if we focus in on the forecast we can then access each day individually :</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="n">forecast</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"forecasts"</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">"forecast"</span><span class="p">]</span>

<span class="k">for</span> <span class="n">day</span> <span class="ow">in</span> <span class="n">forecast</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"--------------------------"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">day</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"--------------------------"</span><span class="p">)</span>

<span class="o">--------------------------</span>
<span class="p">{</span><span class="s">'localDate'</span><span class="p">:</span> <span class="s">'2021-10-10'</span><span class="p">,</span> <span class="s">'day'</span><span class="p">:</span> <span class="s">'Sunday'</span><span class="p">,</span> <span class="s">'minTemp'</span><span class="p">:</span> <span class="mf">17.0</span><span class="p">,</span> <span class="s">'maxTemp'</span><span class="p">:</span> <span class="mf">27.0</span><span class="p">,</span> <span class="s">'shortDesc'</span><span class="p">:</span> <span class="s">'Rain at times. Possible storm.'</span><span class="p">,</span> <span class="s">'skyIcon'</span><span class="p">:</span> <span class="bp">None</span><span class="p">,</span> <span class="s">'weatherIcon'</span><span class="p">:</span> <span class="s">'Storm'</span><span class="p">,</span> <span class="s">'probabilityPrecip'</span><span class="p">:</span> <span class="mf">95.0</span><span class="p">,</span> <span class="s">'rangePrecipText'</span><span class="p">:</span> <span class="s">'13.2 to 22.8 mm'</span><span class="p">,</span> <span class="s">'sunrise'</span><span class="p">:</span> <span class="s">'636'</span><span class="p">,</span> <span class="s">'sunset'</span><span class="p">:</span> <span class="s">'1905'</span><span class="p">,</span> <span class="s">'moonPhase'</span><span class="p">:</span> <span class="mf">0.703</span><span class="p">,</span> <span class="s">'wind'</span><span class="p">:</span> <span class="s">'4,0,30,11.9,83,2,0,10.8,92,3,30,9,88,5,0,8.1,87,6,30,8.3,96,8,0,8.3,101,9,30,8.6,174,11,0,10,249,12,30,17.5,250,14,0,21.3,265,15,30,23.5,270,17,0,21.1,274,18,30,20.3,274,20,0,19.4,276,21,30,19,271,23,0,18,267'</span><span class="p">,</span> <span class="s">'waves'</span><span class="p">:</span> <span class="s">'5,0,30,0.7,38,5.2,2,0,0.7,37,5.4,3,30,0.7,35,5.6,5,0,0.6,33,5.9,6,30,0.6,33,6.1,8,0,0.6,33,6.4,9,30,0.6,34.5,6.4,11,0,0.6,36,6.6,12,30,0.7,35.5,6.7,14,0,0.9,257,4.4,15,30,1,260.5,5.2,17,0,1,266,5.6,18,30,0.9,266.5,5.7,20,0,0.9,269,5.7,21,30,1,273,5.9,23,0,0.9,278,6.3'</span><span class="p">,</span> <span class="s">'tides'</span><span class="p">:</span> <span class="s">'4,5,23,0.37,L,11,50,1.82,H,18,25,0.29,L'</span><span class="p">,</span> <span class="s">'temperature'</span><span class="p">:</span> <span class="s">'3,0,0,20,1,0,19.9,2,0,19.9,3,0,19.6,4,0,19.6,5,0,19.4,6,0,19.2,7,0,19.1,8,0,18.8,9,0,18.8,10,0,19.2,11,0,19.3,12,0,19.2,13,0,19.3,14,0,18.8,15,0,18.5,16,0,18.4,17,0,17.7,18,0,17.8,19,0,17.3,20,0,17,21,0,16.8,22,0,16.7,23,0,16.6,0,0,16.8,1,0,16.4,2,0,16,3,0,15.6,4,0,15.3,5,0,14.7,6,0,14.4,7,0,14.1,8,0,13.8,9,0,13.7,10,0,13.9,11,0,14,12,0,14,13,0,14.9,14,0,15,15,0,15.2,16,0,15.7,17,0,15.5,18,0,15.7,19,0,15.7,20,0,15.7,21,0,15.9,22,0,16.1,23,0,16.2,0,0,16.1,1,0,16,2,0,16,3,0,15.8,4,0,15.7,5,0,15.6,6,0,15.4,7,0,15.5,8,0,15.2,9,0,15.2,10,0,15.5,11,0,15.7,12,0,15.8,13,0,16.6,14,0,16.6,15,0,16.6,16,0,16.9,17,0,16.5,18,0,16.6,19,0,16.6,20,0,16.5,21,0,16.4,22,0,16.5,23,0,16.5,0,0,16.4,1,0,16.3,2,0,16.2,3,0,16.1,4,0,16.2,5,0,16.2,6,0,16.1,7,0,16.1,8,0,15.7,9,0,15.7,10,0,16.1,11,0,16.3,12,0,16.4,13,0,17.4,14,0,17.7,15,0,17.6,16,0,18.1,17,0,17.8,18,0,17.9,19,0,17.9,20,0,17.8,21,0,17.9,22,0,18,23,0,18.1,0,0,18,1,0,17.9,2,0,17.8,3,0,17.5,4,0,17.4,5,0,17.1,6,0,17,7,0,16.9,8,0,16.7,9,0,16.8,10,0,17.3,11,0,17.6,12,0,18.1,13,0,19.2,14,0,19.5,15,0,19.6,16,0,20.1,17,0,19.8,18,0,19.8,19,0,19.7,20,0,19.6,21,0,19.5,22,0,19.4,23,0,19.4,0,0,19,1,0,18.6,2,0,18.1,3,0,17.6,4,0,17.3,5,0,17,6,0,16.8,7,0,16.7,8,0,16.4,9,0,16.4,10,0,16.8,11,0,17.2,12,0,17.7,13,0,18.9,14,0,19.3,15,0,19.3,16,0,19.7,17,0,19.5,18,0,19.2,19,0,18.8,20,0,18.3,21,0,17.9,22,0,17.5,23,0,17.2,0,0,16.7,1,0,16.4,2,0,16.1,3,0,15.8,4,0,15.7,5,0,15.4,6,0,15.3,7,0,15.3,8,0,15.2,9,0,15.7,10,0,16.7,11,0,17.5,12,0,18.1,13,0,19.2,14,0,19.5,15,0,19.7,16,0,20.2,17,0,19.9,18,0,19.6,19,0,19.1,20,0,18.6,21,0,18.1,22,0,17.6,23,0,17.2'</span><span class="p">}</span>
<span class="o">--------------------------</span>

</pre></table></code></div></div><p>We can then also start accessing individual values :</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="n">forecast</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"forecasts"</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s">"forecast"</span><span class="p">]</span>

<span class="k">for</span> <span class="n">day</span> <span class="ow">in</span> <span class="n">forecast</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"--------------------------"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">day</span><span class="p">[</span><span class="s">'maxTemp'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="n">day</span><span class="p">[</span><span class="s">'shortDesc'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="n">day</span><span class="p">[</span><span class="s">'waves'</span><span class="p">])</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"--------------------------"</span><span class="p">)</span>


<span class="o">--------------------------</span>
<span class="mf">23.0</span>
<span class="n">Possible</span> <span class="n">shower</span><span class="p">.</span>
<span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mf">1.2</span><span class="p">,</span><span class="mf">31.5</span><span class="p">,</span><span class="mf">7.8</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.1</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mf">7.8</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mf">7.8</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mf">7.8</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">34.5</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">36.5</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">11</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mi">37</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mi">37</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">14</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mi">37</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">36.5</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">36</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">34.5</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">21</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mf">31.5</span><span class="p">,</span><span class="mf">7.9</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.9</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mf">7.8</span>
<span class="o">--------------------------</span>
</pre></table></code></div></div><h2 id="adding-data-to-pandas-data-frame">Adding Data to Pandas Data Frame<a href="#adding-data-to-pandas-data-frame"><i class="fas fa-hashtag"></i></a></h2></h2><p>Now that we can get values we want it’s time to create a <a href="https://www.geeksforgeeks.org/python-pandas-dataframe/">Pandas Dataframe</a> and add the values in. If you are not across Dataframes think Excel Spreadsheet, like a table that has Columns and Rows that you can perform operations on.</p><p>Here we’ll define the Column headers, loop through the forecast and append our values to a Python List <code class="language-plaintext highlighter-rouge">data = []</code>, then convert that python list to a dataframe and then print the contents of the dataframe.</p><p>This Stackoverflow page discusses why it’s better to append to a list and then convert to a dataframe rather than create a dataframe and append to it row by row :</p><p><a href="https://stackoverflow.com/a/17496530">Stackoverflow - Create a Pandas Dataframe by appending one row at a time</a></p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
</pre><td class="rouge-code"><pre><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s">'localDate'</span><span class="p">,</span>
            <span class="s">'day'</span><span class="p">,</span>
            <span class="s">'hour'</span><span class="p">,</span>
            <span class="s">'minute'</span><span class="p">,</span>
            <span class="s">'minTemp'</span><span class="p">,</span>
            <span class="s">'maxTemp'</span><span class="p">,</span>
            <span class="s">'shortDesc'</span><span class="p">,</span>
            <span class="s">'weatherIcon'</span><span class="p">,</span>
            <span class="s">'probabilityPrecip'</span><span class="p">,</span>
            <span class="s">'rangePrecipText'</span><span class="p">,</span>
            <span class="s">'sunrise'</span><span class="p">,</span>
            <span class="s">'sunset'</span><span class="p">,</span>
            <span class="s">'moonPhase'</span>
        <span class="p">]</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">day</span> <span class="ow">in</span> <span class="n">forecast</span><span class="p">:</span>  

        <span class="n">data</span><span class="p">.</span><span class="n">append</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'localDate'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'day'</span><span class="p">],</span>
                <span class="s">"0"</span><span class="p">,</span>
                <span class="s">"0"</span><span class="p">,</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'minTemp'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'maxTemp'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'shortDesc'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'weatherIcon'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'probabilityPrecip'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'rangePrecipText'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'sunrise'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'sunset'</span><span class="p">],</span>
                <span class="n">day</span><span class="p">[</span><span class="s">'moonPhase'</span><span class="p">]</span>
            <span class="p">]</span>
        <span class="p">)</span>
    
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>


    <span class="n">localDate</span>        <span class="n">day</span> <span class="n">hour</span> <span class="n">minute</span>  <span class="n">minTemp</span>  <span class="n">maxTemp</span>                       <span class="n">shortDesc</span>              <span class="n">weatherIcon</span>  <span class="n">probabilityPrecip</span>  <span class="n">rangePrecipText</span> <span class="n">sunrise</span> <span class="n">sunset</span>  <span class="n">moonPhase</span>
<span class="mi">0</span>  <span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">10</span>     <span class="n">Sunday</span>    <span class="mi">0</span>      <span class="mi">0</span>     <span class="mf">17.0</span>     <span class="mf">27.0</span>  <span class="n">Rain</span> <span class="n">at</span> <span class="n">times</span><span class="p">.</span> <span class="n">Possible</span> <span class="n">storm</span><span class="p">.</span>                    <span class="n">Storm</span>               <span class="mf">95.0</span>  <span class="mf">13.2</span> <span class="n">to</span> <span class="mf">22.8</span> <span class="n">mm</span>     <span class="mi">636</span>   <span class="mi">1905</span>      <span class="mf">0.703</span>
<span class="mi">1</span>  <span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">11</span>     <span class="n">Monday</span>    <span class="mi">0</span>      <span class="mi">0</span>     <span class="mf">11.0</span>     <span class="mf">17.0</span>                        <span class="n">Showers</span><span class="p">.</span>                   <span class="n">Shower</span>               <span class="mf">90.0</span>      <span class="mi">4</span> <span class="n">to</span> <span class="mf">7.7</span> <span class="n">mm</span>     <span class="mi">635</span>   <span class="mi">1906</span>      <span class="mf">0.941</span>
<span class="mi">2</span>  <span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">12</span>    <span class="n">Tuesday</span>    <span class="mi">0</span>      <span class="mi">0</span>     <span class="mf">13.0</span>     <span class="mf">20.0</span>                  <span class="n">Shower</span> <span class="ow">or</span> <span class="n">two</span><span class="p">.</span>                   <span class="n">Shower</span>               <span class="mf">50.0</span>    <span class="mf">0.8</span> <span class="n">to</span> <span class="mf">5.1</span> <span class="n">mm</span>     <span class="mi">631</span>   <span class="mi">1906</span>      <span class="mf">1.179</span>
<span class="mi">3</span>  <span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">13</span>  <span class="n">Wednesday</span>    <span class="mi">0</span>      <span class="mi">0</span>     <span class="mf">13.0</span>     <span class="mf">21.0</span>                        <span class="n">Showers</span><span class="p">.</span>                   <span class="n">Shower</span>               <span class="mf">80.0</span>      <span class="mf">1.7</span> <span class="n">to</span> <span class="mi">7</span> <span class="n">mm</span>     <span class="mi">630</span>   <span class="mi">1908</span>      <span class="mf">1.415</span>
<span class="mi">4</span>  <span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">14</span>   <span class="n">Thursday</span>    <span class="mi">0</span>      <span class="mi">0</span>     <span class="mf">14.0</span>     <span class="mf">25.0</span>                        <span class="n">Showers</span><span class="p">.</span>                   <span class="n">Shower</span>               <span class="mf">80.0</span>    <span class="mf">1.1</span> <span class="n">to</span> <span class="mf">5.8</span> <span class="n">mm</span>     <span class="mi">628</span>   <span class="mi">1910</span>      <span class="mf">1.648</span>
<span class="mi">5</span>  <span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">15</span>     <span class="n">Friday</span>    <span class="mi">0</span>      <span class="mi">0</span>     <span class="mf">13.0</span>     <span class="mf">23.0</span>                <span class="n">Possible</span> <span class="n">shower</span><span class="p">.</span>              <span class="n">LightShower</span>               <span class="mf">40.0</span>    <span class="mf">0.2</span> <span class="n">to</span> <span class="mf">0.6</span> <span class="n">mm</span>     <span class="mi">626</span>   <span class="mi">1911</span>      <span class="mf">1.877</span>
<span class="mi">6</span>  <span class="mi">2021</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">16</span>   <span class="n">Saturday</span>    <span class="mi">0</span>      <span class="mi">0</span>     <span class="mf">12.0</span>     <span class="mf">24.0</span>                   <span class="n">Mostly</span> <span class="n">sunny</span><span class="p">.</span>  <span class="n">MostlySunnyPartlyCloudy</span>               <span class="mf">30.0</span>      <span class="mi">0</span> <span class="n">to</span> <span class="mf">0.2</span> <span class="n">mm</span>     <span class="mi">623</span>   <span class="mi">1913</span>      <span class="mf">2.101</span>

</pre></table></code></div></div><h2 id="figuring-out-weird-wave-and-wind-data-structure">Figuring out Weird Wave and Wind Data Structure<a href="#figuring-out-weird-wave-and-wind-data-structure"><i class="fas fa-hashtag"></i></a></h2></h2><p>So now we have most of the data added to our dataframe.</p><p>However looking at the waves and wind data had me scratching my head…</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>waves = 4,0,30,11.9,83,2,0,10.8,92,3,30,9,88,5,0,8.1,87,6,30,8.3,96,8,0,8.3,101,9,30,8.6,174,11,0,10,249,12,30,17.5,250,14,0,21.3,265,15,30,23.5,270,17,0,21.1,274,18,30,20.3,274,20,0,19.4,276,21,30,19,271,23,0,18,267


wind = 5,0,30,0.7,38,5.2,2,0,0.7,37,5.4,3,30,0.7,35,5.6,5,0,0.6,33,5.9,6,30,0.6,33,6.1,8,0,0.6,33,6.4,9,30,0.6,34.5,6.4,11,0,0.6,36,6.6,12,30,0.7,35.5,6.7,14,0,0.9,257,4.4,15,30,1,260.5,5.2,17,0,1,266,5.6,18,30,0.9,266.5,5.7,20,0,0.9,269,5.7,21,30,1,273,5.9,23,0,0.9,278,6.3
</pre></table></code></div></div><p>This is supposed to be values of how high the waves are over the day :</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>waves = 4,0,30,11.9,83,2,0,10.8,92,3,30,9,88,5,0,8.1,87,6,30,8.3,96,8,0,8.3,101,9,30,8.6,174,11,0,10,249,12,30,17.5,250,14,0,21.3,265,15,30,23.5,270,17,0,21.1,274,18,30,20.3,274,20,0,19.4,276,21,30,19,271,23,0,18,267
</pre></table></code></div></div><p>Are the waves supposed to be 4 metres and then 0 metres and then 30 metres high and then 11.9 and then 83 metres high???</p><p>After staring at the numbers for a while, banging my head against the wall and questioning my life choices that had brought me to this point in time.</p><p>I had a light bulb moment and realised that there were columns embedded inside this string of numbers.</p><p>The first number was something to do with which chart it was displayed on, or which chart series.</p><p>Then the next number was the hour, then the minute, the Height of the waves, the direction of the waves and then the last column was the swell period.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>"waves": "  5,
            Hour Min Height Direction Swell Period
            1,   0,   0.5,  310,      9.8,
            2,   30,  0.5,  305,      9.8,
            4,   0,   0.5,  300,      9.8,
            5,   30,  0.6,  282.5,    +,
            7,   0,   0.7,  220,      4,
            8,   30,  0.8,  220,      4.6,
            10,  0,   0.9,  225,      4.9,
            11,  30,  0.9,  247,      8.1,
            13,  0,   1.2,  262,      11.3,
            14,  30,  1.5,  265,      10.9,
            16,  0,   1.7,  263,      9.6,
            17,  30,  1.6,  262.5,    9.2,
            19,  0,   1.6,  263,      9,
            20,  30,  1.5,  264,      8.7,
            22,  0,   1.4,  264,      8.4,
            23,  30,  1.4,  265.5,    8.2",
</pre></table></code></div></div><p>And it was a similar story for the wind :</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>"wind": "4,
        Hour Min Knts Direction
        1,   0,  9.4, 162,
        2,   30, 9.2, 183,
        4,   0,  11,  211,
        5,   30, 12.6,222,
        7,   0,  16,  223,
        8,   30, 18,  224"
</pre></table></code></div></div><p>Ok cool, now how do I split this string of numbers every 4 or 5 values and split it into columns in my Pandas Dataframe….</p><p>Split the wave data on the comma delimiter,</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">wave_data</span> <span class="o">=</span> <span class="n">day</span><span class="p">[</span><span class="s">'waves'</span><span class="p">].</span><span class="n">split</span><span class="p">(</span><span class="s">","</span><span class="p">)</span>
</pre></table></code></div></div><p>delete the first value that signifies the chart or series, because I don’t need it</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">del</span> <span class="n">wave_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></table></code></div></div><p>Then we <a href="https://stackoverflow.com/questions/26945277/how-to-split-python-list-every-nth-element">Split Python list every Nth element</a></p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">wave_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">wave_data</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="mi">5</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">wave_data</span><span class="p">),</span> <span class="mi">5</span><span class="p">)]</span>
</pre></table></code></div></div><p>Setup some dataframe headers</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s">'hour'</span><span class="p">,</span><span class="s">'minute'</span><span class="p">,</span><span class="s">'waveheight'</span><span class="p">,</span><span class="s">'wavedirection'</span><span class="p">,</span><span class="s">'waveperiod'</span><span class="p">]</span>
</pre></table></code></div></div><p>create DF using the wave data and headers</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">df_wave</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">wave_data</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
</pre></table></code></div></div><p>And we are left with</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre>print(df_wave) 


      hour  minute     waveheight    wavedirection waveperiod
0     0     30         1.1           31.5         5.8
1     2      0         1.1           29.0         5.9
2     3     30         1.1           32.0         5.9
3     5      0         1.1           35.0         6.1
4     6     30         1.1           30.5         6.4
5     8      0         1.0           31.0         6.4
6     9     30         1.0           31.5         6.4
7    11      0         1.1           32.0         6.5
8    12     30         1.1           33.0         6.6
9    14      0         1.1           29.0         6.7
10   15     30         1.2           30.5         6.8
11   17      0         1.3           33.0         6.8
12   18     30         1.4           32.5         7.1
13   20      0         1.4           33.0         7.4
14   21     30         1.3           33.5         7.6
15   23      0         1.2           34.0         7.6

</pre></table></code></div></div><p>Once we’ve done the same for the wind we can then merge the DF’s together</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>df_wave = df_wave.merge(df_wind, how='left', on=['hour','minute'])
</pre></table></code></div></div><h2 id="export-dataframe-as-a-html-table-with-css-styling">Export Dataframe as a HTML Table with CSS Styling<a href="#export-dataframe-as-a-html-table-with-css-styling"><i class="fas fa-hashtag"></i></a></h2></h2><p>Now that we have a dataframe we our wave forecast data we can then export it as a html file and apply some colour styling to it</p><p>Configuring some CSS styling and colors</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">cell_hover</span> <span class="o">=</span> <span class="p">{</span>  <span class="c1"># for row hover use &lt;tr&gt; instead of &lt;td&gt;
</span>    <span class="s">'selector'</span><span class="p">:</span> <span class="s">'td:hover'</span><span class="p">,</span>
    <span class="s">'props'</span><span class="p">:</span> <span class="p">[(</span><span class="s">'background-color'</span><span class="p">,</span> <span class="s">'#ffffb3'</span><span class="p">)]</span>
<span class="p">}</span>
<span class="n">index_names</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'selector'</span><span class="p">:</span> <span class="s">'.index_name'</span><span class="p">,</span>
    <span class="s">'props'</span><span class="p">:</span> <span class="s">''</span>
<span class="p">}</span>
<span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'selector'</span><span class="p">:</span> <span class="s">'th:not(.index_name)'</span><span class="p">,</span>
    <span class="s">'props'</span><span class="p">:</span> <span class="s">'background-color: #000066; color: white;'</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Converting some columns to numbers</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">s</span><span class="p">.</span><span class="n">dataframe</span><span class="p">[</span><span class="s">"hour"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">dataframe</span><span class="p">[</span><span class="s">"hour"</span><span class="p">])</span>
<span class="n">s</span><span class="p">.</span><span class="n">dataframe</span><span class="p">[</span><span class="s">"minute"</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">dataframe</span><span class="p">[</span><span class="s">"minute"</span><span class="p">])</span>
</pre></table></code></div></div><p>Filtering out rows where the conditions are bad and won’t be suitable to go to the beach</p><p>Surf conditions I wanted included in the final report :</p><ul><li>The wind is less than 15 knots, I don’t like the beach when it’s too windy<li>The time is above 6am but before 6pm, I am not interested in going too early before the sun is up or at night when the sun has gone down.<li>I don’t want to go to the beach when it’s raining so I chose 70% chance of rain as my limit.<li>I don’t like when waves are too big so include rows where the surf is under 2 meters.</ul><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">df_filtered</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">dataframe</span><span class="p">[</span><span class="n">s</span><span class="p">.</span><span class="n">dataframe</span><span class="p">.</span><span class="n">knots</span> <span class="o">&lt;</span> <span class="mi">15</span> <span class="p">]</span>
<span class="n">df_filtered</span> <span class="o">=</span> <span class="n">df_filtered</span><span class="p">[(</span><span class="n">df_filtered</span><span class="p">[</span><span class="s">'hour'</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">6</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">df_filtered</span><span class="p">[</span><span class="s">'hour'</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">18</span><span class="p">)]</span>
<span class="n">df_filtered</span> <span class="o">=</span> <span class="n">df_filtered</span><span class="p">[</span><span class="n">df_filtered</span><span class="p">.</span><span class="n">probabilityPrecip</span> <span class="o">&lt;=</span> <span class="mi">70</span> <span class="p">]</span>
<span class="n">df_filtered</span> <span class="o">=</span> <span class="n">df_filtered</span><span class="p">[</span><span class="n">df_filtered</span><span class="p">.</span><span class="n">waveheight</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="p">]</span>
</pre></table></code></div></div><p>Apply color styling to the table cells with rules similar to above, Green if the condition is favourable, Red if the condition is unfavourable.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">with</span> <span class="n">pd</span><span class="p">.</span><span class="n">option_context</span><span class="p">(</span><span class="s">'display.precision'</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">df_style</span> <span class="o">=</span> <span class="n">df_filtered</span><span class="p">.</span><span class="n">style</span>

<span class="n">df_style</span><span class="p">.</span><span class="n">hide_index</span><span class="p">()</span>
<span class="n">df_style</span><span class="p">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s">"background-color: </span><span class="si">{</span><span class="s">'lightgreen'</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">6</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">)</span> <span class="k">else</span> <span class="s">'#ffcccb'</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'hour'</span><span class="p">])</span>
<span class="n">df_style</span><span class="p">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s">"background-color: </span><span class="si">{</span><span class="s">'#ffcccb'</span> <span class="k">if</span> <span class="s">'Shower'</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">else</span> <span class="s">'lightgreen'</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'weatherIcon'</span><span class="p">])</span>
<span class="n">df_style</span><span class="p">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s">"background-color: </span><span class="si">{</span><span class="s">'#ffcccb'</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">50</span> <span class="k">else</span> <span class="s">'lightgreen'</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'probabilityPrecip'</span><span class="p">])</span>
<span class="c1">#df_style.applymap(lambda x: f"background-color: {'green' if x &gt;= 20 else 'red'}", subset=['temperature'])
</span><span class="n">df_style</span><span class="p">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s">"background-color: </span><span class="si">{</span><span class="s">'lightgreen'</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="s">'#ffcccb'</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'waveperiod'</span><span class="p">])</span>
<span class="n">df_style</span><span class="p">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s">"background-color: </span><span class="si">{</span><span class="s">'lightgreen'</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">10</span> <span class="k">else</span> <span class="s">'#ffcccb'</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'knots'</span><span class="p">])</span>
<span class="n">df_style</span><span class="p">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s">"background-color: </span><span class="si">{</span><span class="s">'lightgreen'</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">225</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">315</span><span class="p">)</span> <span class="k">else</span> <span class="s">'#ffcccb'</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'winddirection'</span><span class="p">])</span>
<span class="n">df_style</span><span class="p">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s">"background-color: </span><span class="si">{</span><span class="s">'lightgreen'</span> <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">40</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">250</span><span class="p">)</span> <span class="k">else</span> <span class="s">'#ffcccb'</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'wavedirection'</span><span class="p">])</span>
<span class="n">df_style</span><span class="p">.</span><span class="n">applymap</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="sa">f</span><span class="s">"background-color: </span><span class="si">{</span><span class="s">'lightgreen'</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="s">'#ffcccb'</span><span class="si">}</span><span class="s">"</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s">'waveheight'</span><span class="p">])</span>
</pre></table></code></div></div><p>I want a timestamp when the report is generated so I know it’s current</p><div class="language-python highlighter-rouge"><div class="code-header"> <span label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">tz_Aus</span> <span class="o">=</span> <span class="n">pytz</span><span class="p">.</span><span class="n">timezone</span><span class="p">(</span><span class="s">'Australia/Sydney'</span><span class="p">)</span>
<span class="n">datetime_Aus</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">(</span><span class="n">tz_Aus</span><span class="p">)</span>

<span class="n">html</span> <span class="o">=</span> <span class="n">html</span><span class="p">.</span><span class="n">render</span><span class="p">()</span>
<span class="n">last_updated_time</span>  <span class="o">=</span> <span class="s">"Page last updated :"</span> <span class="o">+</span> <span class="n">datetime_Aus</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%A, %d/%m/%Y %I:%M:%S %p"</span><span class="p">)</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">last_updated_time</span> <span class="o">+</span> <span class="n">html</span>
</pre></table></code></div></div><p>write html to file</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>text_file = open("index.html", "w")
text_file.write(html)
text_file.close()
</pre></table></code></div></div><p>If all goes well you should be able to open the index.html and it should look something like</p><p>https://alexlaverty.github.io/surf/index.html</p><p><img data-proofer-ignore data-src="/assets/img/rating-surf-forecast/2021-10-10-18-59-48.png" alt="" /></p><h2 id="generate-deployment-on-a-daily-schedule-using-github-action-workflow">Generate Deployment on a Daily Schedule Using Github Action Workflow<a href="#generate-deployment-on-a-daily-schedule-using-github-action-workflow"><i class="fas fa-hashtag"></i></a></h2></h2><p>Now to get this report running everyday, we use my new favourite thing, Github Actions, and we schedule the script to run once a day.</p><p>You can checkout my Github Action Workflow yml at <a href="https://raw.githubusercontent.com/alexlaverty/alexlaverty.github.io/main/.github/workflows/surf.yml">.github/workflows/surf.yml</a></p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
</pre><td class="rouge-code"><pre># Give your gitflow action a name
name: Surf

# Set a schedule to run, note it's in UTC time, so do the time conversion for your location
on:
  schedule:
    - cron: '0 19 * * *' # runs at 12:00 UTC everyday

# Also run the build if I push anything into the surf folder on the main branch
  push:
    paths:
      - 'surf/**'
    branches:
      - main
jobs:
  build:
    # RUN ON A UBUNTU SERVER
    runs-on: ubuntu-latest

    # RUN THE FOLLOWING COMMANDS IN THE SURF FOLDER
    env:
      working-directory: ./surf
    steps:

      - name: checkout repo content
        uses: actions/checkout@v2 # checkout the repository content to github runner

      - name: setup python
        uses: actions/setup-python@v2
        with:
          python-version: '3.7.7' # install the python version needed
          
      - name: install python packages
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
        working-directory: $

        # EXECUTE THE PYTHON SCRIPT WE WROTE 
      - name: execute py script # run sj-gobierno.py to get the latest data
        run: python surf.py
        working-directory: $
          
      - name: commit files
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add -A
          git commit -m "Surf Update" -a
        working-directory: $
          
      - name: push changes
        uses: ad-m/github-push-action@v0.6.0
        with:
          github_token: $
          branch: main  
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a> <a href="/tags/surf/" class="post-tag no-text-decoration" >surf</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Creating a Daily Surf Rating Report - Alex Laverty&url=https://alexlaverty.github.io/rating-surf-forecast/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Creating a Daily Surf Rating Report - Alex Laverty&u=https://alexlaverty.github.io/rating-surf-forecast/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Creating a Daily Surf Rating Report - Alex Laverty&url=https://alexlaverty.github.io/rating-surf-forecast/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/Colour-Correct-Underwater-Footage-With-DaVinci-Resolve/">Colour Correcting Underwater Footage With DaVinci Resolve</a><li><a href="/the-cooks-of-stuarts-point/">The Cooks of Stuarts Point</a><li><a href="/mountains-of-mourne/">Mountains of Mourne</a><li><a href="/Descendants-of-Charles-Dornan/">Descendants of Charles Dornan</a><li><a href="/denis-michael-laverty-obituary/">Denis Michael Laverty Obituary</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/reunion/">reunion</a> <a class="post-tag" href="/tags/denis-laverty/">Denis Laverty</a> <a class="post-tag" href="/tags/johann-peter-koch/">Johann Peter Koch</a> <a class="post-tag" href="/tags/john-mcgree/">John McGree</a> <a class="post-tag" href="/tags/patrick-mcgree/">Patrick McGree</a> <a class="post-tag" href="/tags/laverty/">laverty</a> <a class="post-tag" href="/tags/michael-laverty/">Michael Laverty</a> <a class="post-tag" href="/tags/nora-goldspring/">Nora Goldspring</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/elsie-pearl-mcgree/">Elsie Pearl McGree</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/deploying-gramps-on-github-pages-using-github-action-workflow/"><div class="card-body"> <em class="timeago small" date="2021-12-12 14:33:00 +1100" >Dec 12, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Deploying Gramps on Github Pages Using Github Action Workflow</h3><div class="text-muted small"><p> Introduction What are the benefits of doing this? Creating a Github Repository Enable Github Pages Git Clone Your Gramps Repo Export Your Gramps Family Tree as a GEDCOM File Create...</p></div></div></a></div><div class="card"> <a href="/gramps-github-actions/"><div class="card-body"> <em class="timeago small" date="2021-12-12 14:33:00 +1100" >Dec 12, 2021</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Generating a Gramps Website with Github Actions Workflow</h3><div class="text-muted small"><p> Introduction Download and install Gramps Add Your Family Members to Gramps Export Gramps Family Tree as a GEDCOM file Generate Gramps Narrated Website Locally Encrypt GEDCOM file Cre...</p></div></div></a></div><div class="card"> <a href="/Colour-Correct-Underwater-Footage-With-DaVinci-Resolve/"><div class="card-body"> <em class="timeago small" date="2022-04-25 00:00:00 +1000" >Apr 25</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Colour Correcting Underwater Footage With DaVinci Resolve</h3><div class="text-muted small"><p> Colour Grading Underwater Footage With DaVinci Resolve A while ago I went camping with my family to Narrabeen Caravan Park, while there I took some underwater video of various sea creatures with m...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/gramps-github-actions/" class="btn btn-outline-primary" prompt="Older"><p>Generating a Gramps Website with Github Actions Workflow</p></a> <a href="/laverty-coat-of-arms/" class="btn btn-outline-primary" prompt="Newer"><p>Laverty Coat of Arms</p></a></div><div id="disqus_thread" class="pt-2 pb-2"><p class="text-center text-muted small"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script type="text/javascript"> var disqus_config = function () { this.page.url = 'https://alexlaverty.github.io/rating-surf-forecast/'; this.page.identifier = '/rating-surf-forecast/'; }; /* Lazy loading */ var disqus_observer = new IntersectionObserver(function (entries) { if(entries[0].isIntersecting) { (function () { var d = document, s = d.createElement('script'); s.src = 'https://alexlaverty.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); disqus_observer.disconnect(); } }, { threshold: [0] }); disqus_observer.observe(document.querySelector('#disqus_thread')); /* Auto switch theme */ function reloadDisqus() { /* Disqus hasn't been loaded */ if (typeof DISQUS === "undefined") { return; } if (document.readyState == 'complete') { DISQUS.reset({ reload: true, config: disqus_config }); } } const modeToggle = document.querySelector(".mode-toggle"); if (typeof modeToggle !== "undefined") { /* modeToggle.addEventListener('click', reloadDisqus); // not pretty for 'color-scheme' */ window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', reloadDisqus); } </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/alaverty">Alex Laverty</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/reunion/">reunion</a> <a class="post-tag" href="/tags/denis-laverty/">Denis Laverty</a> <a class="post-tag" href="/tags/johann-peter-koch/">Johann Peter Koch</a> <a class="post-tag" href="/tags/john-mcgree/">John McGree</a> <a class="post-tag" href="/tags/patrick-mcgree/">Patrick McGree</a> <a class="post-tag" href="/tags/laverty/">laverty</a> <a class="post-tag" href="/tags/michael-laverty/">Michael Laverty</a> <a class="post-tag" href="/tags/nora-goldspring/">Nora Goldspring</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/elsie-pearl-mcgree/">Elsie Pearl McGree</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
